import{j as e,y as x,r as o}from"./index-_x4LqXeA.js";import{e as h,c as n,i as N,f as g,d as u,D as j,S as C,p as y,F as b,b as v}from"./ForexCopyAccountsPanel-DjbHKwxr.js";import{L as w}from"./link-2-DRxHJbwB.js";import{S as E}from"./settings-2-BmbFXlTS.js";import"./ellipsis-vertical-CaplzEpS.js";import"./download-B9Ll9-Qf.js";import"./power-UR2-Hce3.js";import"./refresh-cw-DbxyBI9D.js";import"./plus-Dr61E6Gh.js";import"./crown-BIlIHcvw.js";import"./save-CpCvopvD.js";import"./trash-2-BfimlZ-T.js";function S({value:t,onChange:a}){return e.jsxs("div",{className:h,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-base font-semibold text-slate-100 flex items-center gap-2",children:[e.jsx(w,{size:18}),"Follow a Trader"]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Enter Trader Code → connect your account(s) and start copying."})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Status:"," ",e.jsx("span",{className:n("font-semibold",t.status==="CONNECTED"?"text-emerald-300":t.status==="PENDING"?"text-amber-300":"text-slate-300"),children:t.status})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-300",children:"TRADER CODE"}),e.jsx("input",{className:N.replace("mt-2","mt-2"),value:t.traderCode,onChange:s=>a({...t,traderCode:s.target.value}),placeholder:"e.g. FXTRADER-7K9A"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:n(u,g,"w-full justify-center"),onClick:()=>{if(!t.traderCode.trim())return x.error("Trader code required");a({...t,status:"CONNECTED"}),x.success("Connected (dummy)")},children:"Connect"})})]}),e.jsx("div",{className:"mt-3 text-[11px] text-slate-500",children:"In real flow you can keep status as PENDING until trader approves, but for forex you said it can be one-time/simple."})]})}function T({open:t,onClose:a,value:s,onChange:i}){const l=r=>i({...s,...r});return e.jsx(j,{open:t,title:"Copy Settings",onClose:a,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 p-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Position multiplier"}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Example: 0.5 = half size, 2 = double size."}),e.jsx("input",{type:"number",step:"0.1",className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",value:s.multiplier,onChange:r=>l({multiplier:Number(r.target.value||0)})})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 p-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Risk caps"}),e.jsxs("div",{className:"mt-3 grid gap-3 grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:"MAX SLIPPAGE (pips)"}),e.jsx("input",{type:"number",className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",value:s.maxSlippagePips,onChange:r=>l({maxSlippagePips:Number(r.target.value||0)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:"PER-TRADE CAP"}),e.jsx("input",{type:"number",className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm",value:s.perTradeRiskCap,onChange:r=>l({perTradeRiskCap:Number(r.target.value||0)})})]})]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Pause copying"}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Temporarily stop copying new trades."})]}),e.jsx(C,{checked:s.pauseCopy,onChange:r=>l({pauseCopy:r})})]})})]})})}function c(t,a){try{const s=localStorage.getItem(t);return s?JSON.parse(s):a}catch{return a}}function d(t,a){try{localStorage.setItem(t,JSON.stringify(a))}catch{}}function J(){const[t,a]=o.useState(()=>c("copy.fx.follower.link.v1",{traderCode:"",status:"NONE"}));o.useEffect(()=>d("copy.fx.follower.link.v1",t),[t]);const[s,i]=o.useState(()=>c("copy.fx.follower.accounts.v1",[]));o.useEffect(()=>d("copy.fx.follower.accounts.v1",s),[s]);const[l,r]=o.useState(()=>c("copy.fx.follower.settings.v1",{multiplier:1,maxSlippagePips:2,perTradeRiskCap:500,pauseCopy:!1}));o.useEffect(()=>d("copy.fx.follower.settings.v1",l),[l]);const[f,m]=o.useState(!1),p=t.status==="CONNECTED"&&s.length>0&&!l.pauseCopy;return o.useEffect(()=>{t.status==="CONNECTED"&&s.length===0&&x.info("Connected. Add at least one account to start copying.",{autoClose:2200})},[t.status,s.length]),e.jsxs("div",{className:y,children:[e.jsxs("div",{className:"mb-5 flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-white",children:"Copy Trading • Forex (Follower)"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Connect to a trader → add your account(s) → configure copy risk."})]}),e.jsxs("button",{className:n(u,v),onClick:()=>m(!0),children:[e.jsx(E,{size:14}),"Copy Settings"]})]}),e.jsx(S,{value:t,onChange:a}),e.jsx("div",{className:"mt-5",children:e.jsx(b,{roleMode:"FOLLOWER",maxAccounts:10,value:s,onChange:i})}),e.jsxs("div",{className:"mt-5 rounded-2xl border border-white/5 bg-slate-950/30 p-4 text-sm",children:["Status:"," ",e.jsx("span",{className:n("font-semibold",p?"text-emerald-300":"text-amber-300"),children:p?"Copying READY":"Not ready"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Requirements: Connected trader + at least one account + copy not paused."})]}),e.jsx(T,{open:f,onClose:()=>m(!1),value:l,onChange:r})]})}export{J as default};
