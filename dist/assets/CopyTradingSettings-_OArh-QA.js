import{c as I,u as H,r as c,j as e,A as X}from"./index-_x4LqXeA.js";import{E as P}from"./external-link-Cb29PXaN.js";import{F as $}from"./file-text-cfyJSHPq.js";import{C as Z}from"./credit-card-Btv1osjQ.js";import{S as q}from"./shield-Dk9kDT45.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],K=I("book-open",J);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],W=I("circle-pause",V);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ee=I("circle-play",Q),se=[{planId:"fx_basic_001",market:"FOREX",planName:"Forex Basic",tier:"basic",executionAllowed:!0,expiresAt:"2026-03-01T00:00:00.000Z",limits:{maxConnectedAccounts:2,maxActiveStrategies:1,maxDailyTrades:50,maxLotPerTrade:2},strategiesAvailable:!0,webhookAvailable:!0},{planId:"fx_elite_002",market:"FOREX",planName:"Forex Elite",tier:"elite",executionAllowed:!0,expiresAt:"2026-12-31T00:00:00.000Z",limits:{maxConnectedAccounts:10,maxActiveStrategies:10,maxDailyTrades:300,maxLotPerTrade:10},strategiesAvailable:!0,webhookAvailable:!0},{planId:"in_basic_101",market:"INDIA",planName:"India Basic",tier:"basic",executionAllowed:!0,expiresAt:"2026-02-15T00:00:00.000Z",limits:{maxConnectedAccounts:2,maxActiveStrategies:1,maxDailyTrades:30},strategiesAvailable:!0,webhookAvailable:!0},{planId:"in_pro_102",market:"INDIA",planName:"India Pro",tier:"pro",executionAllowed:!0,expiresAt:"2026-06-15T00:00:00.000Z",limits:{maxConnectedAccounts:5,maxActiveStrategies:5,maxDailyTrades:120},strategiesAvailable:!0,webhookAvailable:!0},{planId:"cr_basic_201",market:"CRYPTO",planName:"Crypto Basic",tier:"basic",executionAllowed:!0,expiresAt:"2026-02-10T00:00:00.000Z",limits:{maxConnectedAccounts:2,maxActiveStrategies:1,maxDailyTrades:200},strategiesAvailable:!0,webhookAvailable:!0},{planId:"cp_basic_301",market:"COPY",planName:"Copy Basic",tier:"basic",executionAllowed:!0,expiresAt:"2026-04-01T00:00:00.000Z",limits:{maxConnectedAccounts:10,maxActiveStrategies:1},strategiesAvailable:!0,webhookAvailable:!0}],te={FOREX:{accountsUsed:2,strategiesEnabledCount:0,tradesToday:6},INDIA:{accountsUsed:2,strategiesEnabledCount:1,tradesToday:3},CRYPTO:{accountsUsed:1,strategiesEnabledCount:0,tradesToday:12},COPY:{accountsUsed:4,strategiesEnabledCount:1,tradesToday:9}},ae={fx_basic_001:{strategiesEnabled:!1,webhookEnabled:!1},fx_elite_002:{strategiesEnabled:!0,webhookEnabled:!0},in_basic_101:{strategiesEnabled:!0,webhookEnabled:!0},in_pro_102:{strategiesEnabled:!0,webhookEnabled:!1},cr_basic_201:{strategiesEnabled:!1,webhookEnabled:!0},cp_basic_301:{strategiesEnabled:!0,webhookEnabled:!0}},le={FOREX:"fx_basic_001",INDIA:"in_basic_101",CRYPTO:"cr_basic_201",COPY:"cp_basic_301"},ie={paused:!1,pauseUntil:null,maxLossAmount:2500,maxLossPercent:null,minGainAmount:800,minGainPercent:null,maxTradesPerDay:25,stopAfterConsecutiveLosses:3,blockOutsideHours:!0,tradeFromHHMM:"09:15",tradeToHHMM:"15:30",manualResumeRequired:!0};function r(...t){return t.filter(Boolean).join(" ")}function f(t,i){try{const n=localStorage.getItem(t);return n?JSON.parse(n):i}catch{return i}}function k(t,i){try{localStorage.setItem(t,JSON.stringify(i))}catch{}}const u={selections:"hub.marketSelection.v1",signals:"hub.planSignals.v1",usage:"hub.usage.v1",global:"hub.globalRisk.v1"},ne={FOREX:"/forex-trading",INDIA:"/indian-trading",CRYPTO:"/crypto-trading",COPY:"/copy-trading"},L="w-full",w="rounded-2xl border border-slate-800 bg-slate-900/60",C="p-5 md:p-6",re="rounded-2xl border border-slate-800 bg-slate-950/40",b="inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition disabled:opacity-60 disabled:cursor-not-allowed",g="border border-slate-700 bg-slate-900/40 text-slate-200 hover:bg-slate-900/60",oe="border border-emerald-500/30 bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/20",h="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 outline-none transition focus:border-emerald-400/60 focus:ring-1 focus:ring-emerald-400/40";function ce(t){if(!t)return"—";const i=new Date(t);return Number.isFinite(i.getTime())?new Intl.DateTimeFormat("en-IN",{day:"2-digit",month:"short",year:"numeric"}).format(i):"—"}function de({checked:t,onChange:i}){return e.jsx("button",{type:"button",onClick:()=>i(!t),className:r("relative h-6 w-11 rounded-full border transition",t?"bg-emerald-500/90 border-emerald-400":"bg-slate-800 border-slate-700"),"aria-pressed":t,children:e.jsx("span",{className:r("absolute top-[3px] h-4 w-4 rounded-full bg-slate-950 transition",t?"left-6":"left-[3px]")})})}function T({ok:t}){return e.jsx("span",{className:r("inline-block h-2 w-2 rounded-full",t?"bg-emerald-400":"bg-slate-500")})}function he(){const t=H(),i=c.useMemo(()=>se,[]),n=c.useMemo(()=>{const a={FOREX:[],INDIA:[],CRYPTO:[],COPY:[]};for(const l of i)a[l.market].push(l);return a},[i]),j=c.useMemo(()=>Object.keys(n).filter(a=>n[a].length>0),[n]),[N,S]=c.useState(()=>f(u.selections,le)),[v,Y]=c.useState(()=>f(u.signals,ae)),[z]=c.useState(()=>f(u.usage,te)),[o,p]=c.useState(()=>f(u.global,ie));c.useEffect(()=>k(u.selections,N),[N]),c.useEffect(()=>k(u.signals,v),[v]),c.useEffect(()=>k(u.global,o),[o]),c.useEffect(()=>{S(a=>{const l={...a};return Object.keys(n).forEach(x=>{const s=n[x];s.length===0?l[x]=null:(!l[x]||!s.some(d=>d.planId===l[x]))&&(l[x]=s[0].planId)}),l})},[n]),c.useEffect(()=>{const a=i.map(l=>l.planId);Y(l=>{let x=!1;const s={...l};for(const d of a)s[d]||(s[d]={strategiesEnabled:!0,webhookEnabled:!1},x=!0);return x?s:l})},[i]);const y=o.paused&&(!o.pauseUntil||Number.isFinite(new Date(o.pauseUntil).getTime())&&new Date(o.pauseUntil).getTime()>Date.now());return j.length===0?e.jsxs("div",{className:L,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"text-xl md:text-2xl font-semibold text-white",children:"Settings"}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"No active plans."})]}),e.jsxs("div",{className:r(w,C),children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"No active plans"}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"Buy a plan to unlock trading modules."}),e.jsxs("button",{className:r(b,g,"mt-4"),onClick:()=>t("/plan"),children:["Open Plans ",e.jsx(P,{size:16})]})]})]}):e.jsxs("div",{className:L,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-white",children:"Settings"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Simple hub to open the right module. Full setup happens inside each market page."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{className:r(b,g),onClick:()=>t("/plan"),children:["Plans ",e.jsx(P,{size:16})]}),e.jsxs("button",{className:r(b,g),onClick:()=>t("/user/logs/trades"),children:[e.jsx($,{size:16})," Trades"]}),e.jsxs("button",{className:r(b,g),onClick:()=>t("/user/logs/orders"),children:[e.jsx(K,{size:16})," Positions"]}),e.jsxs("button",{className:r(b,g),onClick:()=>t("/subscriptions/invoices"),children:[e.jsx(Z,{size:16})," Invoices"]})]})]}),e.jsxs("div",{className:r(w,C,"mb-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:18,className:"text-amber-300"}),e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Global Safety"}),e.jsxs("span",{className:r("ml-2 inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs",y?"border-rose-500/30 bg-rose-500/10 text-rose-200":"border-emerald-500/30 bg-emerald-500/10 text-emerald-200"),children:[y?e.jsx(W,{size:14}):e.jsx(ee,{size:14}),y?"Paused":"Active"]})]}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"Keep this simple. Pause everything or apply daily limits."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-300",children:"Pause All"}),e.jsx(de,{checked:o.paused,onChange:a=>p(l=>({...l,paused:a}))})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Pause until (optional)"}),e.jsx("input",{className:h,type:"datetime-local",value:o.pauseUntil?xe(o.pauseUntil):"",onChange:a=>p(l=>({...l,pauseUntil:a.target.value?new Date(a.target.value).toISOString():null}))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Max loss/day (₹)"}),e.jsx("input",{className:h,placeholder:"e.g. 2500",value:o.maxLossAmount??"",onChange:a=>p(l=>({...l,maxLossAmount:E(a.target.value)}))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Min gain/day (₹)"}),e.jsx("input",{className:h,placeholder:"e.g. 800",value:o.minGainAmount??"",onChange:a=>p(l=>({...l,minGainAmount:E(a.target.value)}))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Max trades/day"}),e.jsx("input",{className:h,placeholder:"e.g. 25",value:o.maxTradesPerDay??"",onChange:a=>p(l=>({...l,maxTradesPerDay:E(a.target.value)}))})]})]})]}),e.jsx("div",{className:"mb-3 flex items-end justify-between gap-2 flex-wrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Your Markets"}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"Accounts + strategies/webhook are configured inside each market page."})]})}),e.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:Object.keys(n).filter(a=>n[a].length>0).map(a=>{var D,F,R,M;const l=n[a],x=N[a]??((D=l[0])==null?void 0:D.planId)??null,s=l.find(m=>m.planId===x)??l[0],d=s?v[s.planId]:void 0,_=!!(s!=null&&s.strategiesAvailable)&&!!(d!=null&&d.strategiesEnabled),O=!!(s!=null&&s.webhookAvailable)&&!!(d!=null&&d.webhookEnabled),A=z[a],B=(A==null?void 0:A.accountsUsed)??null;return e.jsxs("div",{className:r(w,C),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:U(a)}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Accounts used:"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:B??"—"}),(F=s==null?void 0:s.limits)!=null&&F.maxConnectedAccounts?e.jsxs(e.Fragment,{children:[" ","/"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:s.limits.maxConnectedAccounts})]}):null]})]}),e.jsxs("button",{type:"button",className:r(b,oe),onClick:()=>t(ne[a]),children:["Open ",e.jsx(X,{size:16})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Plan"}),e.jsx("select",{className:h,value:(s==null?void 0:s.planId)??"",onChange:m=>S(G=>({...G,[a]:m.target.value})),disabled:l.length<=1,children:l.map(m=>e.jsx("option",{value:m.planId,children:m.planName},m.planId))}),e.jsxs("div",{className:"text-[12px] text-slate-500 mt-2",children:["Valid until: ",e.jsx("span",{className:"text-slate-200",children:ce(s==null?void 0:s.expiresAt)})]})]}),e.jsxs("div",{className:r(re,"p-4"),children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Status"}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-300",children:"Execution"}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(T,{ok:!!(s!=null&&s.executionAllowed)}),e.jsx("span",{className:"text-slate-200",children:s!=null&&s.executionAllowed?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-300",children:"Strategies"}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(T,{ok:_}),e.jsx("span",{className:"text-slate-200",children:_?"ON":"OFF"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-300",children:"Webhook"}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(T,{ok:O}),e.jsx("span",{className:"text-slate-200",children:O?"ON":"OFF"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-800 text-[12px] text-slate-400",children:["Limits: ",((R=s==null?void 0:s.limits)==null?void 0:R.maxActiveStrategies)??"—"," strategies •"," ",((M=s==null?void 0:s.limits)==null?void 0:M.maxDailyTrades)??"—"," trades/day"]})]})]})]}),e.jsxs("div",{className:"mt-4 text-[12px] text-slate-500",children:["Configure accounts + strategies/webhook inside"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:U(a)})," page."]})]},a)})})]})}function U(t){return t==="FOREX"?"Forex Trading":t==="INDIA"?"Indian Trading":t==="CRYPTO"?"Crypto Trading":"Copy Trading"}function E(t){const i=t.trim();if(!i)return null;const n=Number(i);return Number.isFinite(n)?n:null}function xe(t){const i=new Date(t);if(!Number.isFinite(i.getTime()))return"";const n=j=>String(j).padStart(2,"0");return`${i.getFullYear()}-${n(i.getMonth()+1)}-${n(i.getDate())}T${n(i.getHours())}:${n(i.getMinutes())}`}export{he as default};
