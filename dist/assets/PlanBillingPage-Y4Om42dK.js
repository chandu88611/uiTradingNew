import{c as k,h as _,r as f,j as e,S as C,A as L}from"./index-_x4LqXeA.js";import{u as B}from"./profileSubscription.api-Cchy4I3l.js";import{R as I}from"./refresh-cw-DbxyBI9D.js";import{L as $}from"./layers-Bf8l_RcR.js";import{C as T}from"./crown-BIlIHcvw.js";import{C as P}from"./credit-card-Btv1osjQ.js";import{H as M}from"./hash-D-36adla.js";import{M as R}from"./map-pin-DjW0nyJt.js";import{S as H}from"./settings-2-BmbFXlTS.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],G=k("calendar-clock",q);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],O=k("receipt",V);function n(...s){return s.filter(Boolean).join(" ")}const Q="w-full",S="rounded-2xl border border-white/5 bg-slate-900/35 backdrop-blur p-5 md:p-6 shadow-[0_0_0_1px_rgba(255,255,255,0.02)]",U="rounded-2xl border border-white/5 bg-slate-950/30 backdrop-blur shadow-[0_0_0_1px_rgba(255,255,255,0.02)]",o="inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition",g="border-white/10 bg-white/5 text-slate-200 hover:bg-white/10",Y="border-emerald-500/30 bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/20";function Z(s){const i=Number(s??0);return Number.isFinite(i)?`₹${(i/100).toLocaleString("en-IN",{maximumFractionDigits:2})}`:"—"}function b(s){if(!s)return!1;const i=new Date(s).getTime();return Number.isFinite(i)?i<Date.now():!1}function J(s){const i=!!((s==null?void 0:s.executionEnabled)??(s==null?void 0:s.allowTrade));return b(s==null?void 0:s.endDate)?{label:"Expired",tone:"text-rose-200 bg-rose-500/10 border-rose-500/20"}:i?{label:"Active • Execution ON",tone:"text-emerald-200 bg-emerald-500/10 border-emerald-500/20"}:{label:"Active • Execution OFF",tone:"text-slate-200 bg-white/5 border-white/10"}}function K(s){if(!s)return"—";try{return new Date(s).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"—"}}function de(){const{data:s,isLoading:i,isFetching:c,refetch:E}=B(),{data:p,isLoading:u,isFetching:v,refetch:z}=_(),m=(s==null?void 0:s.data)??null,r=f.useMemo(()=>m?Array.isArray(m)?m.filter(Boolean):[m]:[],[m]),d=(p==null?void 0:p.data)??null,N=f.useMemo(()=>{const a=new Set;return r.forEach(l=>{var h;const t=String(((h=l==null?void 0:l.plan)==null?void 0:h.category)??"").trim();t&&a.add(t)}),["ALL",...Array.from(a)]},[r]),[j,D]=f.useState("ALL"),F=f.useMemo(()=>j==="ALL"?r:r.filter(a=>{var l;return String(((l=a==null?void 0:a.plan)==null?void 0:l.category)??"")===j}),[r,j]),w=f.useMemo(()=>{if(r.length===0)return{label:"No active plans",tone:"text-yellow-200 bg-yellow-500/10 border-yellow-500/20"};const a=r.some(t=>!!((t==null?void 0:t.executionEnabled)??(t==null?void 0:t.allowTrade))&&!b(t==null?void 0:t.endDate)),l=r.some(t=>b(t==null?void 0:t.endDate));return a?{label:`${r.length} Plan(s) • Some Execution Enabled`,tone:"text-emerald-200 bg-emerald-500/10 border-emerald-500/20"}:l?{label:`${r.length} Plan(s) • Some Expired`,tone:"text-rose-200 bg-rose-500/10 border-rose-500/20"}:{label:`${r.length} Plan(s) • Execution Disabled`,tone:"text-slate-200 bg-white/5 border-white/10"}},[r]),y=i||c||u||v;return e.jsxs("div",{className:Q,children:[e.jsxs("div",{className:"mb-5 flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-white",children:"Plans & Billing"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Manage active plans across Forex / India / Crypto / Copy + invoice billing details."}),e.jsxs("div",{className:n("mt-3 inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs",w.tone),children:[e.jsx(C,{size:14}),e.jsx("span",{children:w.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{E(),z()},className:n(o,g),children:[e.jsx(I,{size:16,className:y?"animate-spin":""}),y?"Refreshing…":"Refresh"]}),e.jsxs("a",{href:"/subscriptions/dashboard",className:n(o,Y),children:[e.jsx(O,{size:16}),"Subscription Dashboard"]})]})]}),N.length>1?e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"inline-flex flex-wrap gap-2 rounded-2xl border border-white/5 bg-slate-950/25 p-2",children:N.map(a=>{const l=j===a;return e.jsxs("button",{onClick:()=>D(a),className:n("inline-flex items-center gap-2 rounded-xl px-4 py-2 text-sm border transition",l?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-transparent text-slate-300 border-white/5 hover:bg-white/5 hover:border-white/10"),children:[e.jsx($,{size:16}),a]},a)})})}):null,e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("section",{className:S,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{size:18,className:"text-yellow-300"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Active Plans"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"You can have multiple active plans in parallel."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("a",{href:"/pricing",className:n(o,g),children:["Explore Plans ",e.jsx(L,{size:16})]})})]}),r.length===0?e.jsx("div",{className:"mt-5 rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-300",children:"No active plans found. Purchase a plan to enable features."}):e.jsx("div",{className:"mt-5 space-y-4",children:F.map((a,l)=>{const t=(a==null?void 0:a.plan)??null,h=J(a);return e.jsxs("div",{className:n(U,"p-4"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-100 truncate",children:(t==null?void 0:t.name)||(t==null?void 0:t.planCode)||"—"}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[(t==null?void 0:t.category)||"—"," • ",(t==null?void 0:t.interval)||"—"," •"," ",(t==null?void 0:t.executionFlow)||"—"]})]}),e.jsxs("div",{className:n("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs",h.tone),children:[e.jsx(C,{size:14}),e.jsx("span",{children:h.label})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(A,{icon:e.jsx(P,{size:14}),label:"Price",value:`${Z(t==null?void 0:t.priceCents)} / ${(t==null?void 0:t.interval)||"—"}`}),e.jsx(A,{icon:e.jsx(G,{size:14}),label:"Valid until",value:K(a==null?void 0:a.endDate)})]}),e.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[e.jsx(x,{label:"Max Accounts",value:t==null?void 0:t.maxConnectedAccounts}),e.jsx(x,{label:"Max Strategies",value:t==null?void 0:t.maxActiveStrategies}),e.jsx(x,{label:"Max Daily Trades",value:t==null?void 0:t.maxDailyTrades}),e.jsx(x,{label:"Max Lot/Trade",value:t==null?void 0:t.maxLotPerTrade}),e.jsx(x,{label:"Plan Code",value:t==null?void 0:t.planCode,mono:!0}),e.jsx(x,{label:"Category",value:t==null?void 0:t.category})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2 flex-wrap rounded-xl border border-white/10 bg-white/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx(M,{size:14}),"Subscription ID:"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:(a==null?void 0:a.id)??"—"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:"/subscriptions/dashboard",className:n(o,g,"py-2 text-xs"),children:"Manage"}),e.jsx("a",{href:"/subscriptions/invoices",className:n(o,g,"py-2 text-xs"),children:"Invoices"})]})]})]},(a==null?void 0:a.id)??`${(t==null?void 0:t.planCode)??"plan"}-${l}`)})})]}),e.jsxs("section",{className:S,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{size:18,className:"text-emerald-300"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Billing Details"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Used for invoices (PAN + address)."})]}),e.jsxs("a",{href:"/profile",className:n(o,g,"text-xs"),children:["Edit in Profile ",e.jsx(L,{size:16})]})]}),u||v?e.jsx("div",{className:"mt-5 text-sm text-slate-400",children:"Loading billing…"}):e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsx(W,{icon:e.jsx(M,{size:16}),label:"PAN Number",value:(d==null?void 0:d.panNumber)||"—"}),e.jsxs("div",{className:"rounded-2xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-200",children:[e.jsx(R,{size:16}),e.jsx("p",{className:"text-sm font-semibold",children:"Address"})]}),d?e.jsxs("div",{className:"mt-3 text-sm text-slate-100 space-y-1",children:[e.jsx("div",{children:d.addressLine1||"—"}),d.addressLine2?e.jsx("div",{children:d.addressLine2}):null,e.jsx("div",{className:"text-slate-300",children:[d.city,d.state].filter(Boolean).join(", ")}),e.jsx("div",{className:"font-semibold",children:d.pincode||"—"})]}):e.jsx("div",{className:"mt-3 text-sm text-slate-300",children:"—"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-xs text-slate-300",children:["Tip: If billing details are empty, open"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:"Profile"})," → Billing tab and save PAN + address."]})]})]})]})]})}function A({icon:s,label:i,value:c}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-white/5 bg-slate-950/25 p-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-white/5 flex items-center justify-center text-slate-300",children:s}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:i}),e.jsx("div",{className:"text-sm font-semibold text-slate-100 truncate",children:c})]})]})}function x({label:s,value:i,mono:c}){return e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/5 bg-slate-950/25 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(H,{size:14}),e.jsx("span",{className:"text-xs",children:s})]}),e.jsx("div",{className:n("text-sm font-semibold text-slate-100",c&&"font-mono"),children:i??"—"})]})}function W({icon:s,label:i,value:c}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-white/5 bg-slate-950/25 p-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-white/5 flex items-center justify-center text-slate-300",children:s}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:i}),e.jsx("div",{className:"text-sm font-semibold text-slate-100 truncate",children:c})]})]})}export{de as default};
