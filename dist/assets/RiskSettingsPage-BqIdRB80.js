import{c as V,r as f,j as e,U as q,S as Z,C as Q,X as ee,q as te,B as se,s as ae,y as P,A as le,n as ne}from"./index-_x4LqXeA.js";import{L as ie}from"./layers-Bf8l_RcR.js";import{S as re}from"./sliders-horizontal-B9MMwDiR.js";import{A as de}from"./activity-DlF2vdC5.js";import{S as oe}from"./settings-2-BmbFXlTS.js";import{E as ce}from"./external-link-Cb29PXaN.js";import{C as G}from"./check-PL_ZbQ2F.js";import{T as xe}from"./triangle-alert-D1FQ0MAl.js";import{I as me}from"./info-DjzTicev.js";import{R as ue}from"./refresh-cw-DbxyBI9D.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],be=V("building-2",he),ge=[{id:"sub_1",endDate:"2026-12-31T23:59:59Z",executionEnabled:!0,plan:{id:"plan_fx_pro",name:"Pro Forex",category:"FOREX",executionEnabled:!0,limits:{maxConnectedAccounts:3,maxActiveStrategies:1,maxDailyTrades:40,maxLotPerTrade:2}}},{id:"sub_2",endDate:"2026-06-30T23:59:59Z",executionEnabled:!0,plan:{id:"plan_fx_elite",name:"Elite Forex",category:"FOREX",executionEnabled:!0,limits:{maxConnectedAccounts:6,maxActiveStrategies:3,maxDailyTrades:120,maxLotPerTrade:5}}},{id:"sub_3",endDate:"2026-05-15T23:59:59Z",executionEnabled:!1,plan:{id:"plan_india_basic",name:"India Basic",category:"INDIA",executionEnabled:!1,limits:{maxConnectedAccounts:1,maxActiveStrategies:1,maxDailyTrades:10,maxLotPerTrade:1}}},{id:"sub_4",endDate:"2026-10-01T23:59:59Z",executionEnabled:!0,plan:{id:"plan_bundle_all",name:"Bundle All",category:"BUNDLE",included_markets:["FOREX","INDIA","CRYPTO","COPY"],metadata:{tier:"bundle",includes:"multi"},executionEnabled:!0,limits:{maxConnectedAccounts:10,maxActiveStrategies:5,maxDailyTrades:200,maxLotPerTrade:10}}}],pe=[{id:"acc_fx_1",name:"ICMarkets MT5",provider:"MT5",login:"123456",market:"FOREX"},{id:"acc_fx_2",name:"Pepperstone cTrader",provider:"cTrader",login:"CT-8891",market:"FOREX"},{id:"acc_in_1",name:"Zerodha Kite",provider:"Kite",login:"ABCD12",market:"INDIA"},{id:"acc_cr_1",name:"Binance Futures",provider:"Binance",login:"key-****",market:"CRYPTO"},{id:"acc_cp_1",name:"Copy Master #1",provider:"Copy",login:"master-001",market:"COPY"}],fe=[{id:"fx_pro_trend",planId:"plan_fx_pro",market:"FOREX",name:"Trend Rider",description:"Trend confirmation + strict caps. Safe default.",riskHint:"Recommended with daily loss guard + cooldown",tags:["trend","safe"]},{id:"fx_pro_breakout",planId:"plan_fx_pro",market:"FOREX",name:"Breakout Hunter",description:"Captures volatility expansions. Needs strict risk rules.",riskHint:"Use low lot + max trades/day",tags:["breakout","volatile"]},{id:"fx_elite_trend_plus",planId:"plan_fx_elite",market:"FOREX",name:"Trend Rider+",description:"Trend system with multi-timeframe filter.",tags:["trend"]},{id:"fx_elite_scalp",planId:"plan_fx_elite",market:"FOREX",name:"Scalp Engine",description:"Fast entries, higher frequency. Use cooldown + max trades.",tags:["scalp","fast"]},{id:"fx_elite_reversion",planId:"plan_fx_elite",market:"FOREX",name:"Mean Reversion",description:"Range trades. Avoid news times.",tags:["reversion"]},{id:"in_basic_swing",planId:"plan_india_basic",market:"INDIA",name:"Swing Builder",description:"Low frequency swing entries for NSE/BSE.",tags:["swing"]},{id:"bundle_crypto_grid",planId:"plan_bundle_all",market:"CRYPTO",name:"Grid Bot",description:"Range grid strategy. Works best in sideways markets.",tags:["grid"]},{id:"bundle_copy_guarded",planId:"plan_bundle_all",market:"COPY",name:"Guarded Copy",description:"Copies with strict max loss/day and position caps.",tags:["copy","risk"]}];function u(...t){return t.filter(Boolean).join(" ")}function B(t){if(!t)return!1;const a=new Date(t).getTime();return Number.isFinite(a)?a<Date.now():!1}function W(t){const a=String(t??"").trim().toUpperCase();return a?["FOREX","FX"].includes(a)?"FOREX":["INDIA","NSE","BSE","INDIAN"].includes(a)?"INDIA":["CRYPTO","COIN","DELTA"].includes(a)?"CRYPTO":["COPY","COPYTRADING","COPY_TRADING"].includes(a)?"COPY":null:null}function J(t){var x,s,l;const a=W(t==null?void 0:t.category);if(a)return[a];const r=(t==null?void 0:t.included_markets)??(t==null?void 0:t.includedMarkets)??((x=t==null?void 0:t.metadata)==null?void 0:x.included_markets)??null;if(Array.isArray(r)){const m=r.map(W).filter(Boolean);if(m.length)return Array.from(new Set(m))}const n=String(((s=t==null?void 0:t.metadata)==null?void 0:s.tier)??"").toLowerCase(),i=String(((l=t==null?void 0:t.metadata)==null?void 0:l.includes)??"").toLowerCase();return n==="bundle"||i==="multi"||String((t==null?void 0:t.category)??"").toUpperCase()==="BUNDLE"?["FOREX","INDIA","CRYPTO","COPY"]:[]}function L(t,a){const r=Number(t??0),n=Number(a??0);return Number.isFinite(r)?Number.isFinite(n)?Math.max(r,n):r:n}function je(t){var r,n,i,x;const a={FOREX:{hasPlan:!1,plansCount:0,executionAllowed:!1,earliestEndDate:null},INDIA:{hasPlan:!1,plansCount:0,executionAllowed:!1,earliestEndDate:null},CRYPTO:{hasPlan:!1,plansCount:0,executionAllowed:!1,earliestEndDate:null},COPY:{hasPlan:!1,plansCount:0,executionAllowed:!1,earliestEndDate:null}};for(const s of t||[]){if(B(s==null?void 0:s.endDate))continue;const l=s.plan,m=J(l);if(!m.length)continue;const c=!!((s==null?void 0:s.executionEnabled)??(l==null?void 0:l.executionEnabled));for(const d of m){a[d].hasPlan=!0,a[d].plansCount+=1,a[d].executionAllowed=a[d].executionAllowed||c,a[d].maxConnectedAccounts=L(a[d].maxConnectedAccounts,(r=l==null?void 0:l.limits)==null?void 0:r.maxConnectedAccounts),a[d].maxActiveStrategies=L(a[d].maxActiveStrategies,(n=l==null?void 0:l.limits)==null?void 0:n.maxActiveStrategies),a[d].maxDailyTrades=L(a[d].maxDailyTrades,(i=l==null?void 0:l.limits)==null?void 0:i.maxDailyTrades),a[d].maxLotPerTrade=L(a[d].maxLotPerTrade,(x=l==null?void 0:l.limits)==null?void 0:x.maxLotPerTrade);const g=s!=null&&s.endDate?String(s.endDate):null;if(g)if(!a[d].earliestEndDate)a[d].earliestEndDate=g;else{const j=new Date(a[d].earliestEndDate).getTime(),h=new Date(g).getTime();Number.isFinite(j)&&Number.isFinite(h)&&h<j&&(a[d].earliestEndDate=g)}}}return a}function ve(t){var r,n,i,x;const a={FOREX:[],INDIA:[],CRYPTO:[],COPY:[]};for(const s of t||[]){if(B(s==null?void 0:s.endDate))continue;const l=s.plan,m=J(l);if(!m.length)continue;const c=String(l.id),d=String(l.name??"Plan"),g=!!((s==null?void 0:s.executionEnabled)??(l==null?void 0:l.executionEnabled)),j={maxConnectedAccounts:(r=l==null?void 0:l.limits)==null?void 0:r.maxConnectedAccounts,maxActiveStrategies:(n=l==null?void 0:l.limits)==null?void 0:n.maxActiveStrategies,maxDailyTrades:(i=l==null?void 0:l.limits)==null?void 0:i.maxDailyTrades,maxLotPerTrade:(x=l==null?void 0:l.limits)==null?void 0:x.maxLotPerTrade};for(const h of m)a[h].push({market:h,planId:c,planName:d,endDate:s!=null&&s.endDate?String(s.endDate):null,executionAllowed:g,limits:j})}return Object.keys(a).forEach(s=>{const l=new Set;a[s]=a[s].filter(m=>l.has(m.planId)?!1:(l.add(m.planId),!0))}),a}function Ne(t,a,r){const n=JSON.parse(JSON.stringify(t));return Object.keys(n).forEach(i=>{const x=a[i]||[];if(!x.length)return;const s=r[i];if(!s||s.mode!=="SPECIFIC"||!s.planId)return;const l=x.find(m=>m.planId===s.planId);l&&(n[i].executionAllowed=l.executionAllowed,n[i].maxConnectedAccounts=l.limits.maxConnectedAccounts,n[i].maxActiveStrategies=l.limits.maxActiveStrategies,n[i].maxDailyTrades=l.limits.maxDailyTrades,n[i].maxLotPerTrade=l.limits.maxLotPerTrade,n[i].earliestEndDate=l.endDate??n[i].earliestEndDate??null,n[i].plansCount=x.length,n[i].hasPlan=!0)}),n}function U(t,a){const[r,n]=f.useState(()=>{try{const i=localStorage.getItem(t);return i?JSON.parse(i):a}catch{return a}});return f.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(r))}catch{}},[t,r]),[r,n]}const ye="w-full",we="rounded-2xl border border-white/5 bg-slate-900/35 backdrop-blur p-5 md:p-6 shadow-[0_0_0_1px_rgba(255,255,255,0.02)]",w="rounded-2xl border border-white/5 bg-slate-950/30 backdrop-blur shadow-[0_0_0_1px_rgba(255,255,255,0.02)]",y="inline-flex items-center justify-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition",A="border-white/10 bg-white/5 text-slate-200 hover:bg-white/10",E="border-emerald-500/30 bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/20",Ce="border-rose-500/30 bg-rose-500/10 text-rose-200 hover:bg-rose-500/15",N="mt-1 w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 outline-none transition focus:border-emerald-400/60 focus:ring-1 focus:ring-emerald-400/40",Ae="text-xs font-semibold text-slate-300";function Pe({value:t,onChange:a}){const r=[{key:"TRADING",label:"Trading",icon:e.jsx(ie,{size:16})},{key:"RISK",label:"Risk",icon:e.jsx(re,{size:16})},{key:"STRATEGIES",label:"Strategies",icon:e.jsx(de,{size:16})},{key:"USAGE",label:"Plan Usage",icon:e.jsx(oe,{size:16})},{key:"ACCOUNT",label:"Account",icon:e.jsx(q,{size:16})}];return e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(n=>e.jsxs("button",{type:"button",onClick:()=>a(n.key),className:u("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",t===n.key?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"),children:[n.icon,n.label]},n.key))})}function k({tone:t,text:a}){const r=t==="emerald"?"text-emerald-200 bg-emerald-500/10 border-emerald-500/20":t==="amber"?"text-amber-200 bg-amber-500/10 border-amber-500/20":t==="rose"?"text-rose-200 bg-rose-500/10 border-rose-500/20":"text-slate-200 bg-white/5 border-white/10";return e.jsxs("span",{className:u("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs",r),children:[e.jsx(Z,{size:14}),a]})}function X({title:t,subtitle:a,icon:r,accent:n,info:i,locked:x,onOpen:s}){const l=x?{tone:"amber",text:"Locked"}:i.executionAllowed?{tone:"emerald",text:"Active • Execution Enabled"}:{tone:"slate",text:"Active • Execution Disabled"},m=n==="indigo"?"bg-indigo-500/15 border-indigo-400/20 text-indigo-200":n==="yellow"?"bg-yellow-500/15 border-yellow-400/20 text-yellow-200":n==="violet"?"bg-violet-500/15 border-violet-400/20 text-violet-200":"bg-emerald-500/15 border-emerald-400/20 text-emerald-200";return e.jsx("div",{className:u(w,"p-5"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:u("h-10 w-10 rounded-xl border flex items-center justify-center",m),children:r}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-base font-semibold text-slate-100",children:t}),e.jsx(k,{tone:l.tone,text:l.text})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:a}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-2",children:["Active plans: ",e.jsx("span",{className:"text-slate-200 font-semibold",children:i.plansCount}),i.earliestEndDate?e.jsxs(e.Fragment,{children:[" ","• valid until:"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:new Date(i.earliestEndDate).toLocaleString()})]}):null]})]})]}),e.jsx("button",{type:"button",onClick:s,className:u(y,x?A:E),children:x?e.jsxs(e.Fragment,{children:["Upgrade ",e.jsx(ce,{size:16})]}):e.jsxs(e.Fragment,{children:["Open ",e.jsx(Q,{size:16})]})})]})})}function Ie({open:t,title:a,onClose:r,children:n,footer:i}){return t?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:r}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-2xl border border-white/10 bg-slate-950/95 backdrop-blur shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 p-5 border-b border-white/10",children:[e.jsx("div",{className:"text-base font-semibold text-white",children:a}),e.jsx("button",{type:"button",onClick:r,className:u(y,A,"px-3 py-2"),children:e.jsx(ee,{size:16})})]}),e.jsx("div",{className:"p-5",children:n}),i?e.jsx("div",{className:"p-5 border-t border-white/10",children:i}):null]})})]}):null}function T({label:t,used:a,max:r}){const n=a!=null&&r!=null&&r>0?Math.min(100,Math.round(a/r*100)):null;return e.jsxs("div",{className:"rounded-xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:t}),e.jsxs("div",{className:"text-xs text-slate-300",children:[a??"—"," / ",r==null||r===0?"—":r]})]}),e.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-white/5 overflow-hidden",children:e.jsx("div",{className:"h-2 rounded-full bg-emerald-500/60",style:{width:`${n??0}%`}})}),e.jsx("div",{className:"mt-2 text-[11px] text-slate-500",children:n==null?"Usage counters not connected yet (showing plan limits).":`${n}% used`})]})}function Te({summary:t,plansByMarket:a,planPrefs:r,setPlanPrefs:n,locked:i,accounts:x}){const[s,l]=f.useState(null),m=c=>{i(c)||l(c)};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Trading Accounts"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Inline management only: choose plan-per-market + manage accounts in the same page."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(X,{title:"Forex",subtitle:"MT5 / cTrader accounts • execution + signals",icon:e.jsx(te,{size:18}),accent:"emerald",info:t.FOREX,locked:i("FOREX"),onOpen:()=>m("FOREX")}),e.jsx(X,{title:"Indian Market",subtitle:"Broker accounts • NSE/BSE execution",icon:e.jsx(be,{size:18}),accent:"indigo",info:t.INDIA,locked:i("INDIA"),onOpen:()=>m("INDIA")}),e.jsx(X,{title:"Crypto",subtitle:"Exchange API keys • spot/futures execution",icon:e.jsx(se,{size:18}),accent:"yellow",info:t.CRYPTO,locked:i("CRYPTO"),onOpen:()=>m("CRYPTO")}),e.jsx(X,{title:"Copy Trading",subtitle:"Master/Child mapping • copy rows",icon:e.jsx(ae,{size:18}),accent:"violet",info:t.COPY,locked:i("COPY"),onOpen:()=>m("COPY")})]}),e.jsx(Ie,{open:!!s,title:s?`${s} • Manage`:"Manage",onClose:()=>l(null),footer:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:u(y,A),onClick:()=>l(null),children:"Close"}),e.jsxs("button",{className:u(y,E),onClick:()=>{P.success("Saved (dummy)"),l(null)},children:[e.jsx(G,{size:16})," Save"]})]}),children:s?e.jsx(Ee,{market:s,summary:t[s],plans:a[s]??[],pref:r[s],onChangePref:c=>n({...r,[s]:c}),accounts:x.filter(c=>c.market===s)}):null})]})}function Ee({market:t,summary:a,plans:r,pref:n,onChangePref:i,accounts:x}){const s=(n==null?void 0:n.mode)??"AUTO_MAX",l=(n==null?void 0:n.planId)??null,m=f.useMemo(()=>s!=="SPECIFIC"||!l?null:r.find(d=>d.planId===l)??null,[s,l,r]),c=f.useMemo(()=>s==="SPECIFIC"&&m?{executionAllowed:m.executionAllowed,...m.limits}:{executionAllowed:a.executionAllowed,maxConnectedAccounts:a.maxConnectedAccounts,maxActiveStrategies:a.maxActiveStrategies,maxDailyTrades:a.maxDailyTrades,maxLotPerTrade:a.maxLotPerTrade},[s,m,a]);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Plan selection"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"If user has multiple plans, choose one for the engine to use."})]}),e.jsx(k,{tone:c.executionAllowed?"emerald":"slate",text:c.executionAllowed?"Exec ON":"Exec OFF"})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx("button",{className:u(y,s==="AUTO_MAX"?E:A),onClick:()=>i({mode:"AUTO_MAX",planId:null}),type:"button",children:"Auto (MAX across plans)"}),e.jsx("button",{className:u(y,s==="SPECIFIC"?E:A),onClick:()=>{var d;return i({mode:"SPECIFIC",planId:l??((d=r[0])==null?void 0:d.planId)??null})},type:"button",children:"Use specific plan"})]}),s==="SPECIFIC"?e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Select plan"}),e.jsx("select",{className:N,value:l??"",onChange:d=>i({mode:"SPECIFIC",planId:d.target.value}),children:r.map(d=>e.jsx("option",{value:d.planId,children:d.planName},d.planId))})]}):null]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Limits + usage"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Usage is dummy for now (accounts count is real)."}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(T,{label:"Connected Accounts",used:x.length,max:c.maxConnectedAccounts??null}),e.jsx(T,{label:"Max Active Strategies",used:null,max:c.maxActiveStrategies??null}),e.jsx(T,{label:"Max Daily Trades",used:null,max:c.maxDailyTrades??null}),e.jsx(T,{label:"Max Lot Per Trade",used:null,max:c.maxLotPerTrade??null})]})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Accounts"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Inline list (dummy actions)."})]}),e.jsxs("button",{className:u(y,A),onClick:()=>P.info("Open your add-account modal later"),type:"button",children:["Add account ",e.jsx(le,{size:16})]})]}),e.jsx("div",{className:"mt-3 grid gap-2",children:x.length===0?e.jsx("div",{className:"text-xs text-slate-500 rounded-xl border border-white/10 bg-white/5 p-4",children:"No accounts connected in this market."}):x.map(d=>e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:d.name}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Provider: ",d.provider," • Login: ",d.login??"—"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:u(y,A,"px-3 py-2"),type:"button",onClick:()=>P.info("Edit (dummy)"),children:"Edit"}),e.jsx("button",{className:u(y,Ce,"px-3 py-2"),type:"button",onClick:()=>P.info("Delete (dummy)"),children:"Delete"})]})]},d.id))})]})]})}function I({checked:t,onChange:a,label:r,hint:n,danger:i}){return e.jsxs("div",{className:u("flex items-start justify-between gap-4 rounded-xl border p-4",i?"border-rose-500/20 bg-rose-500/5":"border-white/5 bg-slate-950/25"),children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:u("text-sm font-semibold",i?"text-rose-100":"text-slate-100"),children:r}),n?e.jsx("div",{className:u("text-xs mt-1",i?"text-rose-200/70":"text-slate-400"),children:n}):null]}),e.jsx("button",{type:"button",onClick:()=>a(!t),className:u("relative inline-flex h-7 w-12 items-center rounded-full border transition",t?i?"bg-rose-500/30 border-rose-500/30":"bg-emerald-500/30 border-emerald-500/30":"bg-white/5 border-white/10"),children:e.jsx("span",{className:u("inline-block h-5 w-5 transform rounded-full bg-white transition",t?"translate-x-6":"translate-x-1")})})]})}function C({label:t,hint:a,children:r}){return e.jsxs("div",{children:[e.jsx("div",{className:Ae,children:t}),a?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:a}):null,r]})}function Se({risk:t,setRisk:a,summary:r}){const n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=s=>{const l={...t,globalGuards:{...t.globalGuards,...s}};s.dailyProfitTarget!=null&&(l.globalGuards.minGainPerDay=s.dailyProfitTarget),s.minGainPerDay!=null&&(l.globalGuards.dailyProfitTarget=s.minGainPerDay),a(l)},x=Object.keys(r).filter(s=>r[s].hasPlan);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Risk Management"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Built for retail behavior: pause trading, max loss/day, stop after profit target, sessions, cooldowns."})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Master pause"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"For users who want to stop trading completely for some time."})]}),e.jsx(k,{tone:t.masterPause?"amber":"emerald",text:t.masterPause?"Trading Paused":"Trading Active"})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(I,{checked:t.masterPause,onChange:s=>a({...t,masterPause:s}),label:t.masterPause?"Paused (no new trades)":"Active (execution allowed)",hint:"This overrides everything.",danger:t.masterPause}),e.jsxs("div",{className:"rounded-xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Pause until (optional)"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Auto-resume after this time."}),e.jsx("input",{className:N,type:"datetime-local",value:t.pauseUntil??"",onChange:s=>a({...t,pauseUntil:s.target.value||null})})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(C,{label:"Reason / Notes",children:e.jsx("input",{className:N,value:t.pauseReason??"",onChange:s=>a({...t,pauseReason:s.target.value}),placeholder:"e.g. traveling, drawdown, market uncertainty…"})}),e.jsx(C,{label:"Execution mode",hint:"Very common retail need: switch to signals-only without changing setups.",children:e.jsxs("select",{className:N,value:t.executionMode,onChange:s=>a({...t,executionMode:s.target.value}),children:[e.jsx("option",{value:"EXECUTION",children:"Execution (place orders)"}),e.jsx("option",{value:"SIGNALS_ONLY",children:"Signals only (no orders)"}),e.jsx("option",{value:"PAPER",children:"Paper (simulate)"})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Allowed markets"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Disable a market temporarily without touching others."}),e.jsx("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:Object.keys(t.allowedMarkets).map(s=>e.jsx(I,{checked:t.allowedMarkets[s],onChange:l=>a({...t,allowedMarkets:{...t.allowedMarkets,[s]:l}}),label:s,hint:r[s].hasPlan?"Market available":"No active plan in this market",danger:!t.allowedMarkets[s]},s))}),x.length===0?e.jsxs("div",{className:"mt-3 text-[11px] text-amber-200/80 flex items-start gap-2",children:[e.jsx(xe,{size:14,className:"mt-0.5"}),"No active plans found. Settings will save but trading won’t run until plans exist."]}):null]})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Daily guardrails"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Max loss per day + minimum gain per day (profit target). Perfect for “stop trading for the day”."}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(I,{checked:t.globalGuards.enabled,onChange:s=>i({enabled:s}),label:"Enable daily guardrails",hint:"Engine should monitor daily realized PnL."}),e.jsx(I,{checked:t.globalGuards.pauseTrading,onChange:s=>i({pauseTrading:s}),label:"When triggered: pause new trades",hint:"Recommended. Doesn’t touch existing positions."})]}),e.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[e.jsx(I,{checked:t.globalGuards.closePositions,onChange:s=>i({closePositions:s}),label:"When triggered: auto-close positions",hint:"High risk. Optional.",danger:t.globalGuards.closePositions}),e.jsx(I,{checked:t.globalGuards.notify,onChange:s=>i({notify:s}),label:"Send alert when triggered",hint:"Email/Telegram (configure below)."})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[e.jsx(C,{label:"Max loss per day",children:e.jsx("input",{className:N,type:"number",min:0,value:t.globalGuards.dailyMaxLoss??"",onChange:s=>i({dailyMaxLoss:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 2000"})}),e.jsx(C,{label:"Daily profit target",children:e.jsx("input",{className:N,type:"number",min:0,value:t.globalGuards.dailyProfitTarget??"",onChange:s=>i({dailyProfitTarget:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 1500"})}),e.jsx(C,{label:"Minimum gain per day (alias)",children:e.jsx("input",{className:N,type:"number",min:0,value:t.globalGuards.minGainPerDay??"",onChange:s=>i({minGainPerDay:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 1500"})})]})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Behavior controls"}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(C,{label:"Max trades per day",children:e.jsx("input",{className:N,type:"number",min:0,value:t.maxTradesPerDay??"",onChange:s=>a({...t,maxTradesPerDay:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 20"})}),e.jsx(C,{label:"Max open positions",children:e.jsx("input",{className:N,type:"number",min:0,value:t.maxOpenPositions??"",onChange:s=>a({...t,maxOpenPositions:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 6"})}),e.jsx(C,{label:"Cooldown after loss (mins)",children:e.jsx("input",{className:N,type:"number",min:0,value:t.cooldownAfterLossMins??"",onChange:s=>a({...t,cooldownAfterLossMins:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 10"})}),e.jsx(C,{label:"Max consecutive losses",children:e.jsx("input",{className:N,type:"number",min:0,value:t.maxConsecutiveLosses??"",onChange:s=>a({...t,maxConsecutiveLosses:s.target.value?Number(s.target.value):null}),placeholder:"e.g. 3"})})]})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Session restriction"}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(I,{checked:t.sessionEnabled,onChange:s=>a({...t,sessionEnabled:s}),label:"Enable session window",hint:"Only trade within selected days + times."}),e.jsxs("div",{className:"rounded-xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Days"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.map((s,l)=>{const m=t.sessionDays.includes(l);return e.jsx("button",{type:"button",onClick:()=>{const c=m?t.sessionDays.filter(d=>d!==l):[...t.sessionDays,l].sort((d,g)=>d-g);a({...t,sessionDays:c})},className:u("rounded-full border px-3 py-1.5 text-xs font-semibold transition",m?"bg-emerald-500/15 border-emerald-500/30 text-emerald-200":"bg-white/5 border-white/10 text-slate-300 hover:bg-white/10"),disabled:!t.sessionEnabled,children:s},s)})})]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(C,{label:"Session start",children:e.jsx("input",{className:N,type:"time",value:t.sessionStart??"",disabled:!t.sessionEnabled,onChange:s=>a({...t,sessionStart:s.target.value})})}),e.jsx(C,{label:"Session end",children:e.jsx("input",{className:N,type:"time",value:t.sessionEnd??"",disabled:!t.sessionEnabled,onChange:s=>a({...t,sessionEnd:s.target.value})})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:u(y,A),type:"button",onClick:()=>P.info("Reset (dummy)"),children:"Reset"}),e.jsxs("button",{className:u(y,E),type:"button",onClick:()=>P.success("Risk saved (dummy)"),children:[e.jsx(G,{size:16})," Save"]})]})]})}function De({summary:t,plansByMarket:a,planPrefs:r,setPlanPrefs:n,strategyDefs:i,selections:x,setSelections:s}){var z,$;const l=["FOREX","INDIA","CRYPTO","COPY"],m=l.filter(o=>t[o].hasPlan),[c,d]=f.useState(m[0]??"FOREX"),g=a[c]??[],j=r[c],h=j.mode==="SPECIFIC"&&j.planId?j.planId:null,b=f.useMemo(()=>h?g.find(o=>o.planId===h)??null:null,[g,h]),v=((z=b==null?void 0:b.limits)==null?void 0:z.maxActiveStrategies)??0,R=f.useMemo(()=>h?i.filter(o=>o.planId===h&&o.market===c):[],[i,h,c]),S=x[h??""]??[],p=S.length,D=(o,M)=>{s({...x,[o]:M})},Y=o=>{if(!h||!b)return;if(v<=0){P.error("Your plan does not allow strategies.");return}if(S.includes(o)){D(h,S.filter(_=>_!==o));return}if(v===1){D(h,[o]);return}if(p>=v){P.warning(`Max ${v} strategies allowed for this plan.`);return}D(h,[...S,o])},O=o=>{n({...r,[c]:{mode:"SPECIFIC",planId:o}})},F=!t[c].hasPlan;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Strategies"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Strategies are ",e.jsx("span",{className:"text-slate-200 font-semibold",children:"owned by your plan"}),". You can only enable/disable the strategies included in the selected plan. No adding/moving strategies."]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(o=>{const M=o===c,_=t[o].hasPlan;return e.jsx("button",{type:"button",onClick:()=>d(o),className:u("rounded-full border px-4 py-2 text-sm font-semibold transition",M?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500",!_&&"opacity-60"),children:o},o)})}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Plan context"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Strategy entitlement is per-plan, so this tab needs a specific plan (not Auto MAX)."})]}),F?e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-amber-200 border border-amber-500/20 bg-amber-500/10 rounded-full px-3 py-1.5",children:[e.jsx(ne,{size:14})," No active plan in this market"]}):b?e.jsx(k,{tone:b.executionAllowed?"emerald":"slate",text:`${b.planName} • max ${v||0} active`}):e.jsx(k,{tone:"amber",text:"Select a specific plan"})]}),!F&&e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[j.mode==="AUTO_MAX"?e.jsxs("div",{className:"rounded-xl border border-amber-500/20 bg-amber-500/10 p-4",children:[e.jsxs("div",{className:"text-sm font-semibold text-amber-100 flex items-center gap-2",children:[e.jsx(me,{size:16})," Auto MAX cannot be used here"]}),e.jsx("div",{className:"text-xs text-amber-200/80 mt-1",children:"Because strategies belong to a plan, choose which plan the engine should use for this market."}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-slate-200 font-semibold",children:"Pick plan"}),e.jsx("select",{className:N,defaultValue:(($=g[0])==null?void 0:$.planId)??"",onChange:o=>O(o.target.value),children:g.map(o=>e.jsx("option",{value:o.planId,children:o.planName},o.planId))})]})]}):e.jsxs("div",{className:"rounded-xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Selected plan"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"This plan controls which strategies you can enable."}),e.jsx("select",{className:N,value:h??"",onChange:o=>O(o.target.value),children:g.map(o=>e.jsx("option",{value:o.planId,children:o.planName},o.planId))}),e.jsxs("div",{className:"mt-2 text-[11px] text-slate-500",children:["Enabled: ",e.jsx("span",{className:"text-slate-200 font-semibold",children:p})," /"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:v||0}),v===1?" • only one can be active":""]})]}),e.jsxs("div",{className:"rounded-xl border border-white/5 bg-slate-950/25 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Rule"}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["You ",e.jsx("span",{className:"text-slate-200 font-semibold",children:"cannot add"})," strategies, and you"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:"cannot move"})," a strategy to another plan."]}),e.jsx("div",{className:"text-[11px] text-slate-500 mt-2",children:"Later: connect API to fetch plan strategies + save enabled IDs."})]})]})]}),e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:"Available strategies"}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Showing strategies for ",e.jsx("span",{className:"text-slate-200 font-semibold",children:c}),b?e.jsxs(e.Fragment,{children:[" ","• ",e.jsx("span",{className:"text-slate-200 font-semibold",children:b.planName})]}):null]})]}),e.jsxs("button",{type:"button",className:u(y,E),onClick:()=>P.success("Saved (dummy)"),disabled:!h||F,children:[e.jsx(G,{size:16})," Save"]})]}),e.jsx("div",{className:"mt-4 grid gap-3",children:F?e.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-xs text-slate-400",children:"No strategies because there is no active plan for this market."}):h?R.length===0?e.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-xs text-slate-400",children:"This plan has no strategies in this market (dummy data)."}):R.map(o=>{var H;const M=S.includes(o.id),_=v<=0||!M&&v>0&&p>=v&&v!==1;return e.jsxs("div",{className:u(_&&"opacity-70"),children:[e.jsx(I,{checked:M,onChange:()=>{if(_){P.warning(`Max ${v} strategies allowed for this plan.`);return}Y(o.id)},label:o.name,hint:`${o.description}${o.riskHint?` • ${o.riskHint}`:""}`}),(H=o.tags)!=null&&H.length?e.jsx("div",{className:"mt-2 flex flex-wrap gap-2 pl-1",children:o.tags.map(K=>e.jsx("span",{className:"text-[11px] rounded-full border border-white/10 bg-white/5 text-slate-300 px-2 py-1",children:K},K))}):null]},o.id)}):e.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-xs text-slate-400",children:"Select a plan to view strategies."})})]})]})}function Oe({summary:t,accountsCountByMarket:a,planPrefs:r,setPlanPrefs:n,plansByMarket:i}){const x=(s,l)=>{const m=t[s],c=r[s],d=i[s]||[],g=c.mode==="SPECIFIC"&&c.planId?d.find(h=>h.planId===c.planId):null,j=c.mode==="SPECIFIC"&&g?g.limits:{maxConnectedAccounts:m.maxConnectedAccounts,maxActiveStrategies:m.maxActiveStrategies,maxDailyTrades:m.maxDailyTrades,maxLotPerTrade:m.maxLotPerTrade};return e.jsxs("div",{className:u(w,"p-5"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-slate-100",children:l}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Pick which plan to use if multiple exist."})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{className:u(y,c.mode==="AUTO_MAX"?E:A),onClick:()=>n({...r,[s]:{mode:"AUTO_MAX",planId:null}}),type:"button",children:"Auto (MAX)"}),e.jsx("button",{className:u(y,c.mode==="SPECIFIC"?E:A),onClick:()=>{var h;return n({...r,[s]:{mode:"SPECIFIC",planId:c.planId??((h=d[0])==null?void 0:h.planId)??null}})},type:"button",children:"Specific"})]})]}),c.mode==="SPECIFIC"?e.jsxs("div",{className:"mt-3",children:[e.jsx("select",{className:N,value:c.planId??"",onChange:h=>n({...r,[s]:{mode:"SPECIFIC",planId:h.target.value}}),disabled:d.length<=1,children:d.map(h=>e.jsx("option",{value:h.planId,children:h.planName},h.planId))}),d.length<=1?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:"Only one plan available."}):null]}):null,e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(T,{label:"Connected Accounts",used:a[s]??0,max:j.maxConnectedAccounts??null}),e.jsx(T,{label:"Max Active Strategies",used:null,max:j.maxActiveStrategies??null}),e.jsx(T,{label:"Max Daily Trades",used:null,max:j.maxDailyTrades??null}),e.jsx(T,{label:"Max Lot Per Trade",used:null,max:j.maxLotPerTrade??null})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Plan Usage"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"All inline. No redirects. Dummy usage except accounts count."})]}),x("FOREX","Forex"),x("INDIA","Indian Market"),x("CRYPTO","Crypto"),x("COPY","Copy Trading"),e.jsx("div",{className:"text-[11px] text-slate-500",children:"Later: wire used counters from APIs (active strategies, daily trades, lot usage, etc)."})]})}function Me({subs:t,summary:a}){const r=f.useMemo(()=>t.filter(n=>!B(n.endDate)),[t]);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Inline subscription summary (dummy), market status."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:`${w} p-5`,children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Active subscriptions"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Non-expired subscriptions from dummy data."}),e.jsx("div",{className:"mt-4 grid gap-2",children:r.length===0?e.jsx("div",{className:"text-xs text-slate-500 rounded-xl border border-white/10 bg-white/5 p-4",children:"No active plans."}):r.map(n=>{const i=n.plan,x=n.endDate?new Date(n.endDate).toLocaleString():"—",s=!!(n.executionEnabled??i.executionEnabled);return e.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:i.name}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Category: ",i.category??"—"," • Valid until: ",x]})]}),e.jsx(k,{tone:s?"emerald":"slate",text:s?"Exec ON":"Exec OFF"})]})},n.id)})})]}),e.jsxs("div",{className:`${w} p-5`,children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:"Market status"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Computed from active plans."}),e.jsx("div",{className:"mt-4 grid gap-2",children:["FOREX","INDIA","CRYPTO","COPY"].map(n=>{const i=a[n];return e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:n}),e.jsxs("div",{className:"text-[11px] text-slate-500 mt-1",children:["Plans: ",i.plansCount," • Exec: ",i.executionAllowed?"Enabled":"Disabled"]})]}),e.jsx(k,{tone:i.hasPlan?i.executionAllowed?"emerald":"slate":"amber",text:i.hasPlan?i.executionAllowed?"Active":"Active • No Exec":"No Plan"})]},n)})})]})]})]})}function ke(){return{FOREX:{mode:"AUTO_MAX",planId:null},INDIA:{mode:"AUTO_MAX",planId:null},CRYPTO:{mode:"AUTO_MAX",planId:null},COPY:{mode:"AUTO_MAX",planId:null}}}function _e(){const t={enabled:!0,pauseTrading:!0,closePositions:!1,notify:!0,dailyMaxLoss:null,dailyProfitTarget:null,minGainPerDay:null};return{masterPause:!1,pauseUntil:null,pauseReason:"",executionMode:"EXECUTION",allowedMarkets:{FOREX:!0,INDIA:!0,CRYPTO:!0,COPY:!0},globalGuards:t,maxTradesPerDay:null,maxOpenPositions:null,maxLotPerTrade:null,maxDrawdownPct:null,cooldownAfterLossMins:null,maxConsecutiveLosses:null,pauseAfterConsecutiveLossesMins:null,sessionEnabled:!1,sessionDays:[1,2,3,4,5],sessionStart:"09:15",sessionEnd:"15:30",perMarketOverride:{FOREX:{enabled:!1,guards:{...t},maxLotPerTrade:null,maxTradesPerDay:null},INDIA:{enabled:!1,guards:{...t},maxLotPerTrade:null,maxTradesPerDay:null},CRYPTO:{enabled:!1,guards:{...t},maxLotPerTrade:null,maxTradesPerDay:null},COPY:{enabled:!1,guards:{...t},maxLotPerTrade:null,maxTradesPerDay:null}},alerts:{email:!0,telegram:!1,telegramBotToken:"",telegramChatId:""}}}function He(){const[t,a]=f.useState("TRADING"),[r,n]=f.useState(0),i=f.useMemo(()=>ge,[r]),x=f.useMemo(()=>pe,[r]),s=f.useMemo(()=>je(i),[i]),l=f.useMemo(()=>ve(i),[i]),[m,c]=U("settings.planPrefs.v1",ke()),[d,g]=U("settings.risk.v1",_e()),[j,h]=U("settings.strategySelections.v1",{}),b=f.useMemo(()=>Ne(s,l,m),[s,l,m]),v=f.useMemo(()=>{const p=["FOREX","INDIA","CRYPTO","COPY"],D=p.filter(O=>b[O].hasPlan),Y=p.some(O=>b[O].hasPlan&&b[O].executionAllowed);return d.masterPause?{tone:"amber",text:"Trading Paused (Master switch)"}:D.length===0?{tone:"amber",text:"No active plans found"}:Y?{tone:"emerald",text:`${D.length} Market(s) Active • Some Execution Enabled`}:{tone:"slate",text:`${D.length} Market(s) Active • Execution Disabled`}},[b,d.masterPause]),R=p=>!b[p].hasPlan,S=f.useMemo(()=>({FOREX:x.filter(p=>p.market==="FOREX").length,INDIA:x.filter(p=>p.market==="INDIA").length,CRYPTO:x.filter(p=>p.market==="CRYPTO").length,COPY:x.filter(p=>p.market==="COPY").length}),[x]);return e.jsxs("div",{className:ye,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-white",children:"Settings"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Dummy mode: all settings are local-only. Later you can wire APIs without changing the UI structure."})]}),e.jsxs("button",{type:"button",onClick:()=>n(p=>p+1),className:u(y,A,"rounded-full"),children:[e.jsx(ue,{size:16}),"Refresh"]})]}),e.jsx("div",{className:"mb-5",children:e.jsxs("span",{className:u("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs",v.tone==="emerald"?"text-emerald-200 bg-emerald-500/10 border-emerald-500/20":v.tone==="amber"?"text-amber-200 bg-amber-500/10 border-amber-500/20":"text-slate-200 bg-white/5 border-white/10"),children:[e.jsx(Z,{size:14}),v.text]})}),e.jsx("div",{className:"mb-6",children:e.jsx(Pe,{value:t,onChange:a})}),e.jsxs("div",{className:we,children:[t==="TRADING"&&e.jsx(Te,{summary:b,plansByMarket:l,planPrefs:m,setPlanPrefs:c,locked:R,accounts:x}),t==="RISK"&&e.jsx(Se,{risk:d,setRisk:g,summary:b}),t==="STRATEGIES"&&e.jsx(De,{summary:b,plansByMarket:l,planPrefs:m,setPlanPrefs:c,strategyDefs:fe,selections:j,setSelections:h}),t==="USAGE"&&e.jsx(Oe,{summary:b,accountsCountByMarket:S,planPrefs:m,setPlanPrefs:c,plansByMarket:l}),t==="ACCOUNT"&&e.jsx(Me,{subs:i,summary:b})]})]})}export{He as default};
