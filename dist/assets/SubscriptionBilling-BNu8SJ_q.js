import{c as N,h as S,r as m,d as A,f as H,j as e,m as h,A as O}from"./index-BVcK7YPk.js";import{S as P}from"./SubscriptionStepper-D4ucromt.js";import{I as M}from"./info-By9DLPlG.js";import{U as F}from"./user-CMouR2GJ.js";import{M as q}from"./map-pin-CZpm3BuN.js";import{C as z}from"./circle-check-big-CCRVr17j.js";import"./circle-check-C_59kWTX.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],U=N("banknote",D);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],T=N("landmark",E),I={panNumber:"",accountHolderName:"",accountNumber:"",ifscCode:"",bankName:"",branch:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:""},K=()=>{const g=S(),[a,u]=m.useState(I),[f,x]=m.useState({}),{data:d,isLoading:t}=A(),[j,{isLoading:p}]=H();m.useEffect(()=>{const s=d==null?void 0:d.data;s&&u({panNumber:(s.panNumber??"").toUpperCase(),accountHolderName:s.accountHolderName??"",accountNumber:s.accountNumber??"",ifscCode:(s.ifscCode??"").toUpperCase(),bankName:s.bankName??"",branch:s.branch??"",addressLine1:s.addressLine1??"",addressLine2:s.addressLine2??"",city:s.city??"",state:s.state??"",pincode:s.pincode??""})},[d]);const r=(s,n)=>{u(c=>({...c,[s]:n}))},l=s=>{x(n=>({...n,[s]:!0}))},i=m.useMemo(()=>{const s=a.panNumber.trim().toUpperCase(),n=a.ifscCode.trim().toUpperCase(),c=a.pincode.trim(),b=a.accountNumber.trim(),k=!s||/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(s),C=!!n&&/^[A-Z]{4}0[A-Z0-9]{6}$/.test(n),L=!!c&&/^[0-9]{6}$/.test(c),w=!!b&&/^[0-9]{6,20}$/.test(b),B=a.accountHolderName.trim()&&a.accountNumber.trim()&&a.ifscCode.trim()&&a.bankName.trim()&&a.addressLine1.trim()&&a.city.trim()&&a.state.trim()&&a.pincode.trim();return{panOk:k,ifscOk:C,pinOk:L,accOk:w,requiredOk:B}},[a]),v=i.requiredOk&&i.ifscOk&&i.pinOk&&i.accOk&&i.panOk,o=(s,n)=>!!f[s]&&!n,y=async s=>{if(s.preventDefault(),x({panNumber:!0,accountHolderName:!0,accountNumber:!0,ifscCode:!0,bankName:!0,branch:!0,addressLine1:!0,addressLine2:!0,city:!0,state:!0,pincode:!0}),!!v)try{await j({panNumber:a.panNumber.trim()?a.panNumber.trim().toUpperCase():null,accountHolderName:a.accountHolderName.trim(),accountNumber:a.accountNumber.trim(),ifscCode:a.ifscCode.trim().toUpperCase(),bankName:a.bankName.trim(),branch:a.branch.trim()||null,addressLine1:a.addressLine1.trim(),addressLine2:a.addressLine2.trim()||null,city:a.city.trim(),state:a.state.trim(),pincode:a.pincode.trim()}).unwrap(),g("/subscriptions/payment")}catch(n){console.error("Save billing failed:",n),alert("Failed to save billing details. Please try again.")}};return e.jsx("div",{className:"min-h-screen px-6 pt-16 md:pt-28 bg-slate-950 text-slate-100 p-6 flex justify-center",children:e.jsxs("div",{className:"max-w-5xl w-full space-y-8",children:[e.jsx(P,{currentStep:3}),e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-semibold flex items-center gap-3",children:[e.jsx(U,{size:32,className:"text-emerald-400"}),"Billing & Settlement Details"]}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm max-w-xl",children:"These details are used to generate invoices and transfer your profit-share amount at the end of each profitable month."})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3 text-xs text-slate-400 flex gap-3",children:[e.jsx(M,{size:16,className:"text-emerald-400 mt-0.5"}),e.jsx("p",{children:"Make sure PAN, bank account and IFSC are correct. Payouts will be processed to this account only."})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[2fr,1.1fr] gap-6",children:[e.jsxs(h.form,{onSubmit:y,initial:{opacity:0},animate:{opacity:1},className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(F,{size:20,className:"text-emerald-400"}),"PAN / Personal Details"]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"PAN Number"}),e.jsx("input",{maxLength:10,value:a.panNumber,onChange:s=>r("panNumber",s.target.value.toUpperCase()),onBlur:()=>l("panNumber"),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-emerald-400 outline-none",placeholder:"ABCDE1234F",disabled:t}),o("panNumber",i.panOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Enter a valid PAN (ABCDE1234F)"})]})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(T,{size:20,className:"text-emerald-400"}),"Bank Details"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Account Holder Name"}),e.jsx("input",{required:!0,value:a.accountHolderName,onChange:s=>r("accountHolderName",s.target.value),onBlur:()=>l("accountHolderName"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Account Number"}),e.jsx("input",{required:!0,value:a.accountNumber,onChange:s=>r("accountNumber",s.target.value),onBlur:()=>l("accountNumber"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t}),o("accountNumber",i.accOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Enter a valid account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"IFSC Code"}),e.jsx("input",{required:!0,maxLength:11,value:a.ifscCode,onChange:s=>r("ifscCode",s.target.value.toUpperCase()),onBlur:()=>l("ifscCode"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t}),o("ifscCode",i.ifscOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Enter a valid IFSC (e.g. HDFC0XXXXXX)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Bank Name"}),e.jsx("input",{required:!0,value:a.bankName,onChange:s=>r("bankName",s.target.value),onBlur:()=>l("bankName"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Branch"}),e.jsx("input",{value:a.branch,onChange:s=>r("branch",s.target.value),onBlur:()=>l("branch"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(q,{size:20,className:"text-emerald-400"}),"Address (for GST & invoices)"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Address Line 1"}),e.jsx("input",{required:!0,value:a.addressLine1,onChange:s=>r("addressLine1",s.target.value),onBlur:()=>l("addressLine1"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",placeholder:"Flat / House / Building",disabled:t})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Address Line 2"}),e.jsx("input",{value:a.addressLine2,onChange:s=>r("addressLine2",s.target.value),onBlur:()=>l("addressLine2"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",placeholder:"Road / Area / Locality",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"City"}),e.jsx("input",{required:!0,value:a.city,onChange:s=>r("city",s.target.value),onBlur:()=>l("city"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"State"}),e.jsx("input",{required:!0,value:a.state,onChange:s=>r("state",s.target.value),onBlur:()=>l("state"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Pincode"}),e.jsx("input",{required:!0,maxLength:6,value:a.pincode,onChange:s=>r("pincode",s.target.value),onBlur:()=>l("pincode"),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:t}),o("pincode",i.pinOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Pincode must be 6 digits"})]})]})]}),e.jsxs("button",{type:"submit",disabled:p||t,className:"w-full bg-emerald-500 text-slate-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-emerald-400 transition disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(z,{size:18}),p?"Saving...":"Save & Continue to Payment",e.jsx(O,{size:18})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Plan Summary"}),e.jsx("p",{className:"text-sm text-slate-300",children:e.jsx("span",{className:"font-semibold text-emerald-400",children:"Copy Trading â€“ Profit Sharing (20%)"})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"You will be charged 20% of net realized monthly profit. No fixed fee is charged in loss-making months."})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-5 text-xs text-slate-400",children:[e.jsx("p",{className:"font-semibold text-slate-300 mb-1",children:"Why we need this?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"To generate GST-compliant invoices."}),e.jsx("li",{children:"To process monthly payouts for your profit share."}),e.jsx("li",{children:"To comply with basic KYC norms."})]})]})]})]})]})})};export{K as default};
