import{c as $e,d as qe,r as n,o as Ue,j as e,X as Re,p as _e,f as Ge,h as Ye,m as j,Z as Qe,A as U,S as he}from"./index-1Vb8v_ID.js";import{S as We}from"./SubscriptionStepper-DrKZDucs.js";import{a as Ze,b as He,C as Ke}from"./profileSubscription.api-BYcq3YH7.js";import Je from"./SignIn-CKU-cyEO.js";import Ve from"./SignUp-B7-hy9kL.js";import{A as Xe}from"./arrow-left-CcCuhpea.js";import{T as es}from"./trending-up-BGQHwqc1.js";import{C as ss}from"./chart-column-CE_C4vc7.js";import{S as ts}from"./shield-Crr2Bk7j.js";import{F as as}from"./file-text-csh4Uo9R.js";import{T as be}from"./triangle-alert-BWWWnosM.js";import{C as R}from"./circle-check-big-CB-It9Wo.js";import{U as ge}from"./user-OzNaXl3Y.js";import{I as ls}from"./info-BSSZX_Wy.js";import{M as rs}from"./map-pin-DodWn8kc.js";import{I as J}from"./indian-rupee-pWKTLez-.js";import{C as ns}from"./clock-q7pNj9uF.js";import"./circle-check-BrG-dRtz.js";import"./index-tLq-Wpvf.js";import"./authReturn-CSMcxZ5E.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ds=$e("star",is),os=qe.injectEndpoints({endpoints:t=>({listActivePlans:t.query({query:l=>({url:"admin/plans/subscription-plan/all",method:"GET",params:l??void 0}),providesTags:["SubscriptionPlan"]}),getPlanById:t.query({query:l=>({url:`admin/plans/subscription-plan/${l}`,method:"GET"}),providesTags:(l,r,o)=>[{type:"SubscriptionPlan",id:o}]}),getMyCurrentSubscription:t.query({query:()=>({url:"/subscription/current",method:"GET"}),providesTags:["UserSubscription"]}),subscribeToPlan:t.mutation({query:l=>({url:"/subscription/subscribe",method:"POST",body:l}),invalidatesTags:["UserSubscription"]}),cancelMySubscription:t.mutation({query:l=>({url:"/subscription/cancel",method:"POST",body:l}),invalidatesTags:["UserSubscription"]})})}),{useListActivePlansQuery:cs}=os,ms=({open:t,onClose:l,defaultTab:r="login",onAuthed:o})=>{const[u,x]=n.useState(r);return n.useEffect(()=>x(r),[r,t]),n.useEffect(()=>{const N=G=>{G.key==="Escape"&&l()};return t&&window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,l]),t?Ue.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[999]",children:[e.jsx("button",{onClick:l,className:"absolute inset-0 bg-black/70","aria-label":"Close auth modal"}),e.jsxs("div",{className:"relative mx-auto mt-10 w-[95%] max-w-3xl rounded-3xl border border-slate-800 bg-slate-950 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x("login"),className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${u==="login"?"bg-emerald-500 text-slate-950":"bg-slate-900 text-slate-200 hover:bg-slate-800"}`,children:"Login"}),e.jsx("button",{onClick:()=>x("signup"),className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${u==="signup"?"bg-emerald-500 text-slate-950":"bg-slate-900 text-slate-200 hover:bg-slate-800"}`,children:"Register"})]}),e.jsx("button",{onClick:l,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-800 bg-slate-900 text-slate-200 hover:bg-slate-800",children:e.jsx(Re,{size:18})})]}),e.jsx("div",{className:"max-h-[80vh] overflow-auto",children:u==="login"?e.jsx(Je,{mode:"modal",onSwitchToSignup:()=>x("signup"),onAuthed:()=>{l(),o==null||o()}}):e.jsx(Ve,{mode:"modal",onSwitchToSignin:()=>x("login"),onAuthed:()=>{l(),o==null||o()}})})]})]}),document.body):null},_="subscription_flow_v2",xs="w-full bg-slate-950 border border-slate-700 px-3 py-2 rounded-lg text-slate-200 outline-none text-sm focus:border-emerald-500/60 focus:ring-2 focus:ring-emerald-500/10",fe=t=>`₹${Math.round(t/100).toLocaleString("en-IN")}`,ps=t=>t==="monthly"?"/ month":t==="yearly"?"/ year":"lifetime",us=t=>{var r;const l=(r=t.metadata)==null?void 0:r.tier;return l==="elite"?"MOST POPULAR":l==="pro"?"RECOMMENDED":t.interval==="lifetime"?"LIFETIME":null},hs=t=>{const l=t.featureFlags||{},r=[];return l.webhookAccess&&r.push("Automation signals"),l.tradeCopier&&r.push("Copy trading"),l.advancedRisk&&r.push("Advanced risk controls"),l.priorityExecution&&r.push("Priority processing"),l.vpsIncluded&&r.push("Dedicated VPS"),l.paperTrading&&r.push("Paper trading"),r.push(`${t.maxActiveStrategies} strategies`),r.push(`${t.maxConnectedAccounts} accounts`),t.maxDailyTrades!=null&&r.push(`${t.maxDailyTrades} daily trades`),t.maxLotPerTrade&&r.push(`Max lot: ${t.maxLotPerTrade}`),r.slice(0,6)},B=(t,l)=>{var x,N;const r={starter:1,basic:2,standard:3,pro:4,premium:5,elite:6,lifetime:7},o=String(((x=t.metadata)==null?void 0:x.tier)||""),u=String(((N=l.metadata)==null?void 0:N.tier)||"");return(r[o]||99)-(r[u]||99)},F=t=>{switch(t){case"forex":return"Forex Plans";case"india":return"India Market Plans";case"crypto":return"Crypto Market Plans";case"copy":return"Copy Trading Plans";case"bundle":return"Bundle Plans";default:return"—"}},bs=t=>{switch(t){case"forex":return"Automated forex trading with risk controls and performance tracking.";case"india":return"Plans designed for Indian market automation and account management.";case"crypto":return"Plans designed for crypto automation with faster execution and analytics.";case"copy":return"Follow a master and mirror trades with configurable risk settings.";case"bundle":return"All-in-one plans that combine multiple products and limits.";default:return""}},gs=()=>{try{const t=sessionStorage.getItem(_);if(!t)return{step:1};const l=JSON.parse(t);return{step:l.step??1,planId:l.planId,mode:l.mode,termsAccepted:l.termsAccepted,acceptedAt:l.acceptedAt,billingDone:l.billingDone}}catch{return{step:1}}},je=t=>{sessionStorage.setItem(_,JSON.stringify(t))},ye=t=>{if(t.step===5)return 5;const l=!!(t.planId&&t.mode),r=!!t.termsAccepted,o=!!t.billingDone;return l?r?o?4:3:2:1},fs=t=>{const l=ye(t);return t.step>l?l:t.step<1?1:t.step},Ne={panNumber:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:""},$s=()=>{var ue;const[t,l]=n.useState(()=>gs());n.useEffect(()=>{const s=fs(t);if(s!==t.step){const a={...t,step:s};l(a),je(a);return}je(t)},[t.step,t.planId,t.mode,t.termsAccepted,t.billingDone,t.acceptedAt]);const r=s=>{if(s<t.step){l(d=>({...d,step:s}));return}const a=ye(t);if(s<=a){l(d=>({...d,step:s}));return}l(d=>({...d,step:a}))},{data:o,isLoading:u,isFetching:x,isError:N,refetch:G}=_e(void 0,{refetchOnMountOrArgChange:!0}),S=(o==null?void 0:o.data)??o,V=Number((S==null?void 0:S.id)||((ue=S==null?void 0:S.user)==null?void 0:ue.id)||0),M=!!V,E=!(u||x),[ve,z]=n.useState(!1),[we,D]=n.useState(null),[m,C]=n.useState(t.mode??"forex"),[Y,X]=n.useState(""),{data:O,isLoading:Se,isFetching:Ce}=cs(void 0),A=n.useMemo(()=>{const s=O==null?void 0:O.data;return Array.isArray(s==null?void 0:s[0])?s[0]:Array.isArray(s)?s:[]},[O]),p=n.useMemo(()=>{const s=Y.trim().toLowerCase();return s?A.filter(a=>`${a.name} ${a.planCode} ${a.description||""}`.toLowerCase().includes(s)):A},[A,Y]),b=s=>s.featureFlags||{},ee=n.useMemo(()=>p.filter(s=>{var a;return!!((a=b(s))!=null&&a.bundle)}).sort(B),[p]),se=n.useMemo(()=>p.filter(s=>{var a;return!!((a=b(s))!=null&&a.tradeCopier)}).sort(B),[p]),te=n.useMemo(()=>p.filter(s=>{var a,d;return s.category==="FOREX"&&!((a=b(s))!=null&&a.bundle)&&!((d=b(s))!=null&&d.tradeCopier)}).sort(B),[p]),ae=n.useMemo(()=>p.filter(s=>{var a,d;return s.category==="INDIA"&&!((a=b(s))!=null&&a.bundle)&&!((d=b(s))!=null&&d.tradeCopier)}).sort(B),[p]),le=n.useMemo(()=>p.filter(s=>{var a,d;return s.category==="CRYPTO"&&!((a=b(s))!=null&&a.bundle)&&!((d=b(s))!=null&&d.tradeCopier)}).sort(B),[p]),{data:$,isLoading:y}=Ge(),[Ae,{isLoading:re}]=Ye(),[i,g]=n.useState(Ne),[Pe,f]=n.useState({});n.useEffect(()=>{const s=$==null?void 0:$.data;s&&g({panNumber:(s.panNumber??"").toUpperCase(),addressLine1:s.addressLine1??"",addressLine2:s.addressLine2??"",city:s.city??"",state:s.state??"",pincode:s.pincode??""})},[$]);const ne=Number(t.planId||0),{data:Q,isLoading:v}=Ze(ne,{skip:!ne}),c=Q==null?void 0:Q.data,[Ie]=He(),[ie,de]=n.useState(!1),[q,P]=n.useState(!!t.termsAccepted);n.useEffect(()=>{P(!!t.termsAccepted)},[t.termsAccepted]);const I=n.useMemo(()=>{const s=i.panNumber.trim().toUpperCase(),a=i.pincode.trim(),d=!s||/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(s),T=!!a&&/^[0-9]{6}$/.test(a),H=i.addressLine1.trim()&&i.city.trim()&&i.state.trim()&&i.pincode.trim();return{panOk:d,pinOk:T,requiredOk:H}},[i]),oe=I.requiredOk&&I.pinOk&&I.panOk,ce=18,k=Number((c==null?void 0:c.priceCents)||0),me=n.useMemo(()=>Math.round(k*ce/100),[k]),W=k+me,L=(s,a)=>{const d=t.planId===s.id&&t.mode===a,T=us(s),H=hs(s);return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},onClick:()=>{l(w=>({...w,planId:s.id,mode:a,termsAccepted:!1,acceptedAt:void 0,billingDone:!1,step:1})),P(!1)},className:`relative rounded-2xl border p-6 bg-slate-900/60 cursor-pointer select-none
          ${d?"ring-2 ring-emerald-400 ring-offset-2 ring-offset-slate-950 border-emerald-500":"border-slate-800 hover:border-slate-700"}`,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),l(K=>({...K,planId:s.id,mode:a,termsAccepted:!1,acceptedAt:void 0,billingDone:!1,step:1})),P(!1))},children:[T&&e.jsx("div",{className:"absolute -top-3 left-4 px-3 py-1 text-[10px] rounded-xl bg-emerald-500 text-slate-900 font-bold",children:T}),e.jsxs("h3",{className:"text-lg font-semibold mb-1 flex items-center gap-2",children:[T==="MOST POPULAR"&&e.jsx(ds,{className:"text-emerald-400",size:18}),s.name]}),e.jsx("p",{className:"text-slate-400 text-xs mb-4",children:s.description||"—"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[fe(s.priceCents),e.jsx("span",{className:"text-xs font-normal text-slate-400 ml-1",children:ps(s.interval)})]}),e.jsx("ul",{className:"mt-4 space-y-1.5 text-xs",children:H.map((w,K)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(R,{size:14,className:"text-emerald-400"}),e.jsx("span",{children:w})]},K))}),d&&e.jsx("div",{className:"mt-5",children:e.jsx("span",{className:"inline-flex rounded-full bg-emerald-500/15 text-emerald-400 px-3 py-1 border border-emerald-500/30 text-xs",children:"Selected"})})]},s.id)},ke=()=>{if(!(!t.planId||!t.mode)&&E){if(!M){D("CONTINUE_FROM_PLAN"),z(!0);return}r(2)}},Le=async()=>{z(!1);try{await G()}catch{}we==="CONTINUE_FROM_PLAN"&&(D(null),t.planId&&t.mode&&r(2))},Te=()=>{q&&l(s=>({...s,termsAccepted:!0,acceptedAt:new Date().toISOString(),step:3}))},Be=async s=>{if(s.preventDefault(),f({panNumber:!0,addressLine1:!0,addressLine2:!0,city:!0,state:!0,pincode:!0}),!!oe)try{await Ae({panNumber:i.panNumber.trim()?i.panNumber.trim().toUpperCase():null,addressLine1:i.addressLine1.trim(),addressLine2:i.addressLine2.trim()||null,city:i.city.trim(),state:i.state.trim(),pincode:i.pincode.trim()}).unwrap(),l(a=>({...a,billingDone:!0,step:4}))}catch(a){console.error("Save billing failed:",a),alert("Failed to save billing details. Please try again.")}},Fe=async()=>{var s;if(t.planId){if(!M){r(1);return}try{de(!0),await Ie({planId:t.planId,trialDays:void 0}).unwrap(),l(a=>({...a,step:5}))}catch(a){console.error("Activation failed:",a),alert(((s=a==null?void 0:a.data)==null?void 0:s.message)||"Failed to activate subscription. Please try again.")}finally{de(!1)}}},xe=()=>{sessionStorage.removeItem(_),l({step:1}),C("forex"),X(""),P(!1),f({}),g(Ne),D(null),z(!1)},h=t.step,Me=h===1,Ee=h===2,ze=h===3,De=h===4,Oe=h===5,Z=Se||Ce,pe=(s,a)=>!!Pe[s]&&!a;return e.jsxs(e.Fragment,{children:[e.jsx(ms,{open:ve,onClose:()=>{z(!1),D(null)},onAuthed:Le,defaultTab:"login"}),e.jsx("div",{className:"min-h-screen px-6 pt-16 md:pt-28 bg-slate-950 text-slate-100 pb-28",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs(j.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-semibold tracking-tight",children:["Subscription ",e.jsx("span",{className:"text-emerald-400",children:"Setup"})]}),e.jsx("p",{className:"text-slate-400 mt-2 max-w-2xl mx-auto text-sm md:text-base",children:"Choose plan → accept terms → billing → payment → done."}),!u&&N&&e.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:'Auth check failed (/me). If you are logged in, ensure baseApi uses credentials: "include".'})]}),e.jsx("div",{className:"max-w-3xl mx-auto mb-8",children:e.jsx(We,{currentStep:h})}),h>1&&h<5&&e.jsx("div",{className:"max-w-5xl mx-auto mb-6",children:e.jsxs("button",{onClick:()=>r(h-1),className:"inline-flex items-center gap-2 text-sm text-slate-300 hover:text-white",children:[e.jsx(Xe,{size:16}),"Back"]})}),Me&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-3xl mx-auto mb-10 bg-slate-900/70 border border-slate-800 rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase mb-2",children:"Step 1 · Select your plan"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>C("forex"),className:`px-4 py-2 rounded-full text-xs font-medium border transition ${m==="forex"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Forex"}),e.jsx("button",{onClick:()=>C("india"),className:`px-4 py-2 rounded-full text-xs font-medium border transition ${m==="india"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"India"}),e.jsx("button",{onClick:()=>C("crypto"),className:`px-4 py-2 rounded-full text-xs font-medium border transition ${m==="crypto"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Crypto"}),e.jsx("button",{onClick:()=>C("copy"),className:`px-4 py-2 rounded-full text-xs font-medium border transition ${m==="copy"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Copy Trading"}),e.jsx("button",{onClick:()=>C("bundle"),className:`px-4 py-2 rounded-full text-xs font-medium border transition ${m==="bundle"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Bundle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Search plans"}),e.jsx("input",{value:Y,onChange:s=>X(s.target.value),className:xs,placeholder:"Search by name / planCode"})]}),e.jsxs("div",{className:"text-[11px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:Z?"Loading plans…":`Active plans: ${A.length}`}),!Z&&A.length===0&&e.jsx("span",{className:"text-red-400",children:"No active plans found"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-10 mb-10 opacity-80",children:[e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(es,{size:32}),e.jsx("span",{className:"mt-1",children:"Performance"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(Qe,{size:32}),e.jsx("span",{className:"mt-1",children:"Fast Execution"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(ss,{size:32}),e.jsx("span",{className:"mt-1",children:"Analytics"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(ts,{size:32}),e.jsx("span",{className:"mt-1",children:"Risk Controls"})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:F(m)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:bs(m)})]}),Z?e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[...Array(6)].map((s,a)=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 p-6 bg-slate-900/60 animate-pulse",children:[e.jsx("div",{className:"h-5 w-40 bg-slate-800 rounded"}),e.jsx("div",{className:"h-3 w-56 bg-slate-800 rounded mt-3"}),e.jsx("div",{className:"h-10 w-32 bg-slate-800 rounded mt-5"}),e.jsx("div",{className:"h-10 w-full bg-slate-800 rounded-xl mt-6"})]},a))}):e.jsxs(e.Fragment,{children:[m==="forex"&&(te.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No Forex plans found."}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:te.map(s=>L(s,"forex"))})),m==="india"&&(ae.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No India plans found."}):e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:ae.map(s=>L(s,"india"))})),m==="crypto"&&(le.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No Crypto plans found."}):e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:le.map(s=>L(s,"crypto"))})),m==="copy"&&(se.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No Copy Trading plans found."}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:se.map(s=>L(s,"copy"))})),m==="bundle"&&(ee.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No Bundle plans found."}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:ee.map(s=>L(s,"bundle"))}))]}),e.jsx("div",{className:"fixed inset-x-0 bottom-0 border-t border-slate-800 bg-slate-950/90 backdrop-blur",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-6 py-4 flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-xs text-slate-400",children:t.planId?e.jsxs("span",{children:["Selected plan ID:"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:t.planId})," ","• Next: Agreement → Billing → Payment"]}):e.jsx("span",{children:"Select any plan to continue"})}),e.jsxs("button",{disabled:!t.planId||!E,onClick:ke,className:`inline-flex items-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold transition ${t.planId&&E?"bg-emerald-500 text-slate-950 hover:bg-emerald-400":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,title:E?void 0:"Checking login status...",children:["Continue ",e.jsx(U,{size:18})]})]})})]}),Ee&&e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-3xl font-semibold flex justify-center gap-3",children:[e.jsx(he,{className:"text-emerald-400",size:32}),"Terms & Agreement"]}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm",children:"Please review and accept the terms before proceeding."}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-2",children:["Plan ID:"," ",e.jsx("span",{className:"text-slate-300 font-semibold",children:t.planId})," ","• Category:"," ",e.jsx("span",{className:"text-slate-300 font-semibold",children:F(t.mode)})]})]}),e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-8 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(as,{className:"text-emerald-400",size:26}),e.jsx("h3",{className:"text-xl font-semibold",children:"Legal Agreement"})]}),e.jsxs("div",{className:"space-y-5 text-sm leading-relaxed text-slate-300 h-[320px] overflow-y-auto pr-2",children:[e.jsx("p",{children:"By enabling automated execution, you acknowledge that:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-3 text-slate-400",children:[e.jsx("li",{children:"Orders may be automatically executed based on strategy signals."}),e.jsx("li",{children:"Past performance does not guarantee future returns."}),e.jsx("li",{children:"You authorize the platform to place/modify/close orders on your behalf."}),e.jsx("li",{children:"Profit-sharing / fees (if applicable) apply as per the plan terms."}),e.jsx("li",{children:"You remain responsible for deposits, withdrawals, and any manual trades."}),e.jsx("li",{children:"No guaranteed returns or assured profit is provided."}),e.jsx("li",{children:"Execution may be paused during volatility / connectivity / risk events."})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-500/10 border border-yellow-600/30 rounded-xl",children:[e.jsx(be,{className:"text-yellow-400 mt-1",size:20}),e.jsx("p",{className:"text-yellow-300 text-xs",children:"Trading is risky. Only trade with money you can afford to lose. This is not investment advice."})]}),e.jsx("p",{className:"text-slate-400 text-xs mt-2",children:"By proceeding, you confirm that you have read and agreed to the terms."})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:s=>P(s.target.checked),className:"h-5 w-5 rounded border border-slate-700 bg-slate-800 accent-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-300",children:"I have read and accept all the terms & conditions."})]}),e.jsxs("button",{disabled:!q,onClick:Te,className:`mt-6 w-full py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition
                    ${q?"bg-emerald-500 text-slate-900 hover:bg-emerald-400":"bg-slate-800 text-slate-500 cursor-not-allowed"}
                  `,children:[e.jsx(R,{size:18}),"Accept & Continue",e.jsx(U,{size:18})]})]})]}),ze&&e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-semibold flex items-center gap-3",children:[e.jsx(ge,{size:32,className:"text-emerald-400"}),"Billing Details (Invoice)"]}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm max-w-xl",children:"We use these details only for invoices / basic KYC. Bank details are not required."})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3 text-xs text-slate-400 flex gap-3",children:[e.jsx(ls,{size:16,className:"text-emerald-400 mt-0.5"}),e.jsx("p",{children:"Provide correct address & PAN (PAN optional) for GST invoices."})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[2fr,1.1fr] gap-6",children:[e.jsxs(j.form,{onSubmit:Be,initial:{opacity:0},animate:{opacity:1},className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ge,{size:20,className:"text-emerald-400"}),"PAN (Optional)"]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"PAN Number"}),e.jsx("input",{maxLength:10,value:i.panNumber,onChange:s=>g(a=>({...a,panNumber:s.target.value.toUpperCase()})),onBlur:()=>f(s=>({...s,panNumber:!0})),className:"mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-emerald-400 outline-none",placeholder:"ABCDE1234F",disabled:y}),pe("panNumber",I.panOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Enter a valid PAN (ABCDE1234F)"})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[e.jsx(rs,{size:20,className:"text-emerald-400"}),"Address (for GST invoices)"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Address Line 1"}),e.jsx("input",{required:!0,value:i.addressLine1,onChange:s=>g(a=>({...a,addressLine1:s.target.value})),onBlur:()=>f(s=>({...s,addressLine1:!0})),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",placeholder:"Flat / House / Building",disabled:y})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Address Line 2"}),e.jsx("input",{value:i.addressLine2,onChange:s=>g(a=>({...a,addressLine2:s.target.value})),onBlur:()=>f(s=>({...s,addressLine2:!0})),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",placeholder:"Road / Area / Locality",disabled:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"City"}),e.jsx("input",{required:!0,value:i.city,onChange:s=>g(a=>({...a,city:s.target.value})),onBlur:()=>f(s=>({...s,city:!0})),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"State"}),e.jsx("input",{required:!0,value:i.state,onChange:s=>g(a=>({...a,state:s.target.value})),onBlur:()=>f(s=>({...s,state:!0})),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Pincode"}),e.jsx("input",{required:!0,maxLength:6,value:i.pincode,onChange:s=>g(a=>({...a,pincode:s.target.value})),onBlur:()=>f(s=>({...s,pincode:!0})),className:"mt-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm w-full focus:border-emerald-400 outline-none",disabled:y}),pe("pincode",I.pinOk)&&e.jsx("p",{className:"text-xs text-red-300 mt-1",children:"Pincode must be 6 digits"})]})]})]}),e.jsxs("button",{type:"submit",disabled:re||y||!oe,className:"w-full bg-emerald-500 text-slate-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-emerald-400 transition disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(R,{size:18}),re?"Saving...":"Save & Continue to Payment",e.jsx(U,{size:18})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Why we need this?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-400",children:[e.jsx("li",{children:"To generate GST-compliant invoices."}),e.jsx("li",{children:"Basic identity verification (PAN optional)."})]})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Selected Plan"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Plan ID:"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:t.planId??"—"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Category:"," ",e.jsx("span",{className:"text-slate-200 font-semibold",children:F(t.mode)})]})]})]})]})]}),De&&e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsxs("h2",{className:"text-3xl font-semibold flex items-center gap-3",children:[e.jsx(Ke,{size:32,className:"text-emerald-400"}),"Confirm & Activate Subscription"]}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm",children:"Review your plan summary and proceed."})]}),!M&&!u&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-200 flex gap-3",children:[e.jsx(be,{className:"mt-0.5",size:18}),e.jsx("div",{children:"You are not logged in. Please login and continue."})]}),e.jsxs(j.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase mb-1",children:"Plan"}),e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:v?"Loading...":(c==null?void 0:c.name)||"Selected Plan"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:v?"—":(c==null?void 0:c.description)||"—"}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-2",children:["Category:"," ",e.jsx("span",{className:"text-slate-300 font-semibold",children:F(t.mode)})," ","• Plan ID:"," ",e.jsx("span",{className:"text-slate-300 font-semibold",children:t.planId})," ","• User ID:"," ",e.jsx("span",{className:"text-slate-300 font-semibold",children:V||"—"})]})]}),e.jsxs("div",{className:"flex flex-col items-end text-right",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase mb-1",children:"Price"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:v?"—":fe(k)}),e.jsx("p",{className:"text-[11px] text-slate-500",children:(c==null?void 0:c.interval)==="monthly"?"per month":(c==null?void 0:c.interval)==="yearly"?"per year":"lifetime"})]})]}),e.jsxs("div",{className:"border-t border-slate-800 pt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase mb-3",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Plan price"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{size:14}),v?"—":Math.round(k/100).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between text-slate-400 text-xs",children:[e.jsxs("span",{children:["GST @ ",ce,"%"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{size:12}),v?"—":Math.round(me/100).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-slate-800",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total payable now"}),e.jsxs("span",{className:"flex items-center gap-1 text-lg font-semibold text-emerald-400",children:[e.jsx(J,{size:18}),v?"—":Math.round(W/100).toLocaleString("en-IN")]})]}),W===0&&e.jsx("p",{className:"text-[11px] text-slate-500 mt-1",children:"No upfront fee for this plan currently."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 text-xs text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:16,className:"text-emerald-400"}),e.jsx("span",{children:"Secure checkout will be integrated here."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{size:14,className:"text-slate-500"}),e.jsx("span",{children:"Activation happens after confirmation."})]})]}),e.jsxs("button",{disabled:v||ie||!M,onClick:Fe,className:"w-full mt-2 bg-emerald-500 text-slate-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-emerald-400 transition disabled:opacity-60 disabled:cursor-not-allowed",children:[ie?"Activating...":W===0?"Activate Subscription":"Pay & Activate",e.jsx(U,{size:18})]})]})]}),Oe&&e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-14 h-14 rounded-2xl bg-emerald-500/15 border border-emerald-500/25 flex items-center justify-center",children:e.jsx(R,{className:"text-emerald-400",size:28})}),e.jsx("h2",{className:"text-2xl font-semibold mt-4",children:"Subscription Activated"}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm",children:"You can now start using your subscription features."}),e.jsxs("div",{className:"mt-6 grid sm:grid-cols-2 gap-4 text-left",children:[e.jsxs("div",{className:"bg-slate-950/40 border border-slate-800 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Plan ID"}),e.jsx("p",{className:"text-sm text-slate-100 font-semibold",children:t.planId??"—"})]}),e.jsxs("div",{className:"bg-slate-950/40 border border-slate-800 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Category"}),e.jsx("p",{className:"text-sm text-slate-100 font-semibold",children:F(t.mode)})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>xe(),className:"px-5 py-3 rounded-xl bg-slate-800 text-slate-200 hover:bg-slate-700 transition",children:"Start New Subscription"}),e.jsx("button",{onClick:()=>{sessionStorage.removeItem(_),window.location.href="/dashboard"},className:"px-5 py-3 rounded-xl bg-emerald-500 text-slate-950 hover:bg-emerald-400 transition",children:"Go to Dashboard"})]}),e.jsx("button",{onClick:xe,className:"mt-4 text-xs text-slate-500 hover:text-slate-300",children:"Reset wizard state"})]})})]})})]})};export{$s as default};
