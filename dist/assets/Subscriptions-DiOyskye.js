import{c as T,l as q,r as i,n as z,j as e,X as B,o as R,m as k,Z as D,A as F}from"./index-BVcK7YPk.js";import{S as _}from"./SubscriptionStepper-D4ucromt.js";import U from"./SignIn-zyN4Gq-q.js";import G from"./SignUp-tkQLGYKe.js";import{T as V}from"./trending-up-DGYnBjQ6.js";import{C as H}from"./chart-column-3XKQO0fv.js";import{S as Q}from"./shield-6Pv4aWoR.js";import{C as W}from"./circle-check-big-CCRVr17j.js";import"./circle-check-C_59kWTX.js";import"./index-CH5qKfYZ.js";import"./authReturn-CEDtvqDa.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],K=T("brain",Z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],J=T("star",X),Y=q.injectEndpoints({endpoints:a=>({listActivePlans:a.query({query:l=>({url:"admin/plans/subscription-plan/all",method:"GET",params:l??void 0}),providesTags:["SubscriptionPlan"]}),getPlanById:a.query({query:l=>({url:`admin/plans/subscription-plan/${l}`,method:"GET"}),providesTags:(l,s,r)=>[{type:"SubscriptionPlan",id:r}]}),getMyCurrentSubscription:a.query({query:()=>({url:"/subscription/current",method:"GET"}),providesTags:["UserSubscription"]}),subscribeToPlan:a.mutation({query:l=>({url:"/subscription/subscribe",method:"POST",body:l}),invalidatesTags:["UserSubscription"]}),cancelMySubscription:a.mutation({query:l=>({url:"/subscription/cancel",method:"POST",body:l}),invalidatesTags:["UserSubscription"]})})}),{useListActivePlansQuery:ee}=Y,se=({open:a,onClose:l,defaultTab:s="login",onAuthed:r})=>{const[d,o]=i.useState(s);return i.useEffect(()=>o(s),[s,a]),i.useEffect(()=>{const c=b=>{b.key==="Escape"&&l()};return a&&window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[a,l]),a?z.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[999]",children:[e.jsx("button",{onClick:l,className:"absolute inset-0 bg-black/70","aria-label":"Close auth modal"}),e.jsxs("div",{className:"relative mx-auto mt-10 w-[95%] max-w-3xl rounded-3xl border border-slate-800 bg-slate-950 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o("login"),className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${d==="login"?"bg-emerald-500 text-slate-950":"bg-slate-900 text-slate-200 hover:bg-slate-800"}`,children:"Login"}),e.jsx("button",{onClick:()=>o("signup"),className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${d==="signup"?"bg-emerald-500 text-slate-950":"bg-slate-900 text-slate-200 hover:bg-slate-800"}`,children:"Register"})]}),e.jsx("button",{onClick:l,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-800 bg-slate-900 text-slate-200 hover:bg-slate-800",children:e.jsx(B,{size:18})})]}),e.jsx("div",{className:"max-h-[80vh] overflow-auto",children:d==="login"?e.jsx(U,{mode:"modal",onSwitchToSignup:()=>o("signup"),onAuthed:()=>{l(),r==null||r()}}):e.jsx(G,{mode:"modal",onSwitchToSignin:()=>o("login"),onAuthed:()=>{l(),r==null||r()}})})]})]}),document.body):null},te="w-full bg-slate-950 border border-slate-700 px-3 py-2 rounded-lg text-slate-200 outline-none text-sm focus:border-emerald-500/60 focus:ring-2 focus:ring-emerald-500/10",ae=a=>`₹${Math.round(a/100).toLocaleString("en-IN")}`,le=a=>a==="monthly"?"/ month":a==="yearly"?"/ year":"lifetime",re=a=>{var s;const l=(s=a.metadata)==null?void 0:s.tier;return l==="elite"?"MOST POPULAR":l==="pro"?"RECOMMENDED":a.interval==="lifetime"?"LIFETIME":null},ne=a=>{const l=a.featureFlags||{},s=[];return l.webhookAccess&&s.push("Webhook access"),l.tradeCopier&&s.push("Trade copier"),l.advancedRisk&&s.push("Advanced risk controls"),l.priorityExecution&&s.push("Priority execution"),l.vpsIncluded&&s.push("VPS included"),l.paperTrading&&s.push("Paper trading"),s.push(`${a.maxActiveStrategies} strategies`),s.push(`${a.maxConnectedAccounts} accounts`),a.maxDailyTrades!=null&&s.push(`${a.maxDailyTrades} daily trades`),a.maxLotPerTrade&&s.push(`Max lot: ${a.maxLotPerTrade}`),s.slice(0,6)},C=(a,l)=>{var o,c;const s={starter:1,basic:1,standard:2,pro:3,premium:4,elite:5,lifetime:6},r=String(((o=a.metadata)==null?void 0:o.tier)||""),d=String(((c=l.metadata)==null?void 0:c.tier)||"");return(s[r]||99)-(s[d]||99)},fe=()=>{var P;const[a,l]=i.useState("copy"),[s,r]=i.useState(null),[d,o]=i.useState(""),{data:c}=R(void 0,{refetchOnMountOrArgChange:!0}),b=!!((P=c==null?void 0:c.data)!=null&&P.id),[M,j]=i.useState(!1),{data:u,isLoading:A,isFetching:E}=ee(void 0),x=i.useMemo(()=>{const t=u==null?void 0:u.data;return Array.isArray(t==null?void 0:t[0])?t[0]:Array.isArray(t)?t:[]},[u]),p=A||E,h=i.useMemo(()=>{const t=d.trim().toLowerCase();return t?x.filter(n=>`${n.name} ${n.planCode} ${n.description||""}`.toLowerCase().includes(t)):x},[x,d]),y=i.useMemo(()=>h.filter(t=>t.executionFlow==="API").sort(C),[h]),N=i.useMemo(()=>h.filter(t=>t.executionFlow==="PINE_CONNECTOR").sort(C),[h]),v=t=>{const n=new URLSearchParams;n.set("mode",t.type),n.set("planId",String(t.planId)),window.location.href=`/subscriptions/terms?${n.toString()}`},S=t=>{r(t)},I=()=>{if(s){if(b){v(s);return}j(!0)}},L=()=>{s&&v(s)},w=(t,n)=>{const g=(s==null?void 0:s.type)===n&&(s==null?void 0:s.planId)===t.id,f=re(t),$=ne(t);return e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},onClick:()=>S({type:n,planId:t.id}),className:`relative rounded-2xl border p-6 bg-slate-900/60 cursor-pointer select-none
          ${g?"ring-2 ring-emerald-400 ring-offset-2 ring-offset-slate-950 border-emerald-500":"border-slate-800 hover:border-slate-700"}`,role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),S({type:n,planId:t.id}))},children:[f&&e.jsx("div",{className:"absolute -top-3 left-4 px-3 py-1 text-[10px] rounded-xl bg-emerald-500 text-slate-900 font-bold",children:f}),e.jsxs("h3",{className:"text-lg font-semibold mb-1 flex items-center gap-2",children:[f==="MOST POPULAR"&&e.jsx(J,{className:"text-emerald-400",size:18}),t.name]}),e.jsx("p",{className:"text-slate-400 text-xs mb-4",children:t.description||"—"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[ae(t.priceCents),e.jsx("span",{className:"text-xs font-normal text-slate-400 ml-1",children:le(t.interval)})]}),e.jsx("ul",{className:"mt-4 space-y-1.5 text-xs",children:$.map((m,O)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(W,{size:14,className:"text-emerald-400"}),e.jsx("span",{children:m})]},O))}),g&&e.jsx("div",{className:"mt-5",children:e.jsx("span",{className:"inline-flex rounded-full bg-emerald-500/15 text-emerald-400 px-3 py-1 border border-emerald-500/30 text-xs",children:"Selected"})})]},t.id)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{open:M,onClose:()=>j(!1),onAuthed:L,defaultTab:"login"}),e.jsxs("div",{className:"min-h-screen px-6 pt-16 md:pt-28 bg-slate-950 text-slate-100 pb-28",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs(k.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-semibold tracking-tight",children:["Choose your ",e.jsx("span",{className:"text-emerald-400",children:"subscription"})]}),e.jsx("p",{className:"text-slate-400 mt-2 max-w-2xl mx-auto text-sm md:text-base",children:"Select your plan → accept terms → billing → payment."})]}),e.jsx("div",{className:"max-w-3xl mx-auto mb-8",children:e.jsx(_,{currentStep:1})}),e.jsxs("div",{className:"max-w-3xl mx-auto mb-10 bg-slate-900/70 border border-slate-800 rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase mb-2",children:"Step 1 · Select your product"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{l("strategies"),r(null)},className:`px-4 py-2 rounded-full text-xs font-medium border transition ${a==="strategies"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"API Plans"}),e.jsx("button",{onClick:()=>{l("copy"),r(null)},className:`px-4 py-2 rounded-full text-xs font-medium border transition ${a==="copy"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Pine Connector"}),e.jsx("button",{onClick:()=>{l("both"),r(null)},className:`px-4 py-2 rounded-full text-xs font-medium border transition ${a==="both"?"bg-emerald-500 text-slate-900 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:"Bundle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Search plans"}),e.jsx("input",{value:d,onChange:t=>o(t.target.value),className:te,placeholder:"Search by name / planCode"})]}),e.jsxs("div",{className:"text-[11px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:p?"Loading plans…":`Active plans: ${x.length}`}),!p&&x.length===0&&e.jsx("span",{className:"text-red-400",children:"No active plans found"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-10 mb-10 opacity-80",children:[e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(V,{size:32}),e.jsx("span",{className:"mt-1",children:"Smart Execution"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(D,{size:32}),e.jsx("span",{className:"mt-1",children:"Fast Signals"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(H,{size:32}),e.jsx("span",{className:"mt-1",children:"Live Analytics"})]}),e.jsxs("div",{className:"flex flex-col items-center text-slate-400 text-xs",children:[e.jsx(Q,{size:32}),e.jsx("span",{className:"mt-1",children:"Risk Protection"})]})]}),a==="strategies"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"API Plans – India/Crypto broker API execution"})}),p?e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[...Array(6)].map((t,n)=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 p-6 bg-slate-900/60 animate-pulse",children:[e.jsx("div",{className:"h-5 w-40 bg-slate-800 rounded"}),e.jsx("div",{className:"h-3 w-56 bg-slate-800 rounded mt-3"}),e.jsx("div",{className:"h-10 w-32 bg-slate-800 rounded mt-5"}),e.jsx("div",{className:"h-10 w-full bg-slate-800 rounded-xl mt-6"})]},n))}):y.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No API plans found."}):e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:y.map(t=>w(t,"strategies"))})]}),a==="copy"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"Pine Connector – TradingView webhook → MT4/MT5"})}),p?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[...Array(2)].map((t,n)=>e.jsxs("div",{className:"rounded-2xl border border-emerald-500/40 p-8 bg-slate-900/70 animate-pulse",children:[e.jsx("div",{className:"h-5 w-56 bg-slate-800 rounded"}),e.jsx("div",{className:"h-3 w-72 bg-slate-800 rounded mt-3"}),e.jsx("div",{className:"h-11 w-full bg-slate-800 rounded-xl mt-8"})]},n))}):N.length===0?e.jsx("div",{className:"text-center text-slate-500 text-sm py-10",children:"No Pine Connector plans found."}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:N.map(t=>w(t,"copy"))})]}),a==="both"&&e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"text-emerald-400",size:22}),e.jsx("p",{className:"text-lg font-semibold text-slate-100",children:"Bundle plans not added yet"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"When you insert bundle plans in DB, we’ll auto-show them here."})]})})]}),e.jsx("div",{className:"fixed inset-x-0 bottom-0 border-t border-slate-800 bg-slate-950/90 backdrop-blur",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-6 py-4 flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-xs text-slate-400",children:s?e.jsxs("span",{children:["Selected plan ID:"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:s.planId})," ","• Next: Terms → Billing → Payment"]}):e.jsx("span",{children:"Select any plan to continue"})}),e.jsxs("button",{disabled:!s,onClick:I,className:`inline-flex items-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold transition ${s?"bg-emerald-500 text-slate-950 hover:bg-emerald-400":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:["Continue ",e.jsx(F,{size:18})]})]})})]})]})};export{fe as default};
