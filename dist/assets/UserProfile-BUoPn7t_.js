import{c as P,j as e,a as Ie,m as Te,b as Ee,r as m,Z as se,y as g,S as V,d as $e,X as ze,e as Ue,f as Be,g as Oe,h as Re,i as _e}from"./index-1Vb8v_ID.js";import{L as qe}from"./link-2-BWaUl3WG.js";import{R as Y}from"./refresh-cw-D8nMIIN4.js";import{u as He,C as Me}from"./profileSubscription.api-BYcq3YH7.js";import{S as pe}from"./save-CeG-JZYh.js";import{T as Ve,S as te}from"./trash-2-510jcAId.js";import{U as Se}from"./user-OzNaXl3Y.js";import{C as ce}from"./chart-candlestick-BUbcm7oO.js";import{M as Ke}from"./map-pin-DodWn8kc.js";import{C as Ge}from"./calendar-D8uLdbtL.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]],Xe=P("bitcoin",We);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Qe=P("building-2",Ye);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],he=P("crown",Ze);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fe=P("eye-off",Je);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Le=P("eye",es);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],xe=P("hash",ss);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],as=P("lock",ts);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ns=P("mail",ls);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],je=P("pencil",rs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],is=P("sliders-horizontal",ds);function me({open:s,onClose:a,children:t}){return e.jsx(Ie,{children:s&&e.jsx(Te.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,children:e.jsx(Te.div,{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-[90%] max-w-lg",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},onClick:d=>d.stopPropagation(),children:t})})})}const ue="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",os="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function Pe(...s){return s.filter(Boolean).join(" ")}function cs({ok:s,text:a}){return e.jsxs("span",{className:Pe("inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border",s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"),children:[e.jsx(V,{size:14}),a]})}function xs({value:s,onChange:a,allowTrade:t,setAllowTrade:d,onRefreshSubscription:x}){const n=s||{},h=!!n.enabled,i=n.mode||"MANAGED",[r,{isLoading:y}]=Ee(),k=m.useMemo(()=>h?{ok:!0,text:"Ready"}:{ok:!1,text:"Disabled"},[h]),A=(w,S)=>{a({...n,[w]:S})},I=async()=>{var S,U,E,D,F;const w=!t;try{await r({allowTrade:w}).unwrap();const f=await(x==null?void 0:x()),o=((S=f==null?void 0:f.data)==null?void 0:S.data)??(f==null?void 0:f.data)??((U=f==null?void 0:f.currentData)==null?void 0:U.data)??(f==null?void 0:f.currentData)??null,b=!!((o==null?void 0:o.executionEnabled)??w);d(b),g.success(b?"Trading enabled":"Trading disabled")}catch(f){g.error(((E=f==null?void 0:f.data)==null?void 0:E.message)||"Failed to update trade status");try{const o=await(x==null?void 0:x()),b=((D=o==null?void 0:o.data)==null?void 0:D.data)??(o==null?void 0:o.data)??((F=o==null?void 0:o.currentData)==null?void 0:F.data)??(o==null?void 0:o.currentData)??null,u=!!((b==null?void 0:b.executionEnabled)??t);d(u)}catch{}}};return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:os,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-emerald-500/15 border border-emerald-400/20 flex items-center justify-center",children:e.jsx(qe,{className:"text-emerald-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Pine Connector"}),e.jsx("p",{className:"text-xs text-slate-400",children:"TradingView → Webhook → Our Bridge"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{ok:k.ok,text:k.text}),x&&e.jsxs("button",{type:"button",onClick:()=>x==null?void 0:x(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),"Refresh"]})]})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/40 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-100 flex items-center gap-2",children:[e.jsx(se,{size:16,className:t?"text-emerald-400":"text-rose-400"}),"Allow Trading (Execution)"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"If OFF, webhooks will NOT place/close trades."})]}),e.jsx("button",{type:"button",disabled:y,onClick:I,className:Pe("inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition",t?"bg-rose-500 text-slate-950 hover:bg-rose-400":"bg-emerald-500 text-slate-950 hover:bg-emerald-400",y&&"opacity-60 cursor-not-allowed"),children:y?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:14,className:"animate-spin"}),"Updating..."]}):t?"Disable Trading":"Enable Trading"})]}),e.jsxs("div",{className:"mt-3 text-[11px] text-slate-500",children:["Current status:"," ",e.jsx("span",{className:t?"text-emerald-300 font-semibold":"text-rose-300 font-semibold",children:t?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Execution Mode"}),e.jsxs("select",{disabled:!h,className:`${ue} ${h?"":"opacity-60 cursor-not-allowed"}`,value:i,onChange:w=>A("mode",w.target.value),children:[e.jsx("option",{value:"MANAGED",children:"Managed by Us"}),e.jsx("option",{value:"SELF",children:"Self Managed"})]}),h&&i==="SELF"&&e.jsxs("div",{className:"mt-4 grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Label (optional)"}),e.jsx("input",{className:ue,placeholder:"e.g. My TV Strategy",value:n.label||"",onChange:w=>A("label",w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (optional)"}),e.jsx("input",{className:ue,placeholder:"Any note...",value:n.notes||"",onChange:w=>A("notes",w.target.value)})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-200",children:[e.jsx(is,{size:16}),e.jsx("p",{className:"text-sm font-medium",children:"How it works"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["*Managed*: Signals execute via our system based on your plan.",e.jsx("br",{}),"*Self*: You manage execution; we store only basic config for reference."]})]})]})]})]})})}const q="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",ms="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function us({checked:s,onChange:a,label:t,hint:d}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:t}),d&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:d})]}),e.jsx("button",{type:"button",onClick:()=>a(!s),className:`relative h-8 w-14 rounded-full border transition ${s?"bg-emerald-500/90 border-emerald-400":"bg-slate-800 border-slate-700"}`,children:e.jsx("span",{className:`absolute top-1 h-6 w-6 rounded-full bg-slate-950 transition ${s?"left-7":"left-1"}`})})]})}function ps({ok:s,text:a}){return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border ${s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"}`,children:[e.jsx(V,{size:14}),a]})}function hs({value:s,onChange:a}){const t=s||{},[d,x]=m.useState(!1),n=!!t.enabled,h=m.useMemo(()=>{if(!n)return{ok:!1,text:"Disabled"};const r=!!(t.broker&&(t.token||t.apiKey)&&t.clientId);return{ok:r,text:r?"Ready":"Needs broker token"}},[n,t]),i=(r,y)=>a({...t,[r]:y});return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:ms,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-indigo-500/15 border border-indigo-400/20 flex items-center justify-center",children:e.jsx(Qe,{className:"text-indigo-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Indian Market"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Token settings required for executing Indian market strategies."})]})]}),e.jsx(ps,{ok:h.ok,text:h.text})]}),e.jsx("div",{className:"mt-5",children:e.jsx(us,{checked:n,onChange:r=>i("enabled",r),label:"Enable Indian Market Trading",hint:"Even if you don’t trade today, keep it ON if you have an active strategy."})}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Broker"}),e.jsxs("select",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,value:t.broker||"",onChange:r=>i("broker",r.target.value),children:[e.jsx("option",{value:"",children:"Select broker"}),e.jsx("option",{value:"MOTILAL_OSWAL",children:"Motilal Oswal"}),e.jsx("option",{value:"ZERODHA",children:"Zerodha"}),e.jsx("option",{value:"ANGEL",children:"Angel One"}),e.jsx("option",{value:"UPSTOX",children:"Upstox"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Client ID"}),e.jsx("input",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Your broker client id",value:t.clientId||"",onChange:r=>i("clientId",r.target.value)})]}),e.jsx("div",{className:"md:col-span-2 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Depending on broker, you may need either a single token OR API key + secret."})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Access Token"}),e.jsx("input",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Token",value:t.token||"",onChange:r=>i("token",r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Key (Optional)"}),e.jsx("input",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"API Key",value:t.apiKey||"",onChange:r=>i("apiKey",r.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Secret (Optional)"}),e.jsx("input",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"••••••••",type:d?"text":"password",value:t.apiSecret||"",onChange:r=>i("apiSecret",r.target.value)}),e.jsx("button",{type:"button",disabled:!n,onClick:()=>x(r=>!r),className:"absolute right-3 top-[34px] text-slate-400 hover:text-slate-200 disabled:opacity-60",children:d?e.jsx(Fe,{size:16}):e.jsx(Le,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (Optional)"}),e.jsx("input",{disabled:!n,className:`${q} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Any note...",value:t.notes||"",onChange:r=>i("notes",r.target.value)})]})]})]})})}const J="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",js="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function gs({checked:s,onChange:a,label:t,hint:d}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:t}),d&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:d})]}),e.jsx("button",{type:"button",onClick:()=>a(!s),className:`relative h-8 w-14 rounded-full border transition ${s?"bg-emerald-500/90 border-emerald-400":"bg-slate-800 border-slate-700"}`,children:e.jsx("span",{className:`absolute top-1 h-6 w-6 rounded-full bg-slate-950 transition ${s?"left-7":"left-1"}`})})]})}function fs({ok:s,text:a}){return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border ${s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"}`,children:[e.jsx(V,{size:14}),a]})}function bs({value:s,onChange:a}){const t=s||{},[d,x]=m.useState(!1),n=!!t.enabled,h=m.useMemo(()=>{if(!n)return{ok:!1,text:"Disabled"};const r=!!(t.apiKey&&t.apiSecret);return{ok:r,text:r?"Ready":"Needs API keys"}},[n,t]),i=(r,y)=>a({...t,[r]:y});return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:js,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-yellow-500/15 border border-yellow-400/20 flex items-center justify-center",children:e.jsx(Xe,{className:"text-yellow-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Crypto Trading"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Execution via Delta Exchange."})]})]}),e.jsx(fs,{ok:h.ok,text:h.text})]}),e.jsx("div",{className:"mt-5",children:e.jsx(gs,{checked:n,onChange:r=>i("enabled",r),label:"Enable Crypto Trading",hint:"Keep enabled if you have an active crypto strategy subscription."})}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Exchange"}),e.jsx("input",{disabled:!0,className:`${J} opacity-80 cursor-not-allowed`,value:"Delta Exchange"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Key"}),e.jsx("input",{disabled:!n,className:`${J} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Delta API Key",value:t.apiKey||"",onChange:r=>i("apiKey",r.target.value)})]}),e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Secret"}),e.jsx("input",{disabled:!n,className:`${J} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"••••••••",type:d?"text":"password",value:t.apiSecret||"",onChange:r=>i("apiSecret",r.target.value)}),e.jsx("button",{type:"button",disabled:!n,onClick:()=>x(r=>!r),className:"absolute right-3 top-[34px] text-slate-400 hover:text-slate-200 disabled:opacity-60",children:d?e.jsx(Fe,{size:16}):e.jsx(Le,{size:16})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (Optional)"}),e.jsx("input",{disabled:!n,className:`${J} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Any note...",value:t.notes||"",onChange:r=>i("notes",r.target.value)})]})]})]})})}function _(s){return(s==null?void 0:s.data)??s}const Ns=$e.enhanceEndpoints({addTagTypes:["ForexTraderUserDetails"]}).injectEndpoints({endpoints:s=>({getMyForexTraderDetails:s.query({query:()=>({url:"/forex-trader-user-details/me",method:"GET"}),transformResponse:a=>{const t=_(a),d=(t==null?void 0:t.rows)??(t==null?void 0:t.items)??(t==null?void 0:t.data)??t??[];return Array.isArray(d)?d:[]},providesTags:["ForexTraderUserDetails"]}),upsertMyForexTraderDetails:s.mutation({query:a=>({url:"/forex-trader-user-details/me",method:"PUT",body:a}),transformResponse:a=>{var t;return((t=_(a))==null?void 0:t.data)??_(a)},invalidatesTags:["ForexTraderUserDetails"]}),patchForexTraderDetailById:s.mutation({query:({id:a,patch:t})=>({url:`/forex-trader-user-details/${a}`,method:"PATCH",body:t}),transformResponse:a=>{var t;return((t=_(a))==null?void 0:t.data)??_(a)},invalidatesTags:["ForexTraderUserDetails"]}),deleteForexTraderDetailById:s.mutation({query:({id:a})=>({url:`/forex-trader-user-details/${a}`,method:"DELETE"}),transformResponse:a=>{var t;return((t=_(a))==null?void 0:t.data)??_(a)},invalidatesTags:["ForexTraderUserDetails"]})}),overrideExisting:!0}),{useGetMyForexTraderDetailsQuery:vs,useUpsertMyForexTraderDetailsMutation:ys,usePatchForexTraderDetailByIdMutation:ws,useDeleteForexTraderDetailByIdMutation:ks}=Ns,H="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400";function Cs(...s){return s.filter(Boolean).join(" ")}function Ts({mode:s="FOREX"}){if(s!=="FOREX")return e.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-slate-300",children:"This page is only for FOREX trader details."});const{data:a,isLoading:t,isFetching:d,refetch:x}=vs(),n=m.useMemo(()=>{const c=(a==null?void 0:a.data)??a??[];return Array.isArray(c)?c:[]},[a]),[h,{isLoading:i}]=ys(),[r,{isLoading:y}]=ws(),[k,{isLoading:A}]=ks(),[I,w]=m.useState("MT5"),[S,U]=m.useState(!0),[E,D]=m.useState(""),[F,f]=m.useState(""),[o,b]=m.useState(""),[u,l]=m.useState(null),[ae,B]=m.useState(!1),[O,R]=m.useState(""),[$,L]=m.useState("");function K(){w("MT5"),U(!0),D(""),f(""),b("")}function Q(c){l(Number(c.id)),B(!!c.isMaster),R(String(c.forexTraderUserId??"")),L("")}function G(){l(null),B(!1),R(""),L("")}async function le(){var c;try{if(String(I).toUpperCase()==="MT5"){if(!E.trim())return g.error("MT5 Login ID is required");await h({forexType:"MT5",forexTraderUserId:E.trim(),isMaster:S}).unwrap(),g.success("Saved"),K(),x();return}if(!F.trim())return g.error("cTrader Account ID is required");if(!o.trim())return g.error("cTrader Access Token is required");await h({forexType:"CTRADER",forexTraderUserId:F.trim(),token:o.trim(),isMaster:S}).unwrap(),g.success("Saved"),K(),x()}catch(v){g.error(((c=v==null?void 0:v.data)==null?void 0:c.message)||"Failed to save")}}async function ne(c){var v;try{if(!O.trim())return g.error("User ID is required");const j={forexTraderUserId:O.trim(),isMaster:ae};$.trim()&&(j.token=$.trim()),await r({id:c,patch:j}).unwrap(),g.success("Updated"),G(),x()}catch(j){g.error(((v=j==null?void 0:j.data)==null?void 0:v.message)||"Failed to update")}}async function re(c){var v;try{await r({id:c,patch:{isMaster:!0}}).unwrap(),g.success("Master set"),x()}catch(j){g.error(((v=j==null?void 0:j.data)==null?void 0:v.message)||"Failed")}}async function de(c){var v;try{await k({id:c}).unwrap(),g.success("Deleted"),u===c&&G(),x()}catch(j){g.error(((v=j==null?void 0:j.data)==null?void 0:v.message)||"Failed")}}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Forex Trader Details"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Use ",e.jsx("span",{className:"text-slate-200 font-semibold",children:"PUT /forex-trader-user-details/me"})," to add Master/Child rows. Master is decided by ",e.jsx("span",{className:"text-slate-200 font-semibold",children:"isMaster"}),"."]})]}),e.jsxs("button",{type:"button",onClick:()=>x(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),d?"Refreshing...":"Refresh"]})]})}),e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Add Master / Child"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"MT5: Login ID only • cTrader: Account ID + Access Token"})]}),e.jsxs("button",{type:"button",onClick:le,disabled:i,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400 disabled:opacity-60",children:[e.jsx(pe,{size:16}),i?"Saving...":"Save"]})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Forex Type *"}),e.jsxs("select",{value:I,onChange:c=>w(c.target.value),className:Cs(H,"!mt-1"),children:[e.jsx("option",{value:"MT5",children:"MT5"}),e.jsx("option",{value:"CTRADER",children:"cTrader"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Role"}),e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-sm text-slate-200",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:c=>U(c.target.checked),className:"h-4 w-4 rounded border-slate-700 bg-slate-950"}),"isMaster = true (unchecked = Child)"]})]}),I==="MT5"?e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"MT5 Login ID *"}),e.jsx("input",{value:E,onChange:c=>D(c.target.value),className:H,placeholder:"e.g. 12345678"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"cTrader Account ID *"}),e.jsx("input",{value:F,onChange:c=>f(c.target.value),className:H,placeholder:"e.g. 10001234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"cTrader Access Token *"}),e.jsx("input",{value:o,onChange:c=>b(c.target.value),className:H,placeholder:"Paste access token"})]})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Saved Rows"}),t?e.jsx("div",{className:"mt-4 text-sm text-slate-400",children:"Loading…"}):n.length===0?e.jsx("div",{className:"mt-4 text-sm text-slate-400",children:"No rows yet."}):e.jsx("div",{className:"mt-4 space-y-3",children:n.map(c=>{const v=u===Number(c.id);return e.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-100 flex items-center gap-2",children:[c.forexType,c.isMaster?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-400/15 px-2 py-1 text-[11px] text-yellow-200",children:[e.jsx(he,{size:12})," Master"]}):e.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-1 text-[11px] text-slate-200",children:"Child"})]}),v?e.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"User ID *"}),e.jsx("input",{value:O,onChange:j=>R(j.target.value),className:H})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Role"}),e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-sm text-slate-200",children:[e.jsx("input",{type:"checkbox",checked:ae,onChange:j=>B(j.target.checked),className:"h-4 w-4 rounded border-slate-700 bg-slate-950"}),"isMaster"]})]}),String(c.forexType).toUpperCase()==="CTRADER"&&e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"text-xs font-medium text-slate-300",children:["cTrader Token (optional)",e.jsx("span",{className:"text-[11px] text-slate-500 ml-2",children:"leave blank to keep existing"})]}),e.jsx("input",{value:$,onChange:j=>L(j.target.value),className:H,placeholder:"New token (optional)"})]}),e.jsxs("div",{className:"md:col-span-3 flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>ne(Number(c.id)),disabled:y,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400 disabled:opacity-60",children:[e.jsx(pe,{size:16}),y?"Saving...":"Save Changes"]}),e.jsxs("button",{type:"button",onClick:G,className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-100 hover:bg-slate-700",children:[e.jsx(ze,{size:16}),"Cancel"]})]})]}):e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["User ID: ",e.jsx("span",{className:"text-slate-200",children:c.forexTraderUserId}),String(c.forexType).toUpperCase()==="CTRADER"&&e.jsxs(e.Fragment,{children:[" ","• hasToken:"," ",e.jsx("span",{className:"text-slate-200",children:c.hasToken?"yes":"no"})]})]})]}),!v&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!c.isMaster&&e.jsxs("button",{type:"button",onClick:()=>re(Number(c.id)),disabled:y,className:"inline-flex items-center gap-2 rounded-full bg-yellow-400 px-3 py-2 text-xs font-semibold text-slate-950 hover:bg-yellow-300 disabled:opacity-60",children:[e.jsx(he,{size:14}),"Set Master"]}),e.jsxs("button",{type:"button",onClick:()=>Q(c),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-2 text-xs font-semibold text-slate-100 hover:bg-slate-700",children:[e.jsx(je,{size:14}),"Edit"]}),e.jsxs("button",{type:"button",onClick:()=>de(Number(c.id)),disabled:A,className:"inline-flex items-center gap-2 rounded-full bg-rose-500 px-3 py-2 text-xs font-semibold text-slate-950 hover:bg-rose-400 disabled:opacity-60",children:[e.jsx(Ve,{size:14}),"Delete"]})]})]})},c.id)})}),(d||t)&&e.jsx("div",{className:"mt-3 text-[11px] text-slate-500",children:"Syncing…"})]})]})}const C="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",W="rounded-2xl border border-slate-800 bg-slate-900/40 p-6";function Ms(s){return(s==null?void 0:s.user)||(s==null?void 0:s.data)||null}function Ss(s){return(s==null?void 0:s.data)||null}function Es(s){const a=Number(s??0);return Number.isFinite(a)?`₹${(a/100).toLocaleString("en-IN",{maximumFractionDigits:2})}`:"—"}function Ws(){var Ne,ve,ye,we,ke,Ce;const[s,a]=m.useState("profile"),[t,d]=m.useState(!1),[x,n]=m.useState(!1),[h,i]=m.useState(!1),{data:r,isLoading:y,isFetching:k,refetch:A}=Ue(),{data:I,isLoading:w,isFetching:S,refetch:U}=Be(),{data:E,isLoading:D,isFetching:F,refetch:f}=He(),o=m.useMemo(()=>Ms(r),[r]),b=m.useMemo(()=>Ss(I),[I]),u=(E==null?void 0:E.data)??null,l=(u==null?void 0:u.plan)??null,B=((l==null?void 0:l.executionFlow)??null)==="PINE_CONNECTOR"||!!((Ne=l==null?void 0:l.featureFlags)!=null&&Ne.pineConnector);(ve=l==null?void 0:l.featureFlags)!=null&&ve.riskControls;const O=!!((ye=l==null?void 0:l.featureFlags)!=null&&ye.indianMarket),R=!!((we=l==null?void 0:l.featureFlags)!=null&&we.cryptoDelta),$=m.useMemo(()=>{const p=[];return B&&p.push({key:"pine",label:"Pine Connector"}),O&&p.push({key:"india",label:"Indian Market"}),R&&p.push({key:"crypto",label:"Crypto (Delta)"}),p},[B,O,R]),[L,K]=m.useState("pine");m.useEffect(()=>{const p=$.map(N=>N.key);p.length!==0&&(p.includes(L)||K(p[0]))},[$,L]);const[Q,{isLoading:G}]=Oe(),[le,{isLoading:ne}]=Re(),[re,{isLoading:de}]=_e(),c=y||k,v=(o==null?void 0:o.tradeSettings)||{},[j,Z]=m.useState(v);m.useEffect(()=>{Z(v)},[o==null?void 0:o.tradeSettings]);const ie=(u==null?void 0:u.webhookToken)??null,fe=ie?`https://backend.globalalgotrading.com/tradingview/alert/${ie}`:null,[$s,{isLoading:zs}]=Ee(),oe=!!((u==null?void 0:u.allowTrade)??(u==null?void 0:u.executionEnabled)),[Ae,be]=m.useState(oe);m.useEffect(()=>{be(oe)},[oe]);const De=!!((ke=l==null?void 0:l.featureFlags)!=null&&ke.tradeCopier||(Ce=l==null?void 0:l.featureFlags)!=null&&Ce.copyTrading);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white pt-16 md:pt-28 px-4 md:px-6 pb-10",children:[e.jsxs("div",{className:"mx-auto w-full max-w-5xl space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Profile Settings"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage your personal details, billing info & security."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ee,{active:s==="profile",onClick:()=>a("profile"),icon:e.jsx(Se,{size:16}),label:"Profile"}),e.jsx(ee,{active:s==="billing",onClick:()=>a("billing"),icon:e.jsx(Me,{size:16}),label:"Billing"}),e.jsx(ee,{active:s==="trading",onClick:()=>a("trading"),icon:e.jsx(ce,{size:16}),label:"Trading"}),e.jsx(ee,{active:s==="copy",onClick:()=>a("copy"),icon:e.jsx(se,{size:16}),label:"Copy Trading"}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm hover:bg-slate-700",children:[e.jsx(as,{size:16}),"Change Password"]})]}),c?e.jsx(Ls,{}):o?e.jsxs(e.Fragment,{children:[s==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:W,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(je,{size:15}),"Edit"]})]}),e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(X,{label:"Full Name",value:(o==null?void 0:o.name)||"—",icon:e.jsx(Se,{})}),e.jsx(X,{label:"Email",value:(o==null?void 0:o.email)||"—",icon:e.jsx(ns,{})}),e.jsx(X,{label:"Verification",value:o!=null&&o.isEmailVerified?"Verified":"Not Verified",icon:e.jsx(V,{}),valueClass:o!=null&&o.isEmailVerified?"text-emerald-300":"text-rose-300"}),e.jsx(X,{label:"User ID",value:String((o==null?void 0:o.id)??"—"),icon:e.jsx(xe,{})})]})]}),e.jsxs("section",{className:W,children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Keep your password strong. If you logged in via Google, you can still set a password later."})]})]}),s==="billing"&&e.jsx(e.Fragment,{children:e.jsxs("section",{className:W,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Only PAN + address are required for invoices. Bank details are not collected ✅"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(je,{size:15}),"Edit Billing"]})]}),w||S?e.jsx("div",{className:"mt-6 text-sm text-slate-400",children:"Loading billing…"}):e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(X,{label:"PAN Number",value:(b==null?void 0:b.panNumber)||"—",icon:e.jsx(xe,{})}),e.jsx("div",{className:"sm:col-span-2 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:e.jsx(Ke,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Address"}),b?e.jsxs("div",{className:"mt-1 space-y-1 text-sm text-slate-200",children:[e.jsx("div",{children:b.addressLine1}),b.addressLine2&&e.jsx("div",{children:b.addressLine2}),e.jsxs("div",{children:[b.city,", ",b.state]}),e.jsx("div",{className:"font-medium",children:b.pincode})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"—"})]})]})})]})]})}),s==="trading"&&e.jsxs("section",{className:W,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(ce,{size:18}),"Trading Settings"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"This section changes automatically based on your active plan."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u&&e.jsx("a",{href:"/trading/dashboard",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(ce,{size:16}),"Open Trading Workspace"]})}),e.jsxs("button",{type:"button",onClick:async()=>{var p;try{await Q({tradeSettings:j}).unwrap(),g.success("Trading settings saved"),A()}catch(N){g.error(((p=N==null?void 0:N.data)==null?void 0:p.message)||"Failed to save trading settings")}},className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(pe,{size:16}),"Save Trading"]})]})]}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(he,{size:16,className:"text-yellow-300"}),"Current Plan"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Your trading features depend on this plan."})]}),e.jsxs("button",{onClick:()=>f(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),D||F?"Refreshing...":"Refresh"]})]}),D||F?e.jsx("div",{className:"mt-4 text-sm text-slate-400",children:"Loading subscription…"}):u?e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(z,{icon:e.jsx(se,{size:14}),label:"Plan",value:(l==null?void 0:l.name)||(l==null?void 0:l.planCode)||"—"}),e.jsx(z,{icon:e.jsx(xe,{size:14}),label:"Category",value:(l==null?void 0:l.category)||"—"}),e.jsx(z,{icon:e.jsx(Me,{size:14}),label:"Price",value:`${Es(l==null?void 0:l.priceCents)} / ${(l==null?void 0:l.interval)||"—"}`}),e.jsx(z,{icon:e.jsx(V,{size:14}),label:"Execution",value:`${(l==null?void 0:l.executionFlow)||"—"} • ${u!=null&&u.executionEnabled?"Enabled":"Disabled"}`}),e.jsx(z,{icon:e.jsx(te,{size:14}),label:"Max Accounts",value:String((l==null?void 0:l.maxConnectedAccounts)??"—")}),e.jsx(z,{icon:e.jsx(te,{size:14}),label:"Max Strategies",value:String((l==null?void 0:l.maxActiveStrategies)??"—")}),e.jsx(z,{icon:e.jsx(te,{size:14}),label:"Max Lot/Trade",value:String((l==null?void 0:l.maxLotPerTrade)??"—")}),e.jsx(z,{icon:e.jsx(Ge,{size:14}),label:"Valid Until",value:u!=null&&u.endDate?new Date(u.endDate).toLocaleString():"—"})]}):e.jsx("div",{className:"mt-4 text-sm text-slate-300",children:"No active subscription found. Please subscribe to enable execution features."})]}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:$.length===0?e.jsx("div",{className:"text-sm text-slate-300",children:"Your plan has no trading settings enabled."}):$.map(p=>e.jsx(Fs,{active:L===p.key,onClick:()=>K(p.key),label:p.label},p.key))}),e.jsxs("div",{className:"mt-6",children:[L==="pine"&&B&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(V,{size:16,className:"text-emerald-400"}),"TradingView Webhook URL"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Paste this in TradingView Alert → Webhook URL."})]}),e.jsxs("button",{onClick:()=>f(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),D||F?"Refreshing...":"Refresh"]})]}),e.jsx("div",{className:"mt-4",children:u?ie?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{readOnly:!0,value:fe||"",className:`${C} !mt-0`}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(fe||""),g.success("Webhook URL copied")}catch{g.error("Failed to copy")}},className:"rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400",children:"Copy"})]}),e.jsx("div",{className:"text-[11px] text-slate-400",children:"Tip: TradingView alert must enable “Webhook URL” and “Send alert to webhook URL”."})]}):e.jsxs("div",{className:"text-sm text-yellow-200",children:["Your plan supports Pine Connector, but webhook token is not generated yet.",e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"If this is a new purchase, refresh after a few seconds. If it still stays null, backend should generate webhookToken for active subscriptions."})]}):e.jsx("div",{className:"text-sm text-slate-300",children:"No active subscription found."})})]}),e.jsx(xs,{value:j.pineConnector,onChange:p=>Z(N=>({...N,pineConnector:p})),allowTrade:Ae,setAllowTrade:be,onRefreshSubscription:f})]}),L==="india"&&O&&e.jsx(hs,{value:j.indianMarket,onChange:p=>Z(N=>({...N,indianMarket:p}))}),L==="crypto"&&R&&e.jsx(bs,{value:j.crypto,onChange:p=>Z(N=>({...N,crypto:p}))})]}),e.jsxs("p",{className:"mt-6 text-[11px] text-slate-500",children:["Note: Since your plan is ",e.jsx("span",{className:"text-slate-200 font-semibold",children:(l==null?void 0:l.name)||(l==null?void 0:l.planCode)}),", only the supported settings are shown."]})]}),s==="copy"&&e.jsxs("section",{className:W,children:[e.jsx("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(se,{size:18}),"Copy Trading Settings"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add accounts based on your plan (India: broker token • Forex: MT5/cTrader)."})]})}),u?De?e.jsx("div",{className:"mt-6",children:e.jsx(Ts,{mode:(l==null?void 0:l.category)==="INDIA"?"INDIA":"FOREX"})}):e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-sm text-slate-300",children:["Your current plan does not include"," ",e.jsx("span",{className:"text-slate-100 font-semibold",children:"Copy Trading"}),"."]}):e.jsx("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-sm text-slate-300",children:"No active subscription found. Please subscribe to enable copy trading."}),e.jsx("p",{className:"mt-6 text-[11px] text-slate-500",children:"Tip: India plans use broker token per account. Forex plans use MT5/cTrader accounts."})]})]}):e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:["Unable to load profile."," ",e.jsx("button",{onClick:()=>A(),className:"text-emerald-400 hover:text-emerald-300 font-medium",children:"Retry"})]})]}),e.jsx(me,{open:t,onClose:()=>d(!1),children:e.jsx(Ps,{user:o,loading:G,onClose:()=>d(!1),onSave:async p=>{var N;try{await Q(p).unwrap(),g.success("Profile updated"),d(!1),A()}catch(T){g.error(((N=T==null?void 0:T.data)==null?void 0:N.message)||"Failed to update profile")}}})}),e.jsx(me,{open:x,onClose:()=>n(!1),children:e.jsx(As,{billing:b,loading:ne,onClose:()=>n(!1),onSave:async p=>{var N;try{await le(p).unwrap(),g.success("Billing details saved"),n(!1),U()}catch(T){g.error(((N=T==null?void 0:T.data)==null?void 0:N.message)||"Failed to save billing")}}})}),e.jsx(me,{open:h,onClose:()=>i(!1),children:e.jsx(Ds,{loading:de,onClose:()=>i(!1),onSave:async p=>{var N;try{await re(p).unwrap(),g.success("Password updated"),i(!1)}catch(T){g.error(((N=T==null?void 0:T.data)==null?void 0:N.message)||"Failed to change password")}}})})]})}function ee({active:s,onClick:a,icon:t,label:d}){return e.jsxs("button",{onClick:a,className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition ${s?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:[t,d]})}function Fs({active:s,onClick:a,label:t}){return e.jsxs("button",{onClick:a,className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition ${s?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:[e.jsx(te,{size:16}),t]})}function X({label:s,value:a,icon:t,valueClass:d=""}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:t}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-400",children:s}),e.jsx("p",{className:`text-sm font-medium truncate ${d}`,children:a})]})]})}function z({icon:s,label:a,value:t}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-950/40 p-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:s}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] text-slate-400",children:a}),e.jsx("p",{className:"text-sm font-semibold text-slate-100 truncate",children:t})]})]})}function Ls(){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 animate-pulse",children:[e.jsx("div",{className:"h-5 w-52 bg-slate-800 rounded"}),e.jsx("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[...Array(4)].map((s,a)=>e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 w-40 bg-slate-800 rounded mt-3"})]},a))})]})})}function Ps({user:s,loading:a,onClose:t,onSave:d}){const[x,n]=m.useState((s==null?void 0:s.name)||""),h=(s==null?void 0:s.email)||"";return m.useEffect(()=>{n((s==null?void 0:s.name)||"")},[s==null?void 0:s.name]),e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Email change is disabled for now (can be added later)."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Full Name",children:e.jsx("input",{value:x,onChange:i=>n(i.target.value),className:C,placeholder:"Enter your name"})}),e.jsx(M,{label:"Email",children:e.jsx("input",{value:h,disabled:!0,className:`${C} opacity-70 cursor-not-allowed`})})]}),e.jsx(ge,{onClose:t,mainText:a?"Saving...":"Save Changes",disabled:a,onMain:()=>d({name:x.trim()})})]})}function As({billing:s,loading:a,onClose:t,onSave:d}){const[x,n]=m.useState({panNumber:(s==null?void 0:s.panNumber)??"",accountHolderName:(s==null?void 0:s.accountHolderName)??"",accountNumber:(s==null?void 0:s.accountNumber)??"",ifscCode:(s==null?void 0:s.ifscCode)??"",bankName:(s==null?void 0:s.bankName)??"",branch:(s==null?void 0:s.branch)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""});m.useEffect(()=>{n({panNumber:(s==null?void 0:s.panNumber)??"",accountHolderName:(s==null?void 0:s.accountHolderName)??"",accountNumber:(s==null?void 0:s.accountNumber)??"",ifscCode:(s==null?void 0:s.ifscCode)??"",bankName:(s==null?void 0:s.bankName)??"",branch:(s==null?void 0:s.branch)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""})},[s]);const h=(i,r)=>n(y=>({...y,[i]:r}));return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"PAN is optional ✅. Fill what you have — you can update later."}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsx(M,{label:"PAN Number (Optional)",children:e.jsx("input",{value:x.panNumber,onChange:i=>h("panNumber",i.target.value),className:C,placeholder:"ABCDE1234F"})})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Address"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(M,{label:"Address Line 1",children:e.jsx("input",{value:x.addressLine1,onChange:i=>h("addressLine1",i.target.value),className:C,placeholder:"House / Street"})}),e.jsx(M,{label:"Address Line 2 (Optional)",children:e.jsx("input",{value:x.addressLine2,onChange:i=>h("addressLine2",i.target.value),className:C,placeholder:"Area / Landmark"})}),e.jsx(M,{label:"City",children:e.jsx("input",{value:x.city,onChange:i=>h("city",i.target.value),className:C,placeholder:"City"})}),e.jsx(M,{label:"State",children:e.jsx("input",{value:x.state,onChange:i=>h("state",i.target.value),className:C,placeholder:"State"})}),e.jsx(M,{label:"Pincode",children:e.jsx("input",{value:x.pincode,onChange:i=>h("pincode",i.target.value),className:C,placeholder:"560001"})})]})]}),e.jsx(ge,{onClose:t,mainText:a?"Saving...":"Save Billing",disabled:a,onMain:()=>d({...Is(x)})})]})}function Ds({loading:s,onClose:a,onSave:t}){const[d,x]=m.useState(""),[n,h]=m.useState(""),[i,r]=m.useState(""),y=d.length>=1&&n.length>=6&&n===i;return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Change Password"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Use a strong password. Minimum 6 characters."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Current Password",children:e.jsx("input",{type:"password",value:d,onChange:k=>x(k.target.value),className:C,placeholder:"Enter current password"})}),e.jsx(M,{label:"New Password",children:e.jsx("input",{type:"password",value:n,onChange:k=>h(k.target.value),className:C,placeholder:"Create a new password"})}),e.jsxs(M,{label:"Confirm New Password",children:[e.jsx("input",{type:"password",value:i,onChange:k=>r(k.target.value),className:C,placeholder:"Re-enter new password"}),i.length>0&&n!==i&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:"Passwords do not match"})]})]}),e.jsx(ge,{onClose:a,mainText:s?"Updating...":"Update Password",disabled:s||!y,onMain:()=>t({currentPassword:d,newPassword:n})})]})}function M({label:s,children:a}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:s}),a]})}function ge({onClose:s,mainText:a,disabled:t,onMain:d}){return e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:s,className:"rounded-full bg-slate-700 px-4 py-2 text-sm hover:bg-slate-600",children:"Cancel"}),e.jsx("button",{disabled:t,onClick:d,className:"rounded-full bg-emerald-500 px-4 py-2 text-sm text-slate-950 hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:a})]})}function Is(s){const a={};return Object.keys(s).forEach(t=>{const d=s[t];a[t]=typeof d=="string"&&d.trim()===""?null:d}),a}export{Ws as default};
