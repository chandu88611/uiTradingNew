import{c as F,j as e,f as re,m as D,u as ie,r as o,g as de,h as ce,i as oe,k as xe,l as me,n as pe,Z as I,U as R,S as E,y}from"./index-_x4LqXeA.js";import{u as he}from"./profileSubscription.api-Cchy4I3l.js";import{R as ue}from"./refresh-cw-DbxyBI9D.js";import{C as je}from"./credit-card-Btv1osjQ.js";import{H as V}from"./hash-D-36adla.js";import{C as ge}from"./crown-BIlIHcvw.js";import{M as fe}from"./map-pin-DjW0nyJt.js";import{L as be}from"./layers-Bf8l_RcR.js";import{E as Ne}from"./external-link-Cb29PXaN.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ye=F("mail",ve);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Q=F("pencil",we);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]],ke=F("plug-zap",Ce);function M({open:s,onClose:a,children:t}){return e.jsx(re,{children:s&&e.jsx(D.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,children:e.jsx(D.div,{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-[90%] max-w-lg",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},onClick:l=>l.stopPropagation(),children:t})})})}const Z="mx-auto w-full max-w-6xl px-4 md:px-6",B="rounded-2xl border border-slate-800 bg-slate-900/60 backdrop-blur shadow-[0_0_0_1px_rgba(255,255,255,0.02)]",C=`${B} p-5 md:p-6`,Pe="text-slate-400 text-sm",u="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400";function f(...s){return s.filter(Boolean).join(" ")}function Le(s){return(s==null?void 0:s.user)||(s==null?void 0:s.data)||null}function Se(s){return(s==null?void 0:s.data)||null}function ze(){return e.jsx("div",{className:"my-4 h-px w-full bg-slate-800/80"})}function q({label:s,tone:a}){const t=a==="amber"?"border-amber-400/30 bg-amber-500/10 text-amber-200":a==="sky"?"border-sky-400/30 bg-sky-500/10 text-sky-200":"border-emerald-400/30 bg-emerald-500/10 text-emerald-200";return e.jsxs("span",{className:f("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-semibold",t),children:[e.jsx(be,{size:14,className:"opacity-80"}),s]})}function G({active:s,onClick:a,icon:t,label:l}){return e.jsxs("button",{onClick:a,className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",s?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900/60 text-slate-300 border-slate-800 hover:border-slate-700"),children:[t,l]})}function k({label:s,value:a,icon:t,valueClass:l=""}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-950/35 p-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl border border-slate-800 bg-slate-900/60 flex items-center justify-center text-slate-300",children:t}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-400",children:s}),e.jsx("p",{className:f("text-sm font-medium truncate",l),children:a})]})]})}function P({title:s,desc:a,icon:t,onClick:l}){return e.jsxs("button",{type:"button",onClick:l,className:"text-left rounded-2xl border border-slate-800 bg-slate-950/35 hover:bg-slate-950/55 transition p-4 flex gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl border border-slate-800 bg-slate-900/60 flex items-center justify-center text-slate-200",children:t}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:s}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:a})]}),e.jsx("div",{className:"ml-auto text-slate-500",children:e.jsx(Ne,{size:16})})]})}function Ze(){const s=ie(),[a,t]=o.useState("profile"),[l,r]=o.useState(!1),[c,d]=o.useState(!1),[n,j]=o.useState(!1),{data:N,isLoading:b,isFetching:H,refetch:L}=de(),{data:U,isLoading:Y,isFetching:$,refetch:_}=ce(),{data:S,isLoading:J,isFetching:K,refetch:W}=he(),i=o.useMemo(()=>Le(N),[N]),x=o.useMemo(()=>Se(U),[U]),z=(S==null?void 0:S.data)??null,h=(z==null?void 0:z.plan)??null,A=(h==null?void 0:h.name)??"No active plan",v=((h==null?void 0:h.planType)??(h==null?void 0:h.plan_type)??"").toString().toUpperCase(),X=b||H||J||K,[ee,{isLoading:se}]=oe(),[ae,{isLoading:te}]=xe(),[le,{isLoading:ne}]=me(),O=()=>s("/pricing");return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white pb-12",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(16,185,129,0.18),transparent_55%)]"}),e.jsxs("div",{className:f(Z,"relative pt-10 md:pt-14 pb-6"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:["Profile ",e.jsx("span",{className:"text-emerald-400",children:"Settings"})]}),e.jsx("p",{className:f(Pe,"mt-1"),children:"Manage your profile, billing, and security. Trading settings are available in their own pages."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(q,{label:A,tone:v==="ELITE"?"amber":v==="BUNDLE"?"sky":"emerald"}),v?e.jsx(q,{label:v,tone:"emerald"}):null]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>j(!0),className:"inline-flex items-center gap-2 rounded-xl border border-slate-800 bg-slate-900/60 px-4 py-2 text-sm hover:bg-slate-900/80 transition",children:[e.jsx(pe,{size:16,className:"text-slate-300"}),"Change Password"]}),e.jsxs("button",{type:"button",onClick:()=>{L(),_(),W()},className:"inline-flex items-center gap-2 rounded-xl border border-slate-800 bg-slate-900/60 px-4 py-2 text-sm hover:bg-slate-900/80 transition",children:[e.jsx(ue,{size:16,className:"text-slate-300"}),"Refresh"]}),e.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400 transition",children:[e.jsx(I,{size:16}),"Upgrade Plan"]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[e.jsx(G,{active:a==="profile",onClick:()=>t("profile"),icon:e.jsx(R,{size:16}),label:"Profile"}),e.jsx(G,{active:a==="billing",onClick:()=>t("billing"),icon:e.jsx(je,{size:16}),label:"Billing"})]})]})]}),e.jsx("div",{className:f(Z,"mt-6"),children:X?e.jsx(Ee,{}):i?e.jsxs("div",{className:"grid lg:grid-cols-[1fr,360px] gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[a==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:C,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Personal Information"}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400",children:[e.jsx(Q,{size:15}),"Edit"]})]}),e.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[e.jsx(k,{label:"Full Name",value:(i==null?void 0:i.name)||"—",icon:e.jsx(R,{size:18})}),e.jsx(k,{label:"Email",value:(i==null?void 0:i.email)||"—",icon:e.jsx(ye,{size:18})}),e.jsx(k,{label:"Verification",value:i!=null&&i.isEmailVerified?"Verified":"Not Verified",icon:e.jsx(E,{size:18}),valueClass:i!=null&&i.isEmailVerified?"text-emerald-300":"text-rose-300"}),e.jsx(k,{label:"User ID",value:String((i==null?void 0:i.id)??"—"),icon:e.jsx(V,{size:18})})]})]}),e.jsxs("section",{className:C,children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Use a strong password. You can change your password anytime."})]}),e.jsxs("section",{className:C,children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Trading Pages"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Trading settings are managed in separate pages for clarity."}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(P,{title:"Forex Trading",desc:"Pine connector, MT5/cTrader, webhooks, execution.",icon:e.jsx(ke,{size:18}),onClick:()=>s("/forex-trading")}),e.jsx(P,{title:"Indian Trading",desc:"Broker token settings for Indian market execution.",icon:e.jsx(E,{size:18}),onClick:()=>s("/indian-trading")}),e.jsx(P,{title:"Crypto Trading",desc:"Delta API keys and crypto execution settings.",icon:e.jsx(E,{size:18}),onClick:()=>s("/crypto-trading")}),e.jsx(P,{title:"Copy Trading",desc:"Your copy-trading setup and follower settings.",icon:e.jsx(ge,{size:18}),onClick:()=>s("/copy-trading")})]})]})]}),a==="billing"&&e.jsxs("section",{className:C,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Only PAN + address are required for invoices."})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400",children:[e.jsx(Q,{size:15}),"Edit Billing"]})]}),Y||$?e.jsx("div",{className:"mt-6 text-sm text-slate-400",children:"Loading billing…"}):e.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[e.jsx(k,{label:"PAN Number",value:(x==null?void 0:x.panNumber)||"—",icon:e.jsx(V,{size:18})}),e.jsx("div",{className:"sm:col-span-2 rounded-xl border border-slate-800 bg-slate-950/35 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl border border-slate-800 bg-slate-900/60 flex items-center justify-center text-slate-300",children:e.jsx(fe,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Address"}),x?e.jsxs("div",{className:"mt-1 space-y-1 text-sm text-slate-200",children:[e.jsx("div",{children:x.addressLine1}),x.addressLine2&&e.jsx("div",{children:x.addressLine2}),e.jsxs("div",{children:[x.city,", ",x.state]}),e.jsx("div",{className:"font-medium",children:x.pincode})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"—"})]})]})})]})]})]}),e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-6 h-fit",children:[e.jsxs("div",{className:C,children:[e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:"Current Plan"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Your plan affects which trading pages/features are available."}),e.jsx(ze,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Plan"}),e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:A})]}),v?e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Tier"}),e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:v})]}):null,e.jsxs("button",{type:"button",onClick:O,className:"mt-4 w-full rounded-xl bg-emerald-500 text-slate-950 font-extrabold py-3 hover:bg-emerald-400 transition flex items-center justify-center gap-2",children:[e.jsx(I,{size:18}),"Upgrade Plan"]})]})]}),e.jsxs("div",{className:f(B,"p-5 text-[11px] text-slate-500"),children:["Tip: Trading settings are now in ",e.jsx("b",{children:"Forex / Indian / Crypto"})," pages."]})]})]}):e.jsxs("div",{className:f(B,"p-6 text-slate-300"),children:["Unable to load profile."," ",e.jsx("button",{onClick:()=>L(),className:"text-emerald-400 hover:text-emerald-300 font-medium",children:"Retry"})]})}),e.jsx(M,{open:l,onClose:()=>r(!1),children:e.jsx(Be,{user:i,loading:se,onClose:()=>r(!1),onSave:async w=>{var g;try{await ee(w).unwrap(),y.success("Profile updated"),r(!1),L()}catch(m){y.error(((g=m==null?void 0:m.data)==null?void 0:g.message)||"Failed to update profile")}}})}),e.jsx(M,{open:c,onClose:()=>d(!1),children:e.jsx(Fe,{billing:x,loading:te,onClose:()=>d(!1),onSave:async w=>{var g;try{await ae(w).unwrap(),y.success("Billing details saved"),d(!1),_()}catch(m){y.error(((g=m==null?void 0:m.data)==null?void 0:g.message)||"Failed to save billing")}}})}),e.jsx(M,{open:n,onClose:()=>j(!1),children:e.jsx(Te,{loading:ne,onClose:()=>j(!1),onSave:async w=>{var g;try{await le(w).unwrap(),y.success("Password updated"),j(!1)}catch(m){y.error(((g=m==null?void 0:m.data)==null?void 0:g.message)||"Failed to change password")}}})})]})}function Ee(){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 animate-pulse",children:[e.jsx("div",{className:"h-5 w-52 bg-slate-800 rounded"}),e.jsx("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[...Array(4)].map((s,a)=>e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 w-40 bg-slate-800 rounded mt-3"})]},a))})]})})}function p({label:s,children:a}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:s}),a]})}function T({onClose:s,mainText:a,disabled:t,onMain:l}){return e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:s,className:"rounded-xl border border-slate-800 bg-slate-900/60 px-4 py-2 text-sm hover:bg-slate-900/80 transition",children:"Cancel"}),e.jsx("button",{disabled:t,onClick:l,className:"rounded-xl bg-emerald-500 px-4 py-2 text-sm text-slate-950 font-semibold hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:a})]})}function Me(s){const a={};return Object.keys(s).forEach(t=>{const l=s[t];a[t]=typeof l=="string"&&l.trim()===""?null:l}),a}function Be({user:s,loading:a,onClose:t,onSave:l}){const[r,c]=o.useState((s==null?void 0:s.name)||""),d=(s==null?void 0:s.email)||"";return o.useEffect(()=>{c((s==null?void 0:s.name)||"")},[s==null?void 0:s.name]),e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Email change is disabled for now."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Full Name",children:e.jsx("input",{value:r,onChange:n=>c(n.target.value),className:"mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50",placeholder:"Enter your name"})}),e.jsx(p,{label:"Email",children:e.jsx("input",{value:d,disabled:!0,className:"mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/50 px-3 py-2.5 text-sm text-slate-400 opacity-80 cursor-not-allowed"})})]}),e.jsx(T,{onClose:t,mainText:a?"Saving...":"Save Changes",disabled:a,onMain:()=>l({name:r.trim()})})]})}function Fe({billing:s,loading:a,onClose:t,onSave:l}){const[r,c]=o.useState({panNumber:(s==null?void 0:s.panNumber)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""});o.useEffect(()=>{c({panNumber:(s==null?void 0:s.panNumber)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""})},[s]);const d=(n,j)=>c(N=>({...N,[n]:j}));return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Fill what you have — you can update later."}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsx(p,{label:"PAN Number (Optional)",children:e.jsx("input",{value:r.panNumber,onChange:n=>d("panNumber",n.target.value),className:u,placeholder:"ABCDE1234F"})})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Address"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(p,{label:"Address Line 1",children:e.jsx("input",{value:r.addressLine1,onChange:n=>d("addressLine1",n.target.value),className:u,placeholder:"House / Street"})}),e.jsx(p,{label:"Address Line 2 (Optional)",children:e.jsx("input",{value:r.addressLine2,onChange:n=>d("addressLine2",n.target.value),className:u,placeholder:"Area / Landmark"})}),e.jsx(p,{label:"City",children:e.jsx("input",{value:r.city,onChange:n=>d("city",n.target.value),className:u,placeholder:"City"})}),e.jsx(p,{label:"State",children:e.jsx("input",{value:r.state,onChange:n=>d("state",n.target.value),className:u,placeholder:"State"})}),e.jsx(p,{label:"Pincode",children:e.jsx("input",{value:r.pincode,onChange:n=>d("pincode",n.target.value),className:u,placeholder:"560001"})})]})]}),e.jsx(T,{onClose:t,mainText:a?"Saving...":"Save Billing",disabled:a,onMain:()=>l({...Me(r)})})]})}function Te({loading:s,onClose:a,onSave:t}){const[l,r]=o.useState(""),[c,d]=o.useState(""),[n,j]=o.useState(""),N=l.length>=1&&c.length>=6&&c===n;return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Change Password"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Minimum 6 characters."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Current Password",children:e.jsx("input",{type:"password",value:l,onChange:b=>r(b.target.value),className:u,placeholder:"Enter current password"})}),e.jsx(p,{label:"New Password",children:e.jsx("input",{type:"password",value:c,onChange:b=>d(b.target.value),className:u,placeholder:"Create a new password"})}),e.jsxs(p,{label:"Confirm New Password",children:[e.jsx("input",{type:"password",value:n,onChange:b=>j(b.target.value),className:u,placeholder:"Re-enter new password"}),n.length>0&&c!==n&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:"Passwords do not match"})]})]}),e.jsx(T,{onClose:a,mainText:s?"Updating...":"Update Password",disabled:s||!N,onMain:()=>t({currentPassword:l,newPassword:c})})]})}export{Ze as default};
