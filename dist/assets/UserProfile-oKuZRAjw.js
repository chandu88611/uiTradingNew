import{c as E,j as e,a as De,m as je,b as Ce,r as j,Z as G,y,S as D,d as Be,e as Oe,f as Ue,g as Re,h as _e}from"./index-D7C0lGH-.js";import{L as He}from"./link-2-BlMf6_dK.js";import{R as Y}from"./refresh-cw-B6yGkdxB.js";import{u as Ve,C as ge}from"./profileSubscription.api-DGjVua0O.js";import{S as V,P as fe,T as Ne}from"./trash-2-EkpuooHk.js";import{U as ve}from"./user-C-Wmj5AP.js";import{C as te}from"./chart-candlestick-D93AAA4H.js";import{M as Ke}from"./map-pin-B8_B2kct.js";import{S as ye}from"./save-DZqWNsDm.js";import{C as Ze}from"./calendar-6tLgF62V.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]],Ge=E("bitcoin",qe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],We=E("building-2",Ye);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Qe=E("crown",Xe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Te=E("eye-off",Je);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Me=E("eye",es);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ae=E("hash",ss);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],as=E("lock",ts);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ns=E("mail",ls);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],we=E("pencil",rs);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],os=E("sliders-horizontal",ds);function le({open:s,onClose:r,children:a}){return e.jsx(De,{children:s&&e.jsx(je.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:e.jsx(je.div,{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-[90%] max-w-lg",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},onClick:c=>c.stopPropagation(),children:a})})})}const ne="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",is="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function Ae(...s){return s.filter(Boolean).join(" ")}function cs({ok:s,text:r}){return e.jsxs("span",{className:Ae("inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border",s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"),children:[e.jsx(D,{size:14}),r]})}function xs({value:s,onChange:r,allowTrade:a,setAllowTrade:c,onRefreshSubscription:u}){const n=s||{},p=!!n.enabled,d=n.mode||"MANAGED",[o,{isLoading:N}]=Ce(),w=j.useMemo(()=>p?{ok:!0,text:"Ready"}:{ok:!1,text:"Disabled"},[p]),S=(v,L)=>{r({...n,[v]:L})},x=async()=>{var L,z,P,F,I;const v=!a;try{await o({allowTrade:v}).unwrap();const g=await(u==null?void 0:u()),t=((L=g==null?void 0:g.data)==null?void 0:L.data)??(g==null?void 0:g.data)??((z=g==null?void 0:g.currentData)==null?void 0:z.data)??(g==null?void 0:g.currentData)??null,i=!!((t==null?void 0:t.executionEnabled)??v);c(i),y.success(i?"Trading enabled":"Trading disabled")}catch(g){y.error(((P=g==null?void 0:g.data)==null?void 0:P.message)||"Failed to update trade status");try{const t=await(u==null?void 0:u()),i=((F=t==null?void 0:t.data)==null?void 0:F.data)??(t==null?void 0:t.data)??((I=t==null?void 0:t.currentData)==null?void 0:I.data)??(t==null?void 0:t.currentData)??null,m=!!((i==null?void 0:i.executionEnabled)??a);c(m)}catch{}}};return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:is,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-emerald-500/15 border border-emerald-400/20 flex items-center justify-center",children:e.jsx(He,{className:"text-emerald-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Pine Connector"}),e.jsx("p",{className:"text-xs text-slate-400",children:"TradingView → Webhook → Our Bridge"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{ok:w.ok,text:w.text}),u&&e.jsxs("button",{type:"button",onClick:()=>u==null?void 0:u(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),"Refresh"]})]})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/40 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-100 flex items-center gap-2",children:[e.jsx(G,{size:16,className:a?"text-emerald-400":"text-rose-400"}),"Allow Trading (Execution)"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"If OFF, webhooks will NOT place/close trades."})]}),e.jsx("button",{type:"button",disabled:N,onClick:x,className:Ae("inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition",a?"bg-rose-500 text-slate-950 hover:bg-rose-400":"bg-emerald-500 text-slate-950 hover:bg-emerald-400",N&&"opacity-60 cursor-not-allowed"),children:N?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:14,className:"animate-spin"}),"Updating..."]}):a?"Disable Trading":"Enable Trading"})]}),e.jsxs("div",{className:"mt-3 text-[11px] text-slate-500",children:["Current status:"," ",e.jsx("span",{className:a?"text-emerald-300 font-semibold":"text-rose-300 font-semibold",children:a?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Execution Mode"}),e.jsxs("select",{disabled:!p,className:`${ne} ${p?"":"opacity-60 cursor-not-allowed"}`,value:d,onChange:v=>S("mode",v.target.value),children:[e.jsx("option",{value:"MANAGED",children:"Managed by Us"}),e.jsx("option",{value:"SELF",children:"Self Managed"})]}),p&&d==="SELF"&&e.jsxs("div",{className:"mt-4 grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Label (optional)"}),e.jsx("input",{className:ne,placeholder:"e.g. My TV Strategy",value:n.label||"",onChange:v=>S("label",v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (optional)"}),e.jsx("input",{className:ne,placeholder:"Any note...",value:n.notes||"",onChange:v=>S("notes",v.target.value)})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-200",children:[e.jsx(os,{size:16}),e.jsx("p",{className:"text-sm font-medium",children:"How it works"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["*Managed*: Signals execute via our system based on your plan.",e.jsx("br",{}),"*Self*: You manage execution; we store only basic config for reference."]})]})]})]})]})})}const U="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",ms="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function us({checked:s,onChange:r,label:a,hint:c}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:a}),c&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:c})]}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:`relative h-8 w-14 rounded-full border transition ${s?"bg-emerald-500/90 border-emerald-400":"bg-slate-800 border-slate-700"}`,children:e.jsx("span",{className:`absolute top-1 h-6 w-6 rounded-full bg-slate-950 transition ${s?"left-7":"left-1"}`})})]})}function ps({ok:s,text:r}){return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border ${s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"}`,children:[e.jsx(D,{size:14}),r]})}function hs({value:s,onChange:r}){const a=s||{},[c,u]=j.useState(!1),n=!!a.enabled,p=j.useMemo(()=>{if(!n)return{ok:!1,text:"Disabled"};const o=!!(a.broker&&(a.token||a.apiKey)&&a.clientId);return{ok:o,text:o?"Ready":"Needs broker token"}},[n,a]),d=(o,N)=>r({...a,[o]:N});return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:ms,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-indigo-500/15 border border-indigo-400/20 flex items-center justify-center",children:e.jsx(We,{className:"text-indigo-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Indian Market"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Token settings required for executing Indian market strategies."})]})]}),e.jsx(ps,{ok:p.ok,text:p.text})]}),e.jsx("div",{className:"mt-5",children:e.jsx(us,{checked:n,onChange:o=>d("enabled",o),label:"Enable Indian Market Trading",hint:"Even if you don’t trade today, keep it ON if you have an active strategy."})}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Broker"}),e.jsxs("select",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,value:a.broker||"",onChange:o=>d("broker",o.target.value),children:[e.jsx("option",{value:"",children:"Select broker"}),e.jsx("option",{value:"MOTILAL_OSWAL",children:"Motilal Oswal"}),e.jsx("option",{value:"ZERODHA",children:"Zerodha"}),e.jsx("option",{value:"ANGEL",children:"Angel One"}),e.jsx("option",{value:"UPSTOX",children:"Upstox"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Client ID"}),e.jsx("input",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Your broker client id",value:a.clientId||"",onChange:o=>d("clientId",o.target.value)})]}),e.jsx("div",{className:"md:col-span-2 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:e.jsx("p",{className:"text-xs text-slate-400",children:"Depending on broker, you may need either a single token OR API key + secret."})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Access Token"}),e.jsx("input",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Token",value:a.token||"",onChange:o=>d("token",o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Key (Optional)"}),e.jsx("input",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"API Key",value:a.apiKey||"",onChange:o=>d("apiKey",o.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Secret (Optional)"}),e.jsx("input",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"••••••••",type:c?"text":"password",value:a.apiSecret||"",onChange:o=>d("apiSecret",o.target.value)}),e.jsx("button",{type:"button",disabled:!n,onClick:()=>u(o=>!o),className:"absolute right-3 top-[34px] text-slate-400 hover:text-slate-200 disabled:opacity-60",children:c?e.jsx(Te,{size:16}):e.jsx(Me,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (Optional)"}),e.jsx("input",{disabled:!n,className:`${U} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Any note...",value:a.notes||"",onChange:o=>d("notes",o.target.value)})]})]})]})})}const Z="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",bs="rounded-2xl border border-slate-800 bg-slate-900/50 p-5";function js({checked:s,onChange:r,label:a,hint:c}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:a}),c&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:c})]}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:`relative h-8 w-14 rounded-full border transition ${s?"bg-emerald-500/90 border-emerald-400":"bg-slate-800 border-slate-700"}`,children:e.jsx("span",{className:`absolute top-1 h-6 w-6 rounded-full bg-slate-950 transition ${s?"left-7":"left-1"}`})})]})}function gs({ok:s,text:r}){return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs border ${s?"bg-emerald-500/10 text-emerald-300 border-emerald-400/30":"bg-rose-500/10 text-rose-300 border-rose-400/30"}`,children:[e.jsx(D,{size:14}),r]})}function fs({value:s,onChange:r}){const a=s||{},[c,u]=j.useState(!1),n=!!a.enabled,p=j.useMemo(()=>{if(!n)return{ok:!1,text:"Disabled"};const o=!!(a.apiKey&&a.apiSecret);return{ok:o,text:o?"Ready":"Needs API keys"}},[n,a]),d=(o,N)=>r({...a,[o]:N});return e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:bs,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-yellow-500/15 border border-yellow-400/20 flex items-center justify-center",children:e.jsx(Ge,{className:"text-yellow-300",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-100",children:"Crypto Trading"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Execution via Delta Exchange."})]})]}),e.jsx(gs,{ok:p.ok,text:p.text})]}),e.jsx("div",{className:"mt-5",children:e.jsx(js,{checked:n,onChange:o=>d("enabled",o),label:"Enable Crypto Trading",hint:"Keep enabled if you have an active crypto strategy subscription."})}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Exchange"}),e.jsx("input",{disabled:!0,className:`${Z} opacity-80 cursor-not-allowed`,value:"Delta Exchange"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Key"}),e.jsx("input",{disabled:!n,className:`${Z} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Delta API Key",value:a.apiKey||"",onChange:o=>d("apiKey",o.target.value)})]}),e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"API Secret"}),e.jsx("input",{disabled:!n,className:`${Z} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"••••••••",type:c?"text":"password",value:a.apiSecret||"",onChange:o=>d("apiSecret",o.target.value)}),e.jsx("button",{type:"button",disabled:!n,onClick:()=>u(o=>!o),className:"absolute right-3 top-[34px] text-slate-400 hover:text-slate-200 disabled:opacity-60",children:c?e.jsx(Te,{size:16}):e.jsx(Me,{size:16})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Notes (Optional)"}),e.jsx("input",{disabled:!n,className:`${Z} ${n?"":"opacity-60 cursor-not-allowed"}`,placeholder:"Any note...",value:a.notes||"",onChange:o=>d("notes",o.target.value)})]})]})]})})}const M="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400";function f(...s){return s.filter(Boolean).join(" ")}function ke(){return typeof crypto<"u"&&(crypto!=null&&crypto.randomUUID)?crypto.randomUUID():`id_${Math.random().toString(16).slice(2)}_${Date.now()}`}function Ns({value:s,onChange:r}){var v,L,z,P,F,I,g;const a=j.useMemo(()=>{var i,m,l,C;const t=s??{};return{enabled:!!t.enabled,market:t.market??"FOREX",forex:{platform:((i=t.forex)==null?void 0:i.platform)??"MT5",accounts:((m=t.forex)==null?void 0:m.accounts)??[]},india:{broker:((l=t.india)==null?void 0:l.broker)??"ZERODHA",accounts:((C=t.india)==null?void 0:C.accounts)??[]}}},[s]),c=t=>r({...a,...t}),u=t=>c({forex:{...a.forex??{},...t}}),n=t=>c({india:{...a.india??{},...t}}),p=(t,i)=>{var l;const m=(((l=a.forex)==null?void 0:l.accounts)??[]).map(C=>C.id===t?{...C,...i}:C);u({accounts:m})},d=(t,i)=>{var l;const m=(((l=a.india)==null?void 0:l.accounts)??[]).map(C=>C.id===t?{...C,...i}:C);n({accounts:m})},o=t=>{var i;return u({accounts:(((i=a.forex)==null?void 0:i.accounts)??[]).filter(m=>m.id!==t)})},N=t=>{var i;return n({accounts:(((i=a.india)==null?void 0:i.accounts)??[]).filter(m=>m.id!==t)})},w=()=>{var i;const t=[...((i=a.forex)==null?void 0:i.accounts)??[],{id:ke(),enabled:!0,label:""}];u({accounts:t})},S=()=>{var i;const t=[...((i=a.india)==null?void 0:i.accounts)??[],{id:ke(),enabled:!0,label:""}];n({accounts:t})},x=!a.enabled;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-emerald-400"}),"Copy Trading"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Enable/disable copy trading and manage accounts by market."})]}),e.jsxs("button",{type:"button",onClick:()=>c({enabled:!a.enabled}),className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold border transition",a.enabled?"bg-emerald-500 text-slate-950 border-emerald-500 hover:bg-emerald-400":"bg-slate-900 text-slate-200 border-slate-700 hover:border-slate-500"),children:[e.jsx(V,{size:16}),a.enabled?"Enabled":"Disabled"]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c({market:"FOREX"}),className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",a.market==="FOREX"?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"),children:"FOREX"}),e.jsx("button",{type:"button",onClick:()=>c({market:"INDIA"}),className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",a.market==="INDIA"?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"),children:"INDIAN MARKET"})]}),a.market==="FOREX"&&e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Forex Copy Trading Accounts"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Choose platform and add accounts (MT5 or cTrader)."})]}),e.jsxs("button",{type:"button",onClick:w,disabled:x,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(fe,{size:16}),"Add Account"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",disabled:x,onClick:()=>u({platform:"MT5"}),className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",((v=a.forex)==null?void 0:v.platform)==="MT5"?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500",x&&"opacity-60 cursor-not-allowed"),children:"MT5"}),e.jsx("button",{type:"button",disabled:x,onClick:()=>u({platform:"CTRADER"}),className:f("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition",((L=a.forex)==null?void 0:L.platform)==="CTRADER"?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500",x&&"opacity-60 cursor-not-allowed"),children:"cTrader"})]}),(((z=a.forex)==null?void 0:z.accounts)??[]).length===0?e.jsx("p",{className:"text-sm text-slate-400",children:"No accounts added yet."}):e.jsx("div",{className:"space-y-3",children:(((P=a.forex)==null?void 0:P.accounts)??[]).map(t=>{var i,m;return e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:x,onClick:()=>p(t.id,{enabled:!t.enabled}),className:f("rounded-full px-3 py-1 text-xs font-semibold border",t.enabled?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700",x&&"opacity-60 cursor-not-allowed"),children:t.enabled?"Enabled":"Disabled"}),e.jsx("span",{className:"text-xs text-slate-400",children:((i=a.forex)==null?void 0:i.platform)==="MT5"?"MT5 Account":"cTrader Account"})]}),e.jsxs("button",{type:"button",disabled:x,onClick:()=>o(t.id),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-2 text-xs hover:bg-slate-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Ne,{size:14}),"Delete"]})]}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Label (Optional)"}),e.jsx("input",{disabled:x,value:t.label??"",onChange:l=>p(t.id,{label:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"My ICMarkets #1"})]}),((m=a.forex)==null?void 0:m.platform)==="MT5"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"MT5 Login"}),e.jsx("input",{disabled:x,value:t.mt5Login??"",onChange:l=>p(t.id,{mt5Login:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"12345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"MT5 Password"}),e.jsx("input",{disabled:x,type:"password",value:t.mt5Password??"",onChange:l=>p(t.id,{mt5Password:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"MT5 Server"}),e.jsx("input",{disabled:x,value:t.mt5Server??"",onChange:l=>p(t.id,{mt5Server:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"ICMarketsSC-Live"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"cTrader Account ID"}),e.jsx("input",{disabled:x,value:t.ctraderAccountId??"",onChange:l=>p(t.id,{ctraderAccountId:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"10987654"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"cTrader Access Token"}),e.jsx("input",{disabled:x,type:"password",value:t.ctraderAccessToken??"",onChange:l=>p(t.id,{ctraderAccessToken:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"cTrader Client ID (Optional)"}),e.jsx("input",{disabled:x,value:t.ctraderClientId??"",onChange:l=>p(t.id,{ctraderClientId:l.target.value}),className:f(M,x&&"opacity-60"),placeholder:"your-client-id"})]})]})]})]},t.id)})}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Note: Store secrets securely on backend (encrypt at rest). UI only collects inputs."})]}),a.market==="INDIA"&&e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Indian Market Accounts"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add token per account. You can add / update / delete accounts."})]}),e.jsxs("button",{type:"button",onClick:S,disabled:x,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(fe,{size:16}),"Add Account"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Broker"}),e.jsxs("select",{disabled:x,value:((F=a.india)==null?void 0:F.broker)??"ZERODHA",onChange:t=>n({broker:t.target.value}),className:f(M,"!mt-1",x&&"opacity-60"),children:[e.jsx("option",{value:"ZERODHA",children:"Zerodha"}),e.jsx("option",{value:"ANGEL",children:"Angel One"}),e.jsx("option",{value:"UPSTOX",children:"Upstox"}),e.jsx("option",{value:"FYERS",children:"Fyers"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]})}),(((I=a.india)==null?void 0:I.accounts)??[]).length===0?e.jsx("p",{className:"text-sm text-slate-400",children:"No accounts added yet."}):e.jsx("div",{className:"space-y-3",children:(((g=a.india)==null?void 0:g.accounts)??[]).map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:x,onClick:()=>d(t.id,{enabled:!t.enabled}),className:f("rounded-full px-3 py-1 text-xs font-semibold border",t.enabled?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700",x&&"opacity-60 cursor-not-allowed"),children:t.enabled?"Enabled":"Disabled"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Account"})]}),e.jsxs("button",{type:"button",disabled:x,onClick:()=>N(t.id),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-3 py-2 text-xs hover:bg-slate-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Ne,{size:14}),"Delete"]})]}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Label (Optional)"}),e.jsx("input",{disabled:x,value:t.label??"",onChange:i=>d(t.id,{label:i.target.value}),className:f(M,x&&"opacity-60"),placeholder:"My Zerodha #1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Client ID"}),e.jsx("input",{disabled:x,value:t.clientId??"",onChange:i=>d(t.id,{clientId:i.target.value}),className:f(M,x&&"opacity-60"),placeholder:"AB1234"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:"Access Token"}),e.jsx("input",{disabled:x,type:"password",value:t.token??"",onChange:i=>d(t.id,{token:i.target.value}),className:f(M,x&&"opacity-60"),placeholder:"••••••••"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Token should be stored securely and refreshed as per broker rules."})]})]})]},t.id))})]})]})}const k="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",_="rounded-2xl border border-slate-800 bg-slate-900/40 p-6";function vs(s){return(s==null?void 0:s.user)||(s==null?void 0:s.data)||null}function ys(s){return(s==null?void 0:s.data)||null}function ws(s){const r=Number(s??0);return Number.isFinite(r)?`₹${(r/100).toLocaleString("en-IN",{maximumFractionDigits:2})}`:"—"}function _s(){var xe,me,ue,pe,he,be;const[s,r]=j.useState("profile"),[a,c]=j.useState(!1),[u,n]=j.useState(!1),[p,d]=j.useState(!1),{data:o,isLoading:N,isFetching:w,refetch:S}=Be(),{data:x,isLoading:v,isFetching:L,refetch:z}=Oe(),{data:P,isLoading:F,isFetching:I,refetch:g}=Ve(),t=j.useMemo(()=>vs(o),[o]),i=j.useMemo(()=>ys(x),[x]),m=(P==null?void 0:P.data)??null,l=(m==null?void 0:m.plan)??null,W=((l==null?void 0:l.executionFlow)??null)==="PINE_CONNECTOR"||!!((xe=l==null?void 0:l.featureFlags)!=null&&xe.pineConnector);(me=l==null?void 0:l.featureFlags)!=null&&me.riskControls;const X=!!((ue=l==null?void 0:l.featureFlags)!=null&&ue.indianMarket),Q=!!((pe=l==null?void 0:l.featureFlags)!=null&&pe.cryptoDelta),K=j.useMemo(()=>{const h=[];return W&&h.push({key:"pine",label:"Pine Connector"}),X&&h.push({key:"india",label:"Indian Market"}),Q&&h.push({key:"crypto",label:"Crypto (Delta)"}),h},[W,X,Q]),[B,de]=j.useState("pine");j.useEffect(()=>{const h=K.map(b=>b.key);h.length!==0&&(h.includes(B)||de(h[0]))},[K,B]);const[J,{isLoading:Se}]=Ue(),[Ee,{isLoading:Le}]=Re(),[Pe,{isLoading:Fe}]=_e(),Ie=N||w,oe=(t==null?void 0:t.tradeSettings)||{},[O,R]=j.useState(oe);j.useEffect(()=>{R(oe)},[t==null?void 0:t.tradeSettings]);const ee=(m==null?void 0:m.webhookToken)??null,ie=ee?`https://backend.globalalgotrading.com/tradingview/alert/${ee}`:null,[Es,{isLoading:Ls}]=Ce(),se=!!((m==null?void 0:m.allowTrade)??(m==null?void 0:m.executionEnabled)),[$e,ce]=j.useState(se);j.useEffect(()=>{ce(se)},[se]);const ze=!!((he=l==null?void 0:l.featureFlags)!=null&&he.tradeCopier||(be=l==null?void 0:l.featureFlags)!=null&&be.copyTrading);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white pt-16 md:pt-28 px-4 md:px-6 pb-10",children:[e.jsxs("div",{className:"mx-auto w-full max-w-5xl space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Profile Settings"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage your personal details, billing info & security."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(q,{active:s==="profile",onClick:()=>r("profile"),icon:e.jsx(ve,{size:16}),label:"Profile"}),e.jsx(q,{active:s==="billing",onClick:()=>r("billing"),icon:e.jsx(ge,{size:16}),label:"Billing"}),e.jsx(q,{active:s==="trading",onClick:()=>r("trading"),icon:e.jsx(te,{size:16}),label:"Trading"}),e.jsx(q,{active:s==="copy",onClick:()=>r("copy"),icon:e.jsx(G,{size:16}),label:"Copy Trading"}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm hover:bg-slate-700",children:[e.jsx(as,{size:16}),"Change Password"]})]}),Ie?e.jsx(Cs,{}):t?e.jsxs(e.Fragment,{children:[s==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:_,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(we,{size:15}),"Edit"]})]}),e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(H,{label:"Full Name",value:(t==null?void 0:t.name)||"—",icon:e.jsx(ve,{})}),e.jsx(H,{label:"Email",value:(t==null?void 0:t.email)||"—",icon:e.jsx(ns,{})}),e.jsx(H,{label:"Verification",value:t!=null&&t.isEmailVerified?"Verified":"Not Verified",icon:e.jsx(D,{}),valueClass:t!=null&&t.isEmailVerified?"text-emerald-300":"text-rose-300"}),e.jsx(H,{label:"User ID",value:String((t==null?void 0:t.id)??"—"),icon:e.jsx(ae,{})})]})]}),e.jsxs("section",{className:_,children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Keep your password strong. If you logged in via Google, you can still set a password later."})]})]}),s==="billing"&&e.jsx(e.Fragment,{children:e.jsxs("section",{className:_,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Only PAN + address are required for invoices. Bank details are not collected ✅"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(we,{size:15}),"Edit Billing"]})]}),v||L?e.jsx("div",{className:"mt-6 text-sm text-slate-400",children:"Loading billing…"}):e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(H,{label:"PAN Number",value:(i==null?void 0:i.panNumber)||"—",icon:e.jsx(ae,{})}),e.jsx("div",{className:"sm:col-span-2 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:e.jsx(Ke,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Address"}),i?e.jsxs("div",{className:"mt-1 space-y-1 text-sm text-slate-200",children:[e.jsx("div",{children:i.addressLine1}),i.addressLine2&&e.jsx("div",{children:i.addressLine2}),e.jsxs("div",{children:[i.city,", ",i.state]}),e.jsx("div",{className:"font-medium",children:i.pincode})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"—"})]})]})})]})]})}),s==="trading"&&e.jsxs("section",{className:_,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(te,{size:18}),"Trading Settings"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"This section changes automatically based on your active plan."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("a",{href:"/trading/dashboard",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(te,{size:16}),"Open Trading Workspace"]})}),e.jsxs("button",{type:"button",onClick:async()=>{var h;try{await J({tradeSettings:O}).unwrap(),y.success("Trading settings saved"),S()}catch(b){y.error(((h=b==null?void 0:b.data)==null?void 0:h.message)||"Failed to save trading settings")}},className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(ye,{size:16}),"Save Trading"]})]})]}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Qe,{size:16,className:"text-yellow-300"}),"Current Plan"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Your trading features depend on this plan."})]}),e.jsxs("button",{onClick:()=>g(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),F||I?"Refreshing...":"Refresh"]})]}),F||I?e.jsx("div",{className:"mt-4 text-sm text-slate-400",children:"Loading subscription…"}):m?e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx($,{icon:e.jsx(G,{size:14}),label:"Plan",value:(l==null?void 0:l.name)||(l==null?void 0:l.planCode)||"—"}),e.jsx($,{icon:e.jsx(ae,{size:14}),label:"Category",value:(l==null?void 0:l.category)||"—"}),e.jsx($,{icon:e.jsx(ge,{size:14}),label:"Price",value:`${ws(l==null?void 0:l.priceCents)} / ${(l==null?void 0:l.interval)||"—"}`}),e.jsx($,{icon:e.jsx(D,{size:14}),label:"Execution",value:`${(l==null?void 0:l.executionFlow)||"—"} • ${m!=null&&m.executionEnabled?"Enabled":"Disabled"}`}),e.jsx($,{icon:e.jsx(V,{size:14}),label:"Max Accounts",value:String((l==null?void 0:l.maxConnectedAccounts)??"—")}),e.jsx($,{icon:e.jsx(V,{size:14}),label:"Max Strategies",value:String((l==null?void 0:l.maxActiveStrategies)??"—")}),e.jsx($,{icon:e.jsx(V,{size:14}),label:"Max Lot/Trade",value:String((l==null?void 0:l.maxLotPerTrade)??"—")}),e.jsx($,{icon:e.jsx(Ze,{size:14}),label:"Valid Until",value:m!=null&&m.endDate?new Date(m.endDate).toLocaleString():"—"})]}):e.jsx("div",{className:"mt-4 text-sm text-slate-300",children:"No active subscription found. Please subscribe to enable execution features."})]}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:K.length===0?e.jsx("div",{className:"text-sm text-slate-300",children:"Your plan has no trading settings enabled."}):K.map(h=>e.jsx(ks,{active:B===h.key,onClick:()=>de(h.key),label:h.label},h.key))}),e.jsxs("div",{className:"mt-6",children:[B==="pine"&&W&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-emerald-400"}),"TradingView Webhook URL"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Paste this in TradingView Alert → Webhook URL."})]}),e.jsxs("button",{onClick:()=>g(),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-xs hover:bg-slate-700",children:[e.jsx(Y,{size:14}),F||I?"Refreshing...":"Refresh"]})]}),e.jsx("div",{className:"mt-4",children:m?ee?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{readOnly:!0,value:ie||"",className:`${k} !mt-0`}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(ie||""),y.success("Webhook URL copied")}catch{y.error("Failed to copy")}},className:"rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400",children:"Copy"})]}),e.jsx("div",{className:"text-[11px] text-slate-400",children:"Tip: TradingView alert must enable “Webhook URL” and “Send alert to webhook URL”."})]}):e.jsxs("div",{className:"text-sm text-yellow-200",children:["Your plan supports Pine Connector, but webhook token is not generated yet.",e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"If this is a new purchase, refresh after a few seconds. If it still stays null, backend should generate webhookToken for active subscriptions."})]}):e.jsx("div",{className:"text-sm text-slate-300",children:"No active subscription found."})})]}),e.jsx(xs,{value:O.pineConnector,onChange:h=>R(b=>({...b,pineConnector:h})),allowTrade:$e,setAllowTrade:ce,onRefreshSubscription:g})]}),B==="india"&&X&&e.jsx(hs,{value:O.indianMarket,onChange:h=>R(b=>({...b,indianMarket:h}))}),B==="crypto"&&Q&&e.jsx(fs,{value:O.crypto,onChange:h=>R(b=>({...b,crypto:h}))})]}),e.jsxs("p",{className:"mt-6 text-[11px] text-slate-500",children:["Note: Since your plan is ",e.jsx("span",{className:"text-slate-200 font-semibold",children:(l==null?void 0:l.name)||(l==null?void 0:l.planCode)}),", only the supported settings are shown."]})]}),s==="copy"&&e.jsxs("section",{className:_,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(G,{size:18}),"Copy Trading Settings"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Configure copy trading based on your preferred market (Forex / Indian)."})]}),e.jsxs("button",{type:"button",onClick:async()=>{var h;try{await J({tradeSettings:O}).unwrap(),y.success("Copy trading settings saved"),S()}catch(b){y.error(((h=b==null?void 0:b.data)==null?void 0:h.message)||"Failed to save copy trading settings")}},className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(ye,{size:16}),"Save Copy Trading"]})]}),m?ze?e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-sm text-slate-300",children:["Your current plan does not include ",e.jsx("span",{className:"text-slate-100 font-semibold",children:"Copy Trading"}),"."]}):e.jsx("div",{className:"mt-6",children:e.jsx(Ns,{value:O.copyTrading,onChange:h=>R(b=>({...b,copyTrading:h}))})}):e.jsx("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-5 text-sm text-slate-300",children:"No active subscription found. Please subscribe to enable copy trading."}),e.jsx("p",{className:"mt-6 text-[11px] text-slate-500",children:"Tip: For Forex choose MT5/cTrader and store credentials per account. For Indian market store token per account."})]})]}):e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:["Unable to load profile."," ",e.jsx("button",{onClick:()=>S(),className:"text-emerald-400 hover:text-emerald-300 font-medium",children:"Retry"})]})]}),e.jsx(le,{open:a,onClose:()=>c(!1),children:e.jsx(Ts,{user:t,loading:Se,onClose:()=>c(!1),onSave:async h=>{var b;try{await J(h).unwrap(),y.success("Profile updated"),c(!1),S()}catch(T){y.error(((b=T==null?void 0:T.data)==null?void 0:b.message)||"Failed to update profile")}}})}),e.jsx(le,{open:u,onClose:()=>n(!1),children:e.jsx(Ms,{billing:i,loading:Le,onClose:()=>n(!1),onSave:async h=>{var b;try{await Ee(h).unwrap(),y.success("Billing details saved"),n(!1),z()}catch(T){y.error(((b=T==null?void 0:T.data)==null?void 0:b.message)||"Failed to save billing")}}})}),e.jsx(le,{open:p,onClose:()=>d(!1),children:e.jsx(As,{loading:Fe,onClose:()=>d(!1),onSave:async h=>{var b;try{await Pe(h).unwrap(),y.success("Password updated"),d(!1)}catch(T){y.error(((b=T==null?void 0:T.data)==null?void 0:b.message)||"Failed to change password")}}})})]})}function q({active:s,onClick:r,icon:a,label:c}){return e.jsxs("button",{onClick:r,className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition ${s?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:[a,c]})}function ks({active:s,onClick:r,label:a}){return e.jsxs("button",{onClick:r,className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition ${s?"bg-slate-100 text-slate-950 border-slate-100":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:[e.jsx(V,{size:16}),a]})}function H({label:s,value:r,icon:a,valueClass:c=""}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:a}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-400",children:s}),e.jsx("p",{className:`text-sm font-medium truncate ${c}`,children:r})]})]})}function $({icon:s,label:r,value:a}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-950/40 p-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:s}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] text-slate-400",children:r}),e.jsx("p",{className:"text-sm font-semibold text-slate-100 truncate",children:a})]})]})}function Cs(){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 animate-pulse",children:[e.jsx("div",{className:"h-5 w-52 bg-slate-800 rounded"}),e.jsx("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[...Array(4)].map((s,r)=>e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 w-40 bg-slate-800 rounded mt-3"})]},r))})]})})}function Ts({user:s,loading:r,onClose:a,onSave:c}){const[u,n]=j.useState((s==null?void 0:s.name)||""),p=(s==null?void 0:s.email)||"";return j.useEffect(()=>{n((s==null?void 0:s.name)||"")},[s==null?void 0:s.name]),e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Email change is disabled for now (can be added later)."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{label:"Full Name",children:e.jsx("input",{value:u,onChange:d=>n(d.target.value),className:k,placeholder:"Enter your name"})}),e.jsx(A,{label:"Email",children:e.jsx("input",{value:p,disabled:!0,className:`${k} opacity-70 cursor-not-allowed`})})]}),e.jsx(re,{onClose:a,mainText:r?"Saving...":"Save Changes",disabled:r,onMain:()=>c({name:u.trim()})})]})}function Ms({billing:s,loading:r,onClose:a,onSave:c}){const[u,n]=j.useState({panNumber:(s==null?void 0:s.panNumber)??"",accountHolderName:(s==null?void 0:s.accountHolderName)??"",accountNumber:(s==null?void 0:s.accountNumber)??"",ifscCode:(s==null?void 0:s.ifscCode)??"",bankName:(s==null?void 0:s.bankName)??"",branch:(s==null?void 0:s.branch)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""});j.useEffect(()=>{n({panNumber:(s==null?void 0:s.panNumber)??"",accountHolderName:(s==null?void 0:s.accountHolderName)??"",accountNumber:(s==null?void 0:s.accountNumber)??"",ifscCode:(s==null?void 0:s.ifscCode)??"",bankName:(s==null?void 0:s.bankName)??"",branch:(s==null?void 0:s.branch)??"",addressLine1:(s==null?void 0:s.addressLine1)??"",addressLine2:(s==null?void 0:s.addressLine2)??"",city:(s==null?void 0:s.city)??"",state:(s==null?void 0:s.state)??"",pincode:(s==null?void 0:s.pincode)??""})},[s]);const p=(d,o)=>n(N=>({...N,[d]:o}));return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"PAN is optional ✅. Fill what you have — you can update later."}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsx(A,{label:"PAN Number (Optional)",children:e.jsx("input",{value:u.panNumber,onChange:d=>p("panNumber",d.target.value),className:k,placeholder:"ABCDE1234F"})})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Address"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(A,{label:"Address Line 1",children:e.jsx("input",{value:u.addressLine1,onChange:d=>p("addressLine1",d.target.value),className:k,placeholder:"House / Street"})}),e.jsx(A,{label:"Address Line 2 (Optional)",children:e.jsx("input",{value:u.addressLine2,onChange:d=>p("addressLine2",d.target.value),className:k,placeholder:"Area / Landmark"})}),e.jsx(A,{label:"City",children:e.jsx("input",{value:u.city,onChange:d=>p("city",d.target.value),className:k,placeholder:"City"})}),e.jsx(A,{label:"State",children:e.jsx("input",{value:u.state,onChange:d=>p("state",d.target.value),className:k,placeholder:"State"})}),e.jsx(A,{label:"Pincode",children:e.jsx("input",{value:u.pincode,onChange:d=>p("pincode",d.target.value),className:k,placeholder:"560001"})})]})]}),e.jsx(re,{onClose:a,mainText:r?"Saving...":"Save Billing",disabled:r,onMain:()=>c({...Ss(u)})})]})}function As({loading:s,onClose:r,onSave:a}){const[c,u]=j.useState(""),[n,p]=j.useState(""),[d,o]=j.useState(""),N=c.length>=1&&n.length>=6&&n===d;return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Change Password"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Use a strong password. Minimum 6 characters."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{label:"Current Password",children:e.jsx("input",{type:"password",value:c,onChange:w=>u(w.target.value),className:k,placeholder:"Enter current password"})}),e.jsx(A,{label:"New Password",children:e.jsx("input",{type:"password",value:n,onChange:w=>p(w.target.value),className:k,placeholder:"Create a new password"})}),e.jsxs(A,{label:"Confirm New Password",children:[e.jsx("input",{type:"password",value:d,onChange:w=>o(w.target.value),className:k,placeholder:"Re-enter new password"}),d.length>0&&n!==d&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:"Passwords do not match"})]})]}),e.jsx(re,{onClose:r,mainText:s?"Updating...":"Update Password",disabled:s||!N,onMain:()=>a({currentPassword:c,newPassword:n})})]})}function A({label:s,children:r}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:s}),r]})}function re({onClose:s,mainText:r,disabled:a,onMain:c}){return e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:s,className:"rounded-full bg-slate-700 px-4 py-2 text-sm hover:bg-slate-600",children:"Cancel"}),e.jsx("button",{disabled:a,onClick:c,className:"rounded-full bg-emerald-500 px-4 py-2 text-sm text-slate-950 hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:r})]})}function Ss(s){const r={};return Object.keys(s).forEach(a=>{const c=s[a];r[a]=typeof c=="string"&&c.trim()===""?null:c}),r}export{_s as default};
