import{c as w,j as e,a as X,m as B,r as u,b as G,d as q,e as Q,f as K,g as J,S as W,y as v}from"./index-BVcK7YPk.js";import{U as g}from"./user-CMouR2GJ.js";import{C as M}from"./credit-card-oaPwfBSx.js";import{M as Y}from"./map-pin-CZpm3BuN.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],F=w("building-2",Z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],E=w("hash",ee);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],se=w("lock",ae);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ne=w("mail",te);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],A=w("pencil",ce);function k({open:a,onClose:t,children:o}){return e.jsx(X,{children:a&&e.jsx(B.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:e.jsx(B.div,{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-[90%] max-w-lg",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},onClick:n=>n.stopPropagation(),children:o})})})}const m="mt-1 w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2.5 text-sm text-slate-50 placeholder:text-slate-500 outline-none transition-all duration-200 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400",P="rounded-2xl border border-slate-800 bg-slate-900/40 p-6";function re(a){return(a==null?void 0:a.user)||(a==null?void 0:a.data)||null}function oe(a){return(a==null?void 0:a.data)||null}function ve(){const[a,t]=u.useState("profile"),[o,n]=u.useState(!1),[r,i]=u.useState(!1),[d,s]=u.useState(!1),{data:N,isLoading:y,isFetching:f,refetch:S}=G(),{data:L,isLoading:$,isFetching:z,refetch:I}=q(),l=u.useMemo(()=>re(N),[N]),c=u.useMemo(()=>oe(L),[L]),[_,{isLoading:O}]=Q(),[U,{isLoading:D}]=K(),[V,{isLoading:T}]=J(),R=y||f;return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white pt-16 md:pt-28 px-4 md:px-6 pb-10",children:[e.jsxs("div",{className:"mx-auto w-full max-w-5xl space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Profile Settings"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage your personal details, billing info & security."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(H,{active:a==="profile",onClick:()=>t("profile"),icon:e.jsx(g,{size:16}),label:"Profile"}),e.jsx(H,{active:a==="billing",onClick:()=>t("billing"),icon:e.jsx(M,{size:16}),label:"Billing"}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 rounded-full bg-slate-800 px-4 py-2 text-sm hover:bg-slate-700",children:[e.jsx(se,{size:16}),"Change Password"]})]}),R?e.jsx(de,{}):l?e.jsxs(e.Fragment,{children:[a==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:P,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(A,{size:15}),"Edit"]})]}),e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(p,{label:"Full Name",value:(l==null?void 0:l.name)||"—",icon:e.jsx(g,{})}),e.jsx(p,{label:"Email",value:(l==null?void 0:l.email)||"—",icon:e.jsx(ne,{})}),e.jsx(p,{label:"Verification",value:l!=null&&l.isEmailVerified?"Verified":"Not Verified",icon:e.jsx(W,{}),valueClass:l!=null&&l.isEmailVerified?"text-emerald-300":"text-rose-300"}),e.jsx(p,{label:"User ID",value:String((l==null?void 0:l.id)??"—"),icon:e.jsx(E,{})})]})]}),e.jsxs("section",{className:P,children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Keep your password strong. If you logged in via Google, you can still set a password later."})]})]}),a==="billing"&&e.jsx(e.Fragment,{children:e.jsxs("section",{className:P,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"PAN is optional ✅. Add bank + address for invoices/withdrawals."})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 hover:bg-emerald-400",children:[e.jsx(A,{size:15}),"Edit Billing"]})]}),$||z?e.jsx("div",{className:"mt-6 text-sm text-slate-400",children:"Loading billing…"}):e.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[e.jsx(p,{label:"PAN Number",value:(c==null?void 0:c.panNumber)||"—",icon:e.jsx(E,{})}),e.jsx(p,{label:"Account Holder",value:(c==null?void 0:c.accountHolderName)||"—",icon:e.jsx(g,{})}),e.jsx(p,{label:"Account Number",value:c!=null&&c.accountNumber?xe(c.accountNumber):"—",icon:e.jsx(M,{})}),e.jsx(p,{label:"IFSC Code",value:(c==null?void 0:c.ifscCode)||"—",icon:e.jsx(F,{})}),e.jsx(p,{label:"Bank / Branch",value:`${(c==null?void 0:c.bankName)||"—"}${c!=null&&c.branch?` • ${c.branch}`:""}`,icon:e.jsx(F,{})}),e.jsx(p,{label:"Address",value:ue(c),icon:e.jsx(Y,{})})]})]})})]}):e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:["Unable to load profile."," ",e.jsx("button",{onClick:()=>S(),className:"text-emerald-400 hover:text-emerald-300 font-medium",children:"Retry"})]})]}),e.jsx(k,{open:o,onClose:()=>n(!1),children:e.jsx(le,{user:l,loading:O,onClose:()=>n(!1),onSave:async C=>{var j;try{await _(C).unwrap(),v.success("Profile updated"),n(!1),S()}catch(h){v.error(((j=h==null?void 0:h.data)==null?void 0:j.message)||"Failed to update profile")}}})}),e.jsx(k,{open:r,onClose:()=>i(!1),children:e.jsx(ie,{billing:c,loading:D,onClose:()=>i(!1),onSave:async C=>{var j;try{await U(C).unwrap(),v.success("Billing details saved"),i(!1),I()}catch(h){v.error(((j=h==null?void 0:h.data)==null?void 0:j.message)||"Failed to save billing")}}})}),e.jsx(k,{open:d,onClose:()=>s(!1),children:e.jsx(me,{loading:T,onClose:()=>s(!1),onSave:async C=>{var j;try{await V(C).unwrap(),v.success("Password updated"),s(!1)}catch(h){v.error(((j=h==null?void 0:h.data)==null?void 0:j.message)||"Failed to change password")}}})})]})}function H({active:a,onClick:t,icon:o,label:n}){return e.jsxs("button",{onClick:t,className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm border transition ${a?"bg-emerald-500 text-slate-950 border-emerald-500":"bg-slate-900 text-slate-300 border-slate-700 hover:border-slate-500"}`,children:[o,n]})}function p({label:a,value:t,icon:o,valueClass:n=""}){return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300",children:o}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-400",children:a}),e.jsx("p",{className:`text-sm font-medium truncate ${n}`,children:t})]})]})}function de(){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6 animate-pulse",children:[e.jsx("div",{className:"h-5 w-52 bg-slate-800 rounded"}),e.jsx("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[...Array(4)].map((a,t)=>e.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 w-40 bg-slate-800 rounded mt-3"})]},t))})]})})}function le({user:a,loading:t,onClose:o,onSave:n}){const[r,i]=u.useState((a==null?void 0:a.name)||""),d=(a==null?void 0:a.email)||"";return u.useEffect(()=>{i((a==null?void 0:a.name)||"")},[a==null?void 0:a.name]),e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Email change is disabled for now (can be added later)."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Full Name",children:e.jsx("input",{value:r,onChange:s=>i(s.target.value),className:m,placeholder:"Enter your name"})}),e.jsx(x,{label:"Email",children:e.jsx("input",{value:d,disabled:!0,className:`${m} opacity-70 cursor-not-allowed`})})]}),e.jsx(b,{onClose:o,mainText:t?"Saving...":"Save Changes",disabled:t,onMain:()=>n({name:r.trim()})})]})}function ie({billing:a,loading:t,onClose:o,onSave:n}){const[r,i]=u.useState({panNumber:(a==null?void 0:a.panNumber)??"",accountHolderName:(a==null?void 0:a.accountHolderName)??"",accountNumber:(a==null?void 0:a.accountNumber)??"",ifscCode:(a==null?void 0:a.ifscCode)??"",bankName:(a==null?void 0:a.bankName)??"",branch:(a==null?void 0:a.branch)??"",addressLine1:(a==null?void 0:a.addressLine1)??"",addressLine2:(a==null?void 0:a.addressLine2)??"",city:(a==null?void 0:a.city)??"",state:(a==null?void 0:a.state)??"",pincode:(a==null?void 0:a.pincode)??""});u.useEffect(()=>{i({panNumber:(a==null?void 0:a.panNumber)??"",accountHolderName:(a==null?void 0:a.accountHolderName)??"",accountNumber:(a==null?void 0:a.accountNumber)??"",ifscCode:(a==null?void 0:a.ifscCode)??"",bankName:(a==null?void 0:a.bankName)??"",branch:(a==null?void 0:a.branch)??"",addressLine1:(a==null?void 0:a.addressLine1)??"",addressLine2:(a==null?void 0:a.addressLine2)??"",city:(a==null?void 0:a.city)??"",state:(a==null?void 0:a.state)??"",pincode:(a==null?void 0:a.pincode)??""})},[a]);const d=(s,N)=>i(y=>({...y,[s]:N}));return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit Billing Details"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"PAN is optional ✅. Fill what you have — you can update later."}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(x,{label:"PAN Number (Optional)",children:e.jsx("input",{value:r.panNumber,onChange:s=>d("panNumber",s.target.value),className:m,placeholder:"ABCDE1234F"})}),e.jsx(x,{label:"Account Holder Name",children:e.jsx("input",{value:r.accountHolderName,onChange:s=>d("accountHolderName",s.target.value),className:m,placeholder:"Name as per bank"})}),e.jsx(x,{label:"Account Number",children:e.jsx("input",{value:r.accountNumber,onChange:s=>d("accountNumber",s.target.value),className:m,placeholder:"XXXXXX"})}),e.jsx(x,{label:"IFSC Code",children:e.jsx("input",{value:r.ifscCode,onChange:s=>d("ifscCode",s.target.value),className:m,placeholder:"HDFC0001234"})}),e.jsx(x,{label:"Bank Name",children:e.jsx("input",{value:r.bankName,onChange:s=>d("bankName",s.target.value),className:m,placeholder:"HDFC / SBI / ICICI..."})}),e.jsx(x,{label:"Branch (Optional)",children:e.jsx("input",{value:r.branch,onChange:s=>d("branch",s.target.value),className:m,placeholder:"Branch name"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Address"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(x,{label:"Address Line 1",children:e.jsx("input",{value:r.addressLine1,onChange:s=>d("addressLine1",s.target.value),className:m,placeholder:"House / Street"})}),e.jsx(x,{label:"Address Line 2 (Optional)",children:e.jsx("input",{value:r.addressLine2,onChange:s=>d("addressLine2",s.target.value),className:m,placeholder:"Area / Landmark"})}),e.jsx(x,{label:"City",children:e.jsx("input",{value:r.city,onChange:s=>d("city",s.target.value),className:m,placeholder:"City"})}),e.jsx(x,{label:"State",children:e.jsx("input",{value:r.state,onChange:s=>d("state",s.target.value),className:m,placeholder:"State"})}),e.jsx(x,{label:"Pincode",children:e.jsx("input",{value:r.pincode,onChange:s=>d("pincode",s.target.value),className:m,placeholder:"560001"})})]})]}),e.jsx(b,{onClose:o,mainText:t?"Saving...":"Save Billing",disabled:t,onMain:()=>n({...he(r)})})]})}function me({loading:a,onClose:t,onSave:o}){const[n,r]=u.useState(""),[i,d]=u.useState(""),[s,N]=u.useState(""),y=n.length>=1&&i.length>=6&&i===s;return e.jsxs("div",{className:"text-slate-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Change Password"}),e.jsx("p",{className:"text-xs text-slate-400 mb-5",children:"Use a strong password. Minimum 6 characters."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Current Password",children:e.jsx("input",{type:"password",value:n,onChange:f=>r(f.target.value),className:m,placeholder:"Enter current password"})}),e.jsx(x,{label:"New Password",children:e.jsx("input",{type:"password",value:i,onChange:f=>d(f.target.value),className:m,placeholder:"Create a new password"})}),e.jsxs(x,{label:"Confirm New Password",children:[e.jsx("input",{type:"password",value:s,onChange:f=>N(f.target.value),className:m,placeholder:"Re-enter new password"}),s.length>0&&i!==s&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:"Passwords do not match"})]})]}),e.jsx(b,{onClose:t,mainText:a?"Updating...":"Update Password",disabled:a||!y,onMain:()=>o({currentPassword:n,newPassword:i})})]})}function x({label:a,children:t}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-300",children:a}),t]})}function b({onClose:a,mainText:t,disabled:o,onMain:n}){return e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:a,className:"rounded-full bg-slate-700 px-4 py-2 text-sm hover:bg-slate-600",children:"Cancel"}),e.jsx("button",{disabled:o,onClick:n,className:"rounded-full bg-emerald-500 px-4 py-2 text-sm text-slate-950 hover:bg-emerald-400 disabled:opacity-60 disabled:cursor-not-allowed",children:t})]})}function xe(a){const t=String(a);return t.length<=4?t:`${"•".repeat(Math.max(0,t.length-4))}${t.slice(-4)}`}function ue(a){if(!a)return"—";const t=[a.addressLine1,a.addressLine2,a.city,a.state,a.pincode].filter(Boolean);return t.length?t.join(", "):"—"}function he(a){const t={};return Object.keys(a).forEach(o=>{const n=a[o];t[o]=typeof n=="string"&&n.trim()===""?null:n}),t}export{ve as default};
