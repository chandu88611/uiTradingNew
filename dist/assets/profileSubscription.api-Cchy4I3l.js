import{w as u}from"./index-_x4LqXeA.js";const a="/admin",s=i=>`${a}${i}`.replace(/\/{2,}/g,"/");function c(i){var t,e,o,r;if(!i)return null;const n=((e=(t=import.meta)==null?void 0:t.env)==null?void 0:e.VITE_PUBLIC_API_URL)||((r=(o=import.meta)==null?void 0:o.env)==null?void 0:r.VITE_API_URL)||(typeof window<"u"?window.location.origin:"");return`${String(n).replace(/\/$/,"")}/webhooks/tradingview/${i}`}const l=u.injectEndpoints({endpoints:i=>({getMyCurrentSubscription:i.query({query:()=>({url:"/subscription/current",method:"GET"}),transformResponse:n=>{const t=(n==null?void 0:n.data)??null;if(!t)return n;const e=t.webhookToken??null;return{...n,data:{...t,webhookUrl:c(e)}}},providesTags:["UserSubscription"]}),subscribeToPlan:i.mutation({query:n=>({url:"/subscription/subscribe",method:"POST",body:n}),invalidatesTags:["UserSubscription"]}),cancelMySubscription:i.mutation({query:n=>({url:s("/subscription/cancel"),method:"POST",body:n}),invalidatesTags:["UserSubscription"]}),listActivePlans:i.query({query:n=>({url:s("/plans/subscription-plan/all"),method:"GET",params:n??void 0}),providesTags:["SubscriptionPlan"]}),getPlanById:i.query({query:n=>({url:s(`/plans/subscription-plan/${n}`),method:"GET"}),providesTags:(n,t,e)=>[{type:"SubscriptionPlan",id:e}]})}),overrideExisting:!1}),{useGetMyCurrentSubscriptionQuery:b,useSubscribeToPlanMutation:d,useGetPlanByIdQuery:m}=l;export{m as a,d as b,b as u};
